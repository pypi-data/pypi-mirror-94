<!-- HTML header for doxygen 1.8.16-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=9" />
<meta name="generator" content="Doxygen 1.8.18" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="Description" content="Machina Client SDK Version 2.1.0: Ionic Security Machina Client SDK for Python users" />
<meta name="keywords" content="ionicsdk.keyvault.KeyVault" />
<meta name="keywords" content="ionicsdk.keyvault.KeyVaultAppleKeyChain" />
<meta name="keywords" content="ionicsdk.keyvault.KeyVaultMac" />
<meta name="keywords" content="ionicsdk.keyvault.KeyVaultWindowsDpApi" />
<title>Machina Client SDK Version 2.1.0: KeyVault Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
<link href="ISAgentSDK.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Machina Client SDK Version 2.1.0
   </div>
   <div id="projectbrief">Ionic Security Machina Client SDK for Python users</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()" onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">KeyVault Overview </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#keyvault-introduction">Introduction to KeyVault</a></li>
<li class="level1"><a href="#keyvault-thread">Thread Safety</a></li>
<li class="level1"><a href="#keyvault-list">Key Vault Classes</a></li>
<li class="level1"><a href="#iskeyvault-example-simple">Example Usage - Store a Newly Created Key into a Key Vault</a></li>
<li class="level1"><a href="#iskeyvault-example-simple2">Example Usage - Retrieve a Key from a Key Vault</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="keyvault-introduction"></a>
Introduction to KeyVault</h1>
<p>The KeyVault module supports local, temporary, secure storage of data protection keys. The primary use case for storing keys locally is to enable the ability to access those keys while being temporarily offline (no internet / network access).</p>
<p><br />
</p>
<h1><a class="anchor" id="keyvault-thread"></a>
Thread Safety</h1>
<p>KeyVaultLib <em>is</em> thread-safe. All classes in the KeyVault module are thread-safe and may be used as a shared resource between concurrent threads. Additionally, the underlying storage mechanisms are process-safe, which means a single key vault may be simultaneously used from multiple different processes <em>on the same machine</em> without data loss or data corruption.</p>
<p><br />
</p>
<h1><a class="anchor" id="keyvault-list"></a>
Key Vault Classes</h1>
<ul>
<li><a class="el" href="classionicsdk_1_1keyvault_1_1_key_vault.html">ionicsdk.keyvault.KeyVault</a> - Base class that implements all methods for KeyVaults but leaves storage logic unimplemented (responbility of sub-classes).</li>
<li><a class="el" href="classionicsdk_1_1keyvault_1_1_key_vault_windows_dp_api.html">ionicsdk.keyvault.KeyVaultWindowsDpApi</a> - Windows key vault implementation that uses Windows DPAPI data protection to secure the key vault file.</li>
<li><a class="el" href="classionicsdk_1_1keyvault_1_1_key_vault_apple_key_chain.html">ionicsdk.keyvault.KeyVaultAppleKeyChain</a> - Mac OS X and iOS key vault implementation that stores all key vault data in the Apple keychain.</li>
<li><a class="el" href="classionicsdk_1_1keyvault_1_1_key_vault_mac.html">ionicsdk.keyvault.KeyVaultMac</a> - Mac OS X key vault implementation that uses the OS X login keychain to store the key which is used to secure the key vault file.</li>
</ul>
<p><br />
</p>
<h1><a class="anchor" id="iskeyvault-example-simple"></a>
Example Usage - Store a Newly Created Key into a Key Vault</h1>
<div class="fragment"><div class="line"><span class="keyword">import</span> time</div>
<div class="line"><span class="keyword">import</span> ionicsdk</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Create an agent and initialize it using all defaults.</span></div>
<div class="line">myAgent = ionicsdk.Agent()</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Create a key vault for Windows that uses the default key vault file path.</span></div>
<div class="line">keyVault = ionicsdk.KeyVaultWindowsDpApi()</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Load all keys from the existing key vault file, if any.</span></div>
<div class="line">keyVault.Sync()</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Create a new key using the Ionic platform and store it in a key vault for</span></div>
<div class="line"><span class="comment"># future use.</span></div>
<div class="line"> </div>
<div class="line">attributes = {<span class="stringliteral">"classification"</span>:(<span class="stringliteral">"confidential"</span>,),<span class="stringliteral">"allowedGroups"</span>:(<span class="stringliteral">"admins"</span>,<span class="stringliteral">"mods"</span>)}</div>
<div class="line">createdKey = myAgent.createkey(attributes)</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> createdKey <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line">    key = ionicsdk.KeyVaultKeyRecord(createdKey.id, </div>
<div class="line">                                     createdKey.bytes, </div>
<div class="line">                                     createdKey.attributes, </div>
<div class="line">                                     createdKey.mutableAttributes,</div>
<div class="line">                                     createdKey.obligations,</div>
<div class="line">                                     int(time.time()),</div>
<div class="line">                                     24*60*60, </div>
<div class="line">                                     ionicsdk.KeyVaultKeyRecord.ISKR_ADDED)</div>
<div class="line">    keyVault.setkey(key)</div>
<div class="line">    keyVault.Sync();</div>
</div><!-- fragment --><h1><a class="anchor" id="iskeyvault-example-simple2"></a>
Example Usage - Retrieve a Key from a Key Vault</h1>
<div class="fragment"><div class="line"><span class="keyword">import</span> ionicsdk</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Create a key vault for Windows that uses the default key vault file path.</span></div>
<div class="line">keyVault = ionicsdk.KeyVaultWindowsDpApi()</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Load all keys from the existing key vault file, if any.</span></div>
<div class="line">keyVault.Sync()</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Look up a key in the key vault using its key ID.</span></div>
<div class="line">myKeyId = <span class="stringliteral">"SomeKeyId"</span>;</div>
<div class="line">key = keyVault.GetKey(myKeyId)</div>
<div class="line"><span class="keywordflow">if</span> key <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line">    print(<span class="stringliteral">"Found the key with ID: "</span> + key.keyid)</div>
<div class="line"><span class="keywordflow">else</span>:</div>
<div class="line">    print(<span class="stringliteral">"No key was found"</span>)</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<hr class="footer" /><address class="footer">
<p class="small">You acknowledge your access, review and use of the documentation on this page is subject to the Ionic Security Inc. <a href="https://dev.ionic.com/use.html">Documentation Use Rights</a>.</p>
<p class="small">&copy; 2016-2021 Ionic Security Inc. All rights reserved.&#160;-&#160;
Generated on Wed Feb 3 2021 17:16:19 for Machina Client SDK Version 2.1.0 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen" />
</a> 1.8.18 </p>
</address>

</body>
</html>
