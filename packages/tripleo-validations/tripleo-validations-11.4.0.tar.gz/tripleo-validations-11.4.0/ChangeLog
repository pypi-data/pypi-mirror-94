CHANGES
=======

11.4.0
------

* Change path for validation Ansible files
* Add validation to verify the RHSM version
* Add tripleo-validations role for component testing
* Ensures script is executable
* Add tripleo-validation.py as script in setup.cfg
* replace max\_fds with sysctl call
* Add a validation to check the local
* Fix conditionals/types in check\_flavors and verify\_profiles
* Validation collect-flavors-and-verify-profiles bug
* Remove callback plugin from tripleo-validation
* Remove objects migrated to validations-common
* Use the default flavor name when flavor parameter is not defined
* Optimize container\_cli usage by mysql-open-files-limit validation
* Refactor vif plugging validations
* Remove ceph-pg from openstack tripleo validator run groups
* [train and before] Define default firewall\_driver value
* fix mixed up molecule tests
* [train] Switch to content provider jobs/templates
* Correct how the image\_serve validation works
* Add TripleO validation CLI script
* New validation: Ensure sVirt is active
* Convert all of the fedora28 container usage to CentOS8
* Migrate molecule jobs from centos 7 to 8
* Add validation to check status of ipa server
* Switch install-docker with ensure-docker
* Add new Upgrades validation groups
* Add os-cloud support for tripleo-ansible-inventory script
* Allows to use custom role name for validations
* Corrected work directory for validate-selinux
* Get UUID from ansible environment variables
* Updated "overcloud" to "allovercloud" group
* Fix neutron\_sanity\_check for ML2/OVS overcloud
* Make Get OSD stat percentage compatible with jq < 1.5
* Ensure virtualenv is installed
* Port jobs from centos7 to centos8
* Make Get OSD stat percentage compatible with both Luminous and Nautilus
* Fix ceph-ansible permissions when checking the repo name
* Don't write playbook stats in binary mode
* remove non-voting ceph validation from gate
* Update Ceph role's Get OSD stat to use new data structure
* Introducing tripleo\_delegate\_to on ceph health validation
* Improve the ceph-ansible repository error message
* Remove fwaas\_driver.ini from neutron sanity checks
* Fix multistack inventory
* tripleo-validations failing on lower constraints
* Don't validate token\_flush for non-persistent token formats
* Skeleton role, get with the decade
* Adds Search Path Override
* Add basic molecule tests for uncovered roles
* Add custom ansible-lint rule for Role Names
* tripleo-validations failing on lower constraints
* Remove default ansible option in test runs
* Make groups documentation part dynamic
* Add pre/post ceph validation groups
* Fix upper and lower constraints
* Better task name and loop control
* Delete healthcheck-service-status role
* Normalize role names when generating roles
* molecule-xfs\_check\_ftypefailure (non-voting), remove from gate
* Replace all references to the old role name
* Adds basic molecule testing for ceph validations
* zuul: all functional jobs now depend on linter job first
* Validate the playboooks metadata structure
* New validation: validate-selinux
* Remove the useless environment variable
* Removed workaround for ansible-lint issue
* Stop testing python2.7
* Add new validation\_json callback
* Introduce Ceph placement group validation
* Fix ceph-ansible repo check
* Add an additional validation to check ceph-ansible repository
* Add a validation to fail if a Ceph dependency is not installed

11.3.1
------

* Rename custom "ini" module to "validations\_read\_ini"
* Add groups.yaml containing Validation Groups definition
* Avoid failure if dhcp\_end or dhcp\_start isn't set
* Add forgotten reportentry module in the documentation
* Update .gitreview for stable/train
* Set validation defaults to match undercloud default settings
* Fix Molecule tests
* Add workaround for the ansible-lint installation failure

11.3.0
------

* Use dynamic argument\_spec from documentation
* Hide sensitive data from Ansible run and logging
* Fix Ironic Authentication exception
* Fix ost-tox-lower-constraints job indentation
* Fix missing closing parenthesis in skeleton role
* Fix Python 3 incompatibility in tripleo-ansible-inventory
* Update documentation URL link for CPU & RAM Undercloud recommendations
* Constrain molecule
* Add playbook creation for the automation
* New validation: detect failed containers
* Add new healthcheck-service-status validation
* Fix get plan\_name default value for inventory script
* Update the constraints url
* Fix tripleo-ansible-inventory

11.2.0
------

* Add different logic when running against the Undercloud or the Controller
* Deprecation of the ceilometerdb-size validation
* Add multistack support to tripleo-ansible-inventory
* Pass undercloud\_connection in TripleoInventory instantiation
* Set undercloud-connection to local by default
* Add undercloud-key-file and ssh\_network options
* Add zuul molecule job for check-latest-packages-version role
* Adds molecule testing for stonith-exists
* Modify validation and add Molecule tests for rabbitmq-limits
* Adds molecule testing for undercloud-tokenflush
* Adds molecule testing for undercloud-heat-purge-deleted
* Switch to promote docs job
* Add Molecule tests for check-network-gateway
* Do not stop ceph-health but skip if ceph is not deployed
* Removed older version of python
* Loosen ironic-boot-configuration
* Remove useless meta directory for the Ansible ntp role
* Adds molecule tests to image-serve and correct validation
* Adds molecule tests for the nova-status validation
* Adding molecule tests for no-op-firewall-nova-driver validation
* Convert tox to native zuul
* Use custom Ceph cluster name in validations
* Linting hardening with pre-commit
* Revert "Improve Ceph health checks to work with custom cluster names"
* Add autodocumentation for roles and library
* Improve Ceph health checks to work with custom cluster names
* Simplifying the check of the latest package version validation
* Blacklist sphinx 2.1.0 (autodoc bug)
* Corrected how hiera is installed
* Bump the openstackdocstheme extension to 1.20
* Correct "repos" validation and adds Molecule tests

11.1.0
------

* Enable fact gathering for needed validations
* Adds molecule testing for controller-ulimits
* Adds molecule testing for controller-token
* Adds molecule tests for ctlplane-ip-range validation
* Adding new role automation with Ansible
* Adds molecule tests for undercloud-disk-space
* Adds Molecule to haproxy validation role
* Add molecule testing on undercloud-debug role
* Add new role to validate tls-everywhere
* Adds molecule testing for DNS validation
* Use ansible\_pkg\_mgr fact instead of hardcoding yum command
* Make Verify the RAM requirements task failing again
* Add molecule tests for the undercloud-cpu role
* Add Python 3 Train unit tests
* Support multi-arch in deploy image validations
* Fix variables indentation for ceph-health validation
* Add Molecule tests for the role xfs-check-ftype
* Add Molecule tests for the role undercloud-ram
* Deletes validations directory
* Remove Neutron LBaaS
* Remove useless roles meta directory
* Add support for the chrony implementation
* Remove useless cookiecutter files
* Documentation update with the new validations architecture
* Use sorted dictionary before iteration
* Update the Undercloud Services list for the uc-service-status role
* Improve stackrc file sourcing
* Use Undercloud local\_ip to ensure the registry does answer or not
* Add pkg names better management between OS releases
* Update ceph-health for containers and failure options
* Fix typo in the command to get the file\_descriptors total\_limit
* Add run-validations.sh script

11.0.0
------

* Fix validations-specific Ansible output callback
* Sync Sphinx requirement
* Add option to fail if ceph-ansible is not installed
* [Python3] Adds bytes to str conversion management
* Fix invalid 'ignore\_missing\_file' attribute in a task
* Add nova-status Ansible role
* Makes rogue\_dhcp.py script Python3 aware
* Fix Jinja2's default filter usage
* New validation: ensure services status
* Add serial option in tripleo-ansible-inventory script
* New validation: ensure image-serve service is working as expected
* Replace git.openstack.org URLs with opendev.org URLs
* OpenDev Migration Patch
* Fix Jinja2's default filter usage
* Update master for stable/stein
* Clean up some old roles dependencies
* Adds roles support in the script generating the validations doc

10.4.0
------

* Add check-latest-minor-version role
* Add default-node-count role
* Add switch-vlans role
* Add network-environment role
* Rename undercloud-neutron-sanity-check role
* Add stack-health role
* Add deployment-images role
* Add collect-flavors-and-verify-profiles role
* Add containerized-undercloud-docker role
* Add stonith-exists role
* Add ironic-boot-configuration role
* Add openstack-endpoints role
* Add mysql-open-files-limit role
* Add rabbitmq-limits role
* Add node-health role
* Add check-network-gateway role
* Add node-disks role
* Migrate ansible-lint to pre-commit
* Add an --undercloud-connection argument
* Allow running a no-op validation
* Add Podman support to rabbitmq-limits validation
* Add Podman support to mysql-open-files-limit validation
* Add repos validations role
* Improve the network\_gateway check on the provisioning network
* Add ctlplane-ip-range role
* Add controller-ulimits role
* Add controller-token role
* Add no-op-firewall-nova-driver role
* Add advanced-format-512e-support role
* Add xfs-check-ftype role
* Add ceph role
* Add nova-event-callback role
* Fix minor typo in validations/check-ftype.yaml
* Add openshift-on-openstack role
* Add ntpstat role
* Add ceilometerdb-size role
* Add dns role
* Add pacemaker-status role
* Add ovs-dpdk-pmd role
* Add haproxy role
* Add dhcp-validations role
* Migrating Undercloud playbooks to their own Ansible Role

10.3.0
------

* Update undercloud minimum ram
* Ignore new ansible-lint pipefail rule
* Update generate\_validations\_doc.py script
* Add node disks validation
* Fix introspection data lookup
* Retire the undercloud-selinux-mode validation
* Fix the misspelling of "interface"
* Address python3 string issues with subprocess
* Fix minor Ansible syntax
* Fix overcloud neutron sanity validation
* Fix the containerized location of ceilometer ceilometer.conf
* Update the bugs link to storyboard

10.2.0
------

* Fix ansible lint errors
* dict\_object.keys() is not required for \*in\* operator
* Fix ceilometerdb-size validation
* Retire undercloud\_conf custom plugin
* Fix dhcp-provisioning validation
* Fix check-network-gateway validation
* Fix ctlplane-ip-range validations
* Fix the ironic\_inspector config file in the switch-vlans validation
* Drop baremetal job template
* Fix neutron-sanity-check validations
* Set config path in hiera module
* Fix mysql-open-files-limit validation to work in HA mode
* Change openstack-dev to openstack-discuss
* Remove deprecated inventory option
* fix tox python3 overrides
* Add the right ironic\_inspector config file path
* Avoid 'non-zero return code' msg when ceph-ansible isn't installed
* Fix the Docker command to get the open\_files\_limit
* Fix inspector.conf file path again
* Run pcs command only if the pacemaker service is active
* Use containerized location of keystone.conf file
* Add Python 3.6 classifier to setup.cfg
* Checking the real process name for each containerized component
* Check the Heat purge\_deleted crontab on the heat\_api\_cron container
* Fix the ceilometerdb-size validation in the containerized undercloud
* Improve the openshift-nw-openstack validation
* Check the keystone token flush on the keystone\_cron container
* Use the right path for ironic\_inspector config file
* Skip schema check in network validation
* Fix containerized services task
* Remove checks for boot\_option
* Fix mysql\_open\_files\_limit validation
* Avoid Ansible Deprecation Warning
* Fix the introspection interface look up
* Add ansible\_python\_interpreter to the inventory script
* Fix disk space validation
* Fix the undercloud-process-count validation
* Add python 3.6 unit test job
* Fix the undercloud-heat-purge-deleted validation
* Fix the keystone tokenflush validation
* Correct inline documentation
* Use containerized location of ironic inspector.conf for validation

10.1.0
------

* Use containerized location of ironic inspector.conf for validation

10.0.0
------

* Remove a debug task
* Removed older version of python added 3.5
* Use int builtin filter for testing purpose
* Fix a minor typo in the ceilometerdb-size validation
* Fix several config file location
* Fix diskspace validation when size is the limit
* Validation for no PMD cores on a NUMA node
* Add new nova-event-callback validation
* Make inventory fail if Heat engine is down
* add python 3.6 unit test job
* switch documentation job to new PTI
* fix bug link in readme
* Update reno for stable/rocky
* add python 3.6 unit test job
* switch documentation job to new PTI
* import zuul job settings from project-config
* Refactor service client getters

9.3.0
-----

* Revert "Fail if the Overcloud inventory is empty"
* Add a networking check for OpenShift on OpenStack
* Add a OpenShift on OpenStack HW validation
* Enhanced checkdisk for undercloud
* add initial role for containerized undercloud validations

9.2.0
-----

* Adds heat-manage purge\_deleted cron job validation
* Check baremetal flavors for custom resource class
* fix tox python3 overrides
* Check if a bridge with name br-int exists

9.1.0
-----

* Add validation for checking node counts
* Run validation only if overcloud exists
* Fix documentations for pypi
* Fix node health validation with inventory changes
* Add validation for verifying profiles
* Add std\_error output to error log in tripleo-ansible-inventory
* Add documentation links to README
* Use clean keystone URL in the keystone validation
* Fail if the Overcloud inventory is empty
* Fix the events db size validation
* Add validation for checking roles against flavors
* Add ironic boot configuration validation
* Add validation for checking baremetal boot images
* fix lower constraints
* Validate that there should not be XFS volumes with ftype=0
* Update ceilometerdb-size to support gnocchi and panko

9.0.0
-----

* Optimize the link address
* Fix Switch VLANs validation
* Add a validation that checks for available update
* Extract 'filtered()' function into 'utils'
* Add new SELinux validation check
* add lower-constraints job
* Updated from global requirements
* Fix docker img filter in rabbitmq validation
* Fix MySQL Open Files Limit validation
* Fix overcloud services connectivity validation
* Updated from global requirements
* Update the doc links to the newest ones
* Updated from global requirements
* Deprecate ini formatted static-inventory
* Updated from global requirements
* Update reno for stable/queens
* Improve exceptions in tripleo-ansible-inventory

8.3.0
-----

* Updated from global requirements
* Replaces yaml.load() with yaml.safe\_load()
* Add help for --plan, add --stack
* Fix a spelling mistake in source file
* Fix function invocations
* Add a health check for overcloud nodes
* Add lookup plugin for ironic nodes
* Zuul: Remove project name
* Detect overlapping IP ranges

8.2.0
-----

* Updated from global requirements
* Fix the rabbitmq fd limits validation
* Fix the nova config file location
* Fix the haproxy config file location
* Invert validation task order
* Updated from global requirements
* Updated from global requirements
* Updated from global requirements
* Updated from global requirements
* Add a lookup plugin for nova servers
* Sanitize validations output
* Improve netenv validation and add IPv6 tests
* Adjust TripleoInventory arguments, don't pass config object
* Add --static-yaml-inventory option to tripleo-ansible-inventory
* Move tripleo ansible inventory code to tripleo-common
* Get rid of star imports
* Unit testing for ini
* Add a validation to check for working DNS
* Enhance repo validation to check for unwanted enabled repos
* Updated from global requirements
* Change controller ulimit to match the default
* Change HAProxy validation queue timeout to match the default

8.1.0
-----

* Add ansible-lint script
* Remove unused tox\_install.sh
* Updated from global requirements
* Add env var for custom ssh user
* Remove yum warning in ceph-ansible validation
* Add VipMap to inventory variables
* Change Nova firewall driver validation host
* Migrate tripleo-validations to zuul v3 jobs
* Updated from global requirements
* Add enabled networks in the role  as part of the inventory
* Fix the Network Gateway Validation
* Fix typos in pacemaker module documentation
* Add per-network bind ips to inventory
* Fix include action DEPRECATION WARNING (Ansible >2.4)
* Specify vars after children sections
* Use OrderedDict to sort the hostname before the alias
* Add validation to check VLANs against switch info in Ironic intospection data
* ctlplane-ip-range: Verify lower IP bound is smaller than upper
* Warn if there are not enough node IPs in pools
* Explicitly set default to 0 for quiet argument in validate-files script

8.0.0
-----

* Add Ansible specific files to .gitignore
* Remove syntax warnings for when statements
* Fix repo-availability validation with Ansible 2.3
* Validate library files for documentation string
* Let the IP range validation fail on low IP range
* Add missing module documentation
* Exclude byte code files from tht lookup
* Updated from global requirements
* Update services in the process count validation
* Fix name of controller token validation
* Add separate fail-if-no-hosts plugin
* Updated from global requirements
* Use Python to compute release notes version
* Update envlist to match what is supported
* Prevent unnecessary calls to dynamic inventory host()
* Lazy load the entire stack instead of single outputs
* Update reno for stable/pike
* Make validations fail if there are no hosts

7.3.0
-----

* Make sure to keep case when for host definition in host inventory
* Do not output empty variables in inventory
* Updated from global requirements
* Configurable ansible\_ssh\_user for tripleo-ansible-inventory
* Updated from global requirements
* Fix validation names

7.2.0
-----

* Updated from global requirements
* Don't modify case of role names in inventory
* Add jsonschema validation for os-net-config data
* Print a warning message if ceph-ansible isn't installed
* Updated from global requirements
* Update URL home-page in documents according to document migration
* Fix \`when\` statement in deployment image validation
* Fixup the undercloud service list used in the validation
* Remove the pre-update group and add a post-upgrade group
* Switch from oslosphinx to openstackdocstheme
* Add role\_name to inventory
* Add deploy\_server\_id and bootstrap\_node\_id to inventory
* Port the network environment validation
* Check repository availability
* Updated from global requirements
* Updated from global requirements
* Add stack health check validation
* Adds pre-upgrade/update to the overcloud endpoint validation
* Unit testing for undercloud\_conf
* Reference the new pre-update/pre-upgrade groups
* Validate undercloud service status before update/upgrade

7.1.0
-----

* Add pre-upgrade group to undercloud RAM validation
* Pre-upgrade: Check disk space
* Fix inventory without existing stack
* Updated from global requirements
* Add per host groups to dynamic inventory
* Updated from global requirements
* Add host list by service to inventory
* Retreive AdminPassword from heat instead of mistral
* Add ability to write static inventory
* Pass printing responsibility to dynamic inventory script
* Show all roles in inventory
* Use OS\_PROJECT\_NAME and fallback to TENANT for inventory script
* Updated from global requirements
* Updated from global requirements
* Add 'become: true' to haproxy validation
* Add lookup plugin for tripleo heat templates
* Updated from global requirements
* Unit testing for ip\_range
* Updated from global requirements
* Let undercloud-process-count succeed with warnings
* Drop scapy dependency

7.0.0
-----

* Blacklist setuptools versions 34.0.0-34.3.2
* Fix token auth in ansible inventory script
* Update reno for stable/ocata
* Fix docs to reflect Ansible 2.0 requirements
* Create the neutron-sanity-check validations
* Updated from global requirements
* Use generic keystone plugins instead of version-specific
* Add missing mistralclient requirement
* Migrate from keystoneclient to keystoneauth
* Check for Ceph status in post-deployment
* Updated from global requirements
* Add a 'warn' ansible module
* Typo fix: choses => chooses
* [trivial] Remove broken link

5.4.0
-----

* Add reno for release notes management
* prevent validations from failing  when undercloud.conf is missing:
* controller-token.yaml: Checks that keystone token is disabled after deployment

5.3.0
-----

* deployment-images.yaml: Validation checking existence of required images
* Updated from global requirements
* ceilometerdb-size.yaml: Fix ceilometer database validation
* Don't rely on overcloudrc
* Fixes undercloud-tokenflush validation
* Remove TODO in Validation description, revise description
* Replace six.iteritems() with .items()
* Show team and repo badges on README
* Updated from global requirements
* Updated from global requirements
* validation\_output.py: Provided output for ansible debug module

5.2.0
-----

* Fix the DHCP validations
* callback\_plugins/validation\_output.py: improved output
* undercloud-tokenflush: changed group to pre-introspection
* Updated from global requirements
* Validation stonith device exists in OpenStack Platform HA cluster
* Updated from global requirements
* undercloud-disk-space.yaml: improved output
* Change HAProxy timeouts to match the defaults
* Fix the mysql-open-files-limit validation
* Fix the pacemaker-status validation
* Fix the ctlplane-ip-range validation
* Fix the rabbitmq-limits validations
* Fix the check-network-gateway validation
* Fix typo in the group for check-network-gateway
* Pass the the custom cacert to nova and heat client
* Use custom CA cert with tripleo-ansible-inventory
* Updated from global requirements
* Updated from global requirements
* Validate the IP range for the control plane
* Validation to detect if undercloud disks use 512e
* Validation to verify connectivity to overcloud
* Validate haproxy configuration values
* Add the NoopFirewallDriver validation
* Add a validation-specific Ansible output callback
* Validate rogue DHCP servers
* Updated from global requirements
* Add network gateway validation
* Make the ini-based validations more robust
* modify the home-page info with the developer documentation
* Generate documentation for validations
* Remove \`become: true\` from the inventory script

5.1.0
-----

* Check to ensure debug is disabled on undercloud services
* Added check for ceilometerdb size
* Added check for keystone token\_flush cronjob
* Updated from global requirements
* Cleanup tox.ini, enable constraints
* Validate rabbitmq limits

5.0.0
-----

* Add a dynamic ansible inventory script
* Validate the open-files-limit value in mysql
* Validate pacemaker status
* Validate ntp is running and synchronised
* Validation to check ulimits on controller
* Validation to check the undercloud processes
* Validation to verify undercloud disk size reqs
* Autogenerate the list of existing validations
* Validation to verify the undercloud CPU reqs
* Validation to verify the undercloud RAM reqs
* Documentation how validations work
* Use tripleo bug tracker on launchpad
* Updated from global requirements
* Fix requirements
* Initial Cookiecutter Commit
* Added .gitreview
