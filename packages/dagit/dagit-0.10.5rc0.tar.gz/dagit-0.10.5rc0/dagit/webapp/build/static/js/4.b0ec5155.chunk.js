(this.webpackJsonpdagit=this.webpackJsonpdagit||[]).push([[4],{838:function(e,n,t){"use strict";t.r(n);var r=t(5),i=t(36),o=t.n(i),a=t(48),s=t(18),l=t(39),c=t(8),u=t(3),d=t(0),p=t(4),f=t(6),m=t(35),g=t(31),h=t(824),v=t.n(h),y=t(1),b=t(262),j=t(44),C=t(24),O=t(69),x=t(26),A=t(27),E=t(33),k=t(32),S=(t(825),t(820),t(826),t(828),t(829),t(822),t(830),t(831),t(832),t(823),t(821),t(833),t(835),t(819)),_=t.n(S),w="CodeMirror-lint-markers";function R(e){e.parentNode&&e.parentNode.removeChild(e)}function T(e,n,t){var r=function(e,n,t){var r=document.createElement("div"),i=t.getBoundingClientRect();return r.className="CodeMirror-lint-tooltip",r.appendChild(n.cloneNode(!0)),document.body.appendChild(r),i.top>r.clientHeight?(r.style.top=i.top-r.clientHeight-5+"px",r.style.left=i.left+5+"px"):(r.style.top=i.top+5+"px",r.style.left=i.right+10+"px"),null!=r.style.opacity&&(r.style.opacity=1),r}(0,n,t);function i(){var e;_.a.off(t,"mouseout",i),r&&((e=r).parentNode&&(null==e.style.opacity&&R(e),e.style.opacity=0,setTimeout((function(){R(e)}),600)),r=null)}var o=setInterval((function(){if(r)for(var e=t;;e=e.parentNode){if(e&&11===e.nodeType&&(e=e.host),e===document.body)return;if(!e){i();break}}if(!r)return clearInterval(o)}),400);_.a.on(t,"mouseout",i)}function N(e){var n=e.state.lint;n.hasGutter&&e.clearGutter(w);for(var t=0;t<n.marked.length;++t)n.marked[t].clear();n.marked.length=0}function I(e,n,t,r){var i=document.createElement("div"),o=i;return i.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+n,t&&((o=i.appendChild(document.createElement("div"))).className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),!1!==r&&_.a.on(o,"mouseover",(function(n){T(0,e,o)})),i}function P(e){var n=e.severity;n||(n="error");var t=document.createElement("div");return t.className="CodeMirror-lint-message CodeMirror-lint-message-"+n,"undefined"!=typeof e.messageHTML?t.innerHTML=e.messageHTML:t.appendChild(document.createTextNode(e.message)),t}function M(e,n){N(e);for(var t,r,i=e.state.lint,o=i.options,a=function(e){for(var n=[],t=0;t<e.length;++t){var r=e[t],i=r.from.line;(n[i]||(n[i]=[])).push(r)}return n}(n),s=0;s<a.length;++s){var l=a[s];if(l){for(var c=null,u=i.hasGutter&&document.createDocumentFragment(),d=0;d<l.length;++d){var p=l[d],f=p.severity;f||(f="error"),r=f,c="error"===(t=c)?t:r,o.formatAnnotation&&(p=o.formatAnnotation(p)),i.hasGutter&&u.appendChild(P(p)),p.to&&i.marked.push(e.markText(p.from,p.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+f,__annotation:p}))}i.hasGutter&&e.setGutterMarker(s,w,I(u,c,l.length>1,i.options.tooltips))}}o.onUpdateLinting&&o.onUpdateLinting(n,a,e)}function F(e){var n=e.state.lint.options,t=n.options||n,r=n.getAnnotations||e.getHelper(_.a.Pos(0,0),"lint");if(r)if(n.async||r.async)!function(e,n,t){var r=e.state.lint,i=++r.waitingFor;function o(){i=-1,e.off("change",o)}e.on("change",o),n(e.getValue(),(function(n,t){e.off("change",o),r.waitingFor===i&&(t&&n instanceof _.a&&(n=t),e.operation((function(){M(e,n)})))}),t,e)}(e,r,t);else{var i=r(e.getValue(),t,e);if(!i)return;i.then?i.then((function(n){e.operation((function(){M(e,n)}))})):e.operation((function(){M(e,i)}))}}function L(e){var n=e.state.lint;n&&(clearTimeout(n.timeout),n.timeout=setTimeout((function(){F(e)}),n.options.delay||500))}function D(e,n){for(var t=(n.target||n.srcElement).getBoundingClientRect(),r=(t.left+t.right)/2,i=(t.top+t.bottom)/2,o=e.coordsChar({left:r,top:i},"client"),a=e.findMarksAt(o),s=e.getHelper(_.a.Pos(0,0),"dagster-docs")(e,o),l=[],c=0;c<a.length;++c){var u=a[c].__annotation;u&&l.push(u)}(s||l.length)&&function(e,n,t){var r=t.target||t.srcElement,i=document.createDocumentFragment();if(e){var o=document.createElement("div");o.textContent=e,i.appendChild(o),n.length&&(o.style.paddingBottom="4px",o.style.marginBottom="4px",o.style.borderBottom="1px solid rgba(0,0,0,0.25)")}for(var a=0;a<n.length;a++){var s=n[a];i.appendChild(P(s))}T(0,i,r)}(s,l,n)}function B(e,n,t){this.marked=[],this.options=n,this.timeout=null,this.hasGutter=t,this.onMouseOver=function(n){D(e,n)},this.waitingFor=0}_.a.defineOption("lint",!1,(function(e,n,t){if(t&&t!==_.a.Init&&(N(e),!1!==e.state.lint.options.lintOnChange&&e.off("change",L),_.a.off(e.getWrapperElement(),"mouseover",e.state.lint.onMouseOver),clearTimeout(e.state.lint.timeout),delete e.state.lint),n){for(var r=e.getOption("gutters"),i=!1,o=0;o<r.length;++o)r[o]===w&&(i=!0);var a=e.state.lint=new B(e,(s=n)instanceof Function?{getAnnotations:s}:(s&&!0!==s||(s={}),s),i);!1!==a.options.lintOnChange&&e.on("change",L),!1!==a.options.tooltips&&"gutter"!==a.options.tooltips&&_.a.on(e.getWrapperElement(),"mouseover",a.onMouseOver)}var s})),_.a.defineExtension("performLint",(function(){this.state.lint&&F(this)}));var K;t(836);function V(e,n,t){return e=function(e,n){if(0===e.length)return[];var t=e[e.length-1];return[].concat(Object(s.a)(e.slice(0,e.length-1)),[{key:t.key,indent:t.indent,childKeys:[].concat(Object(s.a)(t.childKeys),[n])}])}(e=function(e,n){for(;e.length>0&&e[e.length-1].indent>=n;)e=e.slice(0,e.length-1);return e}(e,t),n),e=[].concat(Object(s.a)(e),[{key:n,indent:t,childKeys:[]}])}!function(e){e.Dict="dict",e.List="list"}(K||(K={}));var Y={KEYWORD:new RegExp("\\b(("+["true","false","on","off","yes","no"].join(")|(")+"))$","i"),DICT_COLON:/^:\s*/,DICT_KEY:/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^# ,]*?(?=\s*:)/,QUOTED_STRING:/^('([^']|\\.)*'?|"([^"\\]|\\.)*"?)/,BLOCKSTART_PIPE_OR_ARROW:/^\s*(\||\>)\s*/,NUMBER:/^\s*-?[0-9\.]+(?![0-9\.]+)$/,VARIABLE:/^\s*(\&|\*)[a-z0-9\._-]+$/i};function G(e,n,t){var r=(n=n.filter((function(e){var n=e.indent;return t>n})))[n.length-1];if(e){var i=e.allConfigTypes.find((function(n){return n.key===e.rootConfigType.key}));if(!i||"CompositeConfigType"!==i.__typename)return null;var o=i.fields,a=i,s=!1;if(o&&n.length>0){var c,u=Object(l.a)(n);try{var d=function(){var n=c.value,t=o.find((function(e){var t=e.name;return n.key===t}));if(!t)return{v:null};var l=e.allConfigTypes.find((function(e){return e.key===t.configTypeKey})),u=l.key,d=!0;if((s="ArrayConfigType"===l.__typename)&&(u=l.typeParamKeys[0],d=!1),!(i=e.allConfigTypes.find((function(e){return e.key===u}))))return{v:null};if("ScalarUnionConfigType"===i.__typename){o=[];var p=i.nonScalarTypeKey,f=e.allConfigTypes.find((function(e){return e.key===p}));f&&"CompositeConfigType"===f.__typename&&(o=f.fields)}else"CompositeConfigType"===i.__typename?(a=i,o=i.fields,n===r&&d&&(o=o.filter((function(e){return-1===r.childKeys.indexOf(e.name)})))):o=[]};for(u.s();!(c=u.n()).done;){var p=d();if("object"===typeof p)return p.v}}catch(f){u.e(f)}finally{u.f()}}return{type:i,closestCompositeType:a,availableFields:o,inArray:s}}}function H(e){var n,t,r=e.options.hintOptions.schema,i=e.getCursor(),o=e.getTokenAt(i),a=e.getTokenAt({line:i.line,ch:o.start});return"whitespace"===o.type||o.string.startsWith(":")?(n="",t=o.end):(n=o.string,t=o.start),{start:t,cursor:i,searchString:n,token:o,prevToken:a,context:G(r,o.state.parents,t)}}function W(e,n,t){var r="RUNTIME_TYPE_MISMATCH"===e.reason?"value":"key",i=U(n,e.path,r);return null===i?null:{message:e.message,severity:"error",type:"syntax",from:t.posFromIndex(i?i.start:0),to:t.posFromIndex(i?i.end:Number.MAX_SAFE_INTEGER)}}function U(e,n,t){var r=function(e,n){for(var t=e.contents,r=function(e){var r=n[e];if(t&&t.type&&"PAIR"===t.type&&(t=t.value),t&&t.type&&("SEQ"===t.type||"FLOW_SEQ"===t.type)){var i=Number.parseInt(r);if(Number.isNaN(i))return{v:null};t=t.items[i]}else{if(!t||!t.type||"FLOW_MAP"!==t.type&&"MAP"!==t.type)return{v:null};var o=t.items.find((function(e){return e.key.value===r}));if(!o||!o.type||"PAIR"!==o.type)return{v:null};t=o}},i=0;i<n.length;i++){var o=r(i);if("object"===typeof o)return o.v}return t}(e,n);return r&&"type"in r?("PAIR"===r.type&&(r="value"===t&&r.value?r.value:r.key),r&&r.range?{start:r.range[0],end:r.range[1]}:null):null}S.defineMode("yaml",(function(){return{lineComment:"#",fold:"indent",startState:function(){return{trailingSpace:!1,escaped:!1,inValue:!1,inBlockLiteral:!1,inBlockLiteralIndentation:0,inlineContainers:[],parents:[]}},token:function(e,n){var t=e.peek(),r=n.escaped,i=n.trailingSpace;if(n.escaped=!1,n.trailingSpace=!1,e.eatSpace())return n.trailingSpace=!0,"whitespace";if("\\"===t)return n.escaped=!0,e.next(),null;if("#"===t&&(e.sol()||i))return e.skipToEnd(),"comment";if(n.inBlockLiteral){if(e.indentation()>n.inBlockLiteralIndentation)return e.skipToEnd(),"string";n.inBlockLiteralIndentation=0,n.inBlockLiteral=!1}if(e.match(/-/))return n.inValue=!0,"meta";if(e.sol()&&(n.inValue=!1,n.parents=[],e.match(/---/)||e.match(/\.\.\./)))return"def";if(e.match(/^(\{|\}|\[|\])/))return"{"===t?(n.inlineContainers=[].concat(Object(s.a)(n.inlineContainers),[K.Dict]),n.inValue=!1):"}"===t?(n.inlineContainers=n.inlineContainers.slice(0,n.inlineContainers.length-1),n.parents=n.parents.slice(0,n.parents.length-1),n.inValue=n.inlineContainers.length>0):"["===t?(n.inlineContainers=[].concat(Object(s.a)(n.inlineContainers),[K.List]),n.inValue=!0):"]"===t&&(n.inlineContainers=n.inlineContainers.slice(0,n.inlineContainers.length-1),n.inValue=n.inlineContainers.length>0),n.trailingSpace=!1,"meta";if(n.inlineContainers&&!r&&","===t)return n.inlineContainers[n.inlineContainers.length-1]===K.Dict&&(n.parents=n.parents.slice(0,n.parents.length-1),n.inValue=!1),e.next(),"meta";if(e.match(Y.DICT_COLON))return n.inValue=!e.eol(),"meta";if(!n.inValue){var o=e.match(Y.DICT_KEY);if(o){var a=o[0],l=e.pos-a.length;return n.parents=V(n.parents,a,l),"atom"}}if(n.inValue){var c=null,u=!e.string.match(/[^\s]:[^\s]/)&&e.match(Y.DICT_KEY);if(u){var d=u[0],p=e.pos-d.length;n.inValue=!1,n.parents=V(n.parents,d,p),c="atom"}if(e.match(Y.BLOCKSTART_PIPE_OR_ARROW)&&(n.inBlockLiteralIndentation=e.indentation(),n.inBlockLiteral=!0,c="meta"),!c){var f=e.match(Y.QUOTED_STRING);if(!f){var m=n.inlineContainers[n.inlineContainers.length-1];f=m===K.List?e.match(/^[^,\]]+/):m===K.Dict?e.match(/^[^,\}]+/):e.match(/^.+$/)}var g=f?f[0]:"";c=g.match(Y.VARIABLE)?"variable-2":g.match(Y.NUMBER)?"number":g.match(Y.KEYWORD)?"keyword":"string"}return e.eol()&&!n.inBlockLiteral&&(n.inValue=!1),c}return e.skipToEnd(),null}}})),S.registerHelper("hint","yaml",(function(e,n){if(!n.schema)return{list:[]};var t=H(e),r=t.cursor,i=t.context,o=t.token,a=t.start,l=t.searchString,c=t.prevToken;if(!i)return{list:[]};var u=function(e,t,r,i,o){var a="".concat(e.name),s=t,l=" "===i.string||"-"===i.string;if(o&&!l&&(a="- ".concat(a),s+=2),r.string.startsWith(":")){var c=i.start+2;a="\n".concat(" ".repeat(c)).concat(a),s=c}return a+=function(e){if(!n.schema)return!1;var t=n.schema.allConfigTypes.find((function(n){return n.key===e}));return!!t&&("ArrayConfigType"===t.__typename||"CompositeConfigType"===t.__typename)}(e.configTypeKey)?":\n".concat(" ".repeat(s+2)):": "},d=function(e,n,t){return{text:n,render:function(n){var r=document.createElement("div");if(r.textContent=e,t){var i=document.createElement("div");i.innerText=t.length<90?t:t.substr(0,87)+"...",i.style.opacity="0.5",i.style.overflow="hidden",i.style.maxHeight="33px",i.style.maxWidth="360px",i.style.whiteSpace="normal",r.appendChild(i)}n.appendChild(r)},from:{line:r.line,ch:a},to:{line:r.line,ch:o.end}}},p="ScalarUnionConfigType"===i.type.__typename&&!c.end;if(i.availableFields.length&&("CompositeConfigType"===i.type.__typename||p))return{list:i.availableFields.filter((function(e){return e.name.startsWith(l)})).map((function(e){return d(e.name,u(e,a,o,c,i.inArray),e.description)}))};if("EnumConfigType"===i.type.__typename){var f=l.startsWith('"')?l.substr(1):l;return{list:i.type.values.filter((function(e){return e.value.startsWith(f)})).map((function(e){return d(e.value,'"'.concat(e.value,'"'),null)}))}}if("RegularConfigType"===i.type.__typename&&"Bool"===i.type.givenName)return{list:["True","False"].filter((function(e){return e.startsWith(l)})).map((function(e){return d(e,e,null)}))};var m=i.type;if("ScalarUnionConfigType"===m.__typename){var g=n.schema.allConfigTypes.find((function(e){return e.key===m.scalarTypeKey})),h=n.schema.allConfigTypes.find((function(e){return e.key===m.nonScalarTypeKey})),v=[];g&&"RegularConfigType"===g.__typename&&"Bool"===g.givenName&&(v=["True","False"].filter((function(e){return e.startsWith(l)})).map((function(e){return d(e,e,null)})));var y=[];return h&&"CompositeConfigType"===h.__typename&&(y=h.fields.filter((function(e){return e.name.startsWith(l)})).map((function(e){return d(e.name,u(e,a,o,c,!1),e.description)}))),{list:[].concat(Object(s.a)(v),Object(s.a)(y))}}return{list:[]}})),S.registerHelper("dagster-docs","yaml",(function(e,n){var t=e.getTokenAt(n),r=e.options.hintOptions.schema;if("atom"!==t.type)return null;var i=G(r,t.state.parents,t.start),o=i&&"CompositeConfigType"===i.type.__typename&&i.type.fields.find((function(e){return e.name===t.string}));return o&&o.description?o.description:null})),S.registerHelper("lint","yaml",function(){var e=Object(a.a)(o.a.mark((function e(n,t,r){var i,a,s,l,c,u,d,p,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.checkConfig,a=r.getDoc(),s=b.parseDocument(n),l=[],c=s.errors.length>10,s.errors.slice(0,10).forEach((function(e){var n,t,r=a.posFromIndex((null===(n=e.source)||void 0===n?void 0:n.range)?e.source.range.start:0),i=a.posFromIndex((null===(t=e.source)||void 0===t?void 0:t.range)?e.source.range.end:Number.MAX_SAFE_INTEGER);(!u||u.line<r.line)&&(u=r),l.push({message:e.message,severity:"error",type:"syntax",from:r,to:i})})),c&&u&&(d={line:u.line+1,ch:0},l.push({message:"".concat(s.errors.length-l.length," more errors - bailed out."),severity:"warning",type:"syntax",from:d,to:d})),0!==s.errors.length){e.next=13;break}return p=s.toJSON()||{},e.next=11,i(p);case 11:(f=e.sent).isValid||f.errors.forEach((function(e){var n=W(e,s,a);n&&l.push(n)}));case 13:return e.abrupt("return",l);case 14:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}());var Q=t(837),z=t(25),q=t(34);function X(){var e=Object(r.a)(["\n.cm-whitespace {\n  /*\n    Note: background is a 16x16px PNG containing a semi-transparent gray dot. 8.4px\n    is the exact width of a character in Codemirror's monospace font. It's consistent\n    in Firefox and Chrome and doesn't change on zoom in / out, but may need to be\n    modified if we change the Codemirror font.\n  */\n  background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAAAm0lEQVQ4Ee2RMQ7DIAxFMVIvBEvm7FXXniIXak4RhnTujMSBkKDfCgPCzg2whAzf9hN8jJlBmgUxxgf0DWvFykR0Ouc+yGXsFwAeRuOv1rr0zdACIC/k2uu2P7T9Ng6zDu2ZUnqP/RqAr61GKUXUNEBWpy9R1AQAbzzvAFpNAJrbQYHs3nuhi1/gQRhGbFh7c7bWfgE+FOiU4MAfhpIwd0LjE+wAAAAASUVORK5CYII=') center left / 8.4px 8.4px repeat-x;\n}\n.cm-whitespace.CodeMirror-lint-mark-error {\n  background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAAAm0lEQVQ4Ee2RMQ7DIAxFMVIvBEvm7FXXniIXak4RhnTujMSBkKDfCgPCzg2whAzf9hN8jJlBmgUxxgf0DWvFykR0Ouc+yGXsFwAeRuOv1rr0zdACIC/k2uu2P7T9Ng6zDu2ZUnqP/RqAr61GKUXUNEBWpy9R1AQAbzzvAFpNAJrbQYHs3nuhi1/gQRhGbFh7c7bWfgE+FOiU4MAfhpIwd0LjE+wAAAAASUVORK5CYII=') center left / 8.4px 8.4px repeat-x;\n}\n"]);return X=function(){return e},e}function $(){var e=Object(r.a)(["\n  .react-codemirror2 {\n    height: 100%;\n    flex: 1;\n    position: relative;\n  }\n  .react-codemirror2 .CodeMirror {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    height: initial;\n    font-family: ",";\n\n    /* Note: Theme overrides */\n    &.cm-s-default .cm-comment {\n      color: #999;\n    }\n  }\n\n  .CodeMirror-hint,\n  .CodeMirror-lint-marker-error,\n  .CodeMirror-lint-marker-warning,\n  .CodeMirror-lint-message-error,\n  .CodeMirror-lint-message-warning {\n    font-family: ",";\n  }\n"]);return $=function(){return e},e}var J=/^[a-zA-Z0-9_@(]$/,Z=Object(z.g)((function(e){e.performLint()}),1e3),ee=Object(p.a)($(),q.a.monospace,q.a.monospace),ne=Object(p.a)(X()),te=function(e){Object(E.a)(t,e);var n=Object(k.a)(t);function t(){var e;Object(x.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i)))._editor=void 0,e.moveCursor=function(n,t){var r;if(e._editor){e._editor.setCursor(n,t,{scroll:!1});var i=e._editor.getScrollInfo().clientHeight,o=e._editor.cursorCoords(!0,"local"),a=o.left,s=o.top;null===(r=e._editor)||void 0===r||r.scrollIntoView({left:a,right:a,top:s-20,bottom:s+(i-20)}),e._editor.focus()}},e.moveCursorToPath=function(n){if(e._editor){var t=e._editor.getDoc(),r=U(b.parseDocument(e.props.configCode),n,"key");if(r){var i=t.posFromIndex(r?r.start:0);e.moveCursor(i.line,i.ch)}}},e}return Object(A.a)(t,[{key:"componentDidUpdate",value:function(e){this._editor&&e.runConfigSchema!==this.props.runConfigSchema&&this.performInitialPass()}},{key:"shouldComponentUpdate",value:function(e){return e.configCode!==this.props.configCode||e.readOnly!==this.props.readOnly||e.runConfigSchema!==this.props.runConfigSchema||e.showWhitespace!==this.props.showWhitespace}},{key:"performInitialPass",value:function(){Z(this._editor);var e=H(this._editor).context;this.props.onHelpContextChange(e?{type:e.closestCompositeType}:null)}},{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{style:{flex:1,position:"relative"},children:[Object(d.jsx)(ee,{}),this.props.showWhitespace?Object(d.jsx)(ne,{}):null,Object(d.jsx)(Q.Controlled,{value:this.props.configCode,options:{mode:"yaml",theme:"default",lineNumbers:!0,readOnly:this.props.readOnly,indentUnit:2,smartIndent:!0,showCursorWhenSelecting:!0,lintOnChange:!1,lint:{checkConfig:this.props.checkConfig,lintOnChange:!1,onUpdateLinting:!1},hintOptions:{completeSingle:!1,closeOnUnfocus:!1,schema:this.props.runConfigSchema},keyMap:"sublime",extraKeys:{"Cmd-Space":function(e){return e.showHint({completeSingle:!0})},"Ctrl-A":function(e){e.execCommand("goLineStartSmart")},"Ctrl-E":function(e){return e.execCommand("goLineEnd")},"Ctrl-Space":function(e){return e.showHint({completeSingle:!0})},"Alt-Space":function(e){return e.showHint({completeSingle:!0})},"Shift-Tab":function(e){return e.execCommand("indentLess")},Tab:function(e){return e.execCommand("indentMore")},"Cmd-F":"findPersistent","Ctrl-F":"findPersistent","Cmd-Z":function(e){return e.undo()},"Cmd-Y":function(e){return e.redo()}},gutters:["CodeMirror-foldgutter","CodeMirror-lint-markers","CodeMirror-linenumbers"],foldGutter:!0},editorDidMount:function(n){e._editor=n,e.performInitialPass()},onBeforeChange:function(n,t,r){e.props.onConfigChange(r)},onCursorActivity:function(n){if(n.getSelection().length)e.props.onHelpContextChange(null);else{var t=H(n).context;e.props.onHelpContextChange(t?{type:t.closestCompositeType}:null)}},onChange:function(e){Z(e)},onBlur:function(e){Z(e)},onKeyUp:function(e,n){J.test(n.key)&&e.execCommand("autocomplete")}})]})}}]),t}(y.Component),re=t(264),ie=function(e,n){return(e&&e.type.key)===(n&&n.type.key)},oe=t(249),ae=t(103),se=y.memo((function(e){var n=e.context,t=e.allInnerTypes;return n?Object(d.jsxs)(ue,{children:[Object(d.jsx)(ce,{children:Object(d.jsx)(ae.b,{type:n.type,typesInScope:t,maxDepth:2})}),Object(d.jsx)(le,{children:"Ctrl+Space to show auto-completions inline."})]}):Object(d.jsx)(ue,{})}),(function(e,n){return ie(e.context,n.context)})),le=p.c.div.withConfig({displayName:"ConfigEditorHelp__AutocompletionsNote",componentId:"sc-14hn9v1-0"})(["font-size:0.75rem;text-align:center;padding:4px;border-top:1px solid ",";background:rgba(238,238,238,0.9);color:rgba(0,0,0,0.7);"],m.a.LIGHT_GRAY1),ce=p.c.div.withConfig({displayName:"ConfigEditorHelp__ConfigScrollWrap",componentId:"sc-14hn9v1-1"})(["padding:8px;color:black;flex:1;pointer-events:initial;max-height:100%;overflow-y:auto;"]),ue=p.c.div.withConfig({displayName:"ConfigEditorHelp__Container",componentId:"sc-14hn9v1-2"})(["position:relative;display:flex;flex-direction:column;background-color:#e1e8edd1;height:100%;"]),de=t(95),pe=t(23),fe=t(811),me=fe.a.ofType(),ge=function(e){var n=e.modeName?e.modes.find((function(n){return n.name===e.modeName})):e.modes[0];y.useEffect((function(){var t;n&&n.name!==e.modeName&&(null===(t=e.onModeChange)||void 0===t||t.call(e,n.name))}),[n,e.modeName]);var t=1===e.modes.length,r=!e.modeError,i=t&&r;return Object(d.jsx)(me,{activeItem:n,filterable:!0,disabled:t&&r,items:e.modes,itemPredicate:function(e,n){return 0===e.length||n.name.includes(e)},itemRenderer:function(e,n){return Object(d.jsx)(g.m.Item,{active:n.modifiers.active,text:e.name,onClick:n.handleClick},e.name)},onItemSelect:function(n){var t;null===(t=e.onModeChange)||void 0===t||t.call(e,n.name)},children:Object(d.jsx)(g.b,{icon:r?void 0:pe.a.ERROR,intent:r?de.a.NONE:de.a.DANGER,title:i?"To add a mode, add a ModeDefinition to the pipeline.":"Current execution mode",text:r?n?"Mode: ".concat(n.name):"Select Mode":"Invalid Mode Selection",disabled:i,rightIcon:"caret-down","data-test-id":"mode-picker-button"})})},he=t(193),ve=t(40),ye=function(e){var n=Object(f.useMutation)(ve.b),t=Object(c.a)(n,1)[0],r=function(){var n=Object(a.a)(o.a.mark((function n(){var r,i;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=(r=e.getVariables())){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,t({variables:r});case 6:i=n.sent,Object(ve.k)(e.pipelineName,i),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),console.error("Error launching run:",n.t0);case 13:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(){return n.apply(this,arguments)}}();return Object(d.jsx)("div",{style:{marginRight:20},children:Object(d.jsx)(he.a,{runCount:1,config:{icon:"send-to",onClick:r,title:"Launch Execution",disabled:e.disabled}})})},be=t(250),je=t(324),Ce=t(68),Oe=t(59),xe=t(145),Ae=t(50),Ee=t(77);function ke(){var e=Object(r.a)(["\n  fragment RunPreviewValidationFragment on PipelineConfigValidationResult {\n    __typename\n    ... on PipelineConfigValidationInvalid {\n      errors {\n        __typename\n        reason\n        message\n        stack {\n          entries {\n            __typename\n            ... on EvaluationStackPathEntry {\n              fieldName\n            }\n            ... on EvaluationStackListItemEntry {\n              listIndex\n            }\n          }\n        }\n        ... on MissingFieldConfigError {\n          field {\n            name\n          }\n        }\n        ... on MissingFieldsConfigError {\n          fields {\n            name\n          }\n        }\n        ... on FieldNotDefinedConfigError {\n          fieldName\n        }\n        ... on FieldsNotDefinedConfigError {\n          fieldNames\n        }\n      }\n    }\n    ... on PipelineNotFoundError {\n      message\n    }\n    ... on InvalidSubsetError {\n      message\n    }\n    ...PythonErrorFragment\n  }\n\n  ","\n"]);return ke=function(){return e},e}function Se(e){return!(!e||"object"!==typeof e||!("__typename"in e))}var _e={invalid:{title:"You need to fix this configuration section.",intent:de.a.DANGER},missing:{title:"You need to add this configuration section.",intent:de.a.DANGER},present:{title:"This section is present and valid.",intent:de.a.SUCCESS},none:{title:"This section is empty and valid.",intent:de.a.PRIMARY}},we=function(e){var n,t=e.onRemoveExtraPaths,r=e.extraNodes,i=Object(xe.b)(),s={},u=[],p=Object(l.a)(r);try{for(p.s();!(n=p.n()).done;){var f=n.value,m=f.split(".");if(2===m.length){var h=Object(c.a)(m,2),v=h[0],y=h[1];s[v]||(s[v]=[]),s[v].push(y)}else u.push(f)}}catch(b){p.e(b)}finally{p.f()}return Object(d.jsx)("div",{style:{marginTop:5},children:Object(d.jsx)(g.b,{small:!0,onClick:Object(a.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({title:"Remove extra config",description:Object(d.jsxs)("div",{children:[Object(d.jsxs)("p",{children:["You have provided extra configuration in your run config which does not conform to your pipeline","'","s config schema."]}),Object.entries(s).length>0&&Object.entries(s).map((function(e){var n=Object(c.a)(e,2),t=n[0],r=n[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("p",{children:["Extra ",t,":"]}),Object(d.jsx)("ul",{children:r.map((function(e){return Object(d.jsx)("li",{children:Object(d.jsx)(g.e,{children:e})},e)}))})]})})),u.length>0&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{children:"Other extra paths:"}),Object(d.jsx)("ul",{children:u.map((function(e){return Object(d.jsx)("li",{children:Object(d.jsx)(g.e,{children:e})},e)}))})]}),Object(d.jsx)("p",{children:"Clicking confirm will automatically remove this extra configuration from your run config."})," "]})});case 2:t(r);case 3:case"end":return e.stop()}}),e)}))),children:"Remove Extra Config"})})},Re=function(e){var n=e.onScaffoldMissingConfig,t=e.missingNodes,r=Object(xe.b)(),i=Object(d.jsxs)("div",{children:[t.length>0&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{children:"Missing paths:"}),Object(d.jsx)("ul",{children:t.map((function(e){return Object(d.jsx)("li",{children:Object(d.jsx)(g.e,{children:e})},e)}))})]}),Object(d.jsx)("p",{children:"Clicking confirm will automatically scaffold this missing configuration into your run config with default values. You will need to change the values appropriately."})]}),s=function(){var e=Object(a.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r({title:"Scaffold extra config",description:i});case 2:n();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsx)("div",{style:{marginTop:5},children:Object(d.jsx)(g.b,{small:!0,onClick:s,children:"Scaffold Missing Config"})})},Te=function(e){Object(E.a)(t,e);var n=Object(k.a)(t);function t(){var e;Object(x.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).state={errorsOnly:!1},e.getRootCompositeChildren=function(){if(!e.props.runConfigSchema)return{};var n=e.props.runConfigSchema,t=n.allConfigTypes,r=n.rootConfigType,i={},o=t.find((function(e){return e.key===r.key}));return"CompositeConfigType"!==(null===o||void 0===o?void 0:o.__typename)||o.fields.forEach((function(e){var n=t.find((function(n){return n.key===e.configTypeKey}));"CompositeConfigType"===(null===n||void 0===n?void 0:n.__typename)&&(i[e.name]=n)})),i},e}return Object(A.a)(t,[{key:"shouldComponentUpdate",value:function(e,n){return e.validation!==this.props.validation||e.runConfigSchema!==this.props.runConfigSchema||n.errorsOnly!==this.state.errorsOnly}},{key:"render",value:function(){var e=this,n=this.props,t=n.actions,r=n.document,i=n.validation,o=n.onHighlightPath,a=n.onRemoveExtraPaths,c=n.onScaffoldMissingConfig,u=n.solidSelection,p=this.state.errorsOnly,f=[],m=[],h=[];if(i&&"PipelineConfigValidationInvalid"===i.__typename&&i.errors.forEach((function(e){var n=Object(re.c)(e.stack.entries);if(h.push({pathKey:n.join("."),error:e}),"MissingFieldConfigError"===e.__typename)m.push([].concat(Object(s.a)(n),[e.field.name]).join("."));else if("MissingFieldsConfigError"===e.__typename){var t,r=Object(l.a)(e.fields);try{for(r.s();!(t=r.n()).done;){var i=t.value;m.push([].concat(Object(s.a)(n),[i.name]).join("."))}}catch(u){r.e(u)}finally{r.f()}}else if("FieldNotDefinedConfigError"===e.__typename)f.push([].concat(Object(s.a)(n),[e.fieldName]).join("."));else if("FieldsNotDefinedConfigError"===e.__typename){var o,a=Object(l.a)(e.fieldNames);try{for(a.s();!(o=a.n()).done;){var c=o.value;f.push([].concat(Object(s.a)(n),[c]).join("."))}}catch(u){a.e(u)}finally{a.f()}}else"RuntimeMismatchConfigError"===e.__typename&&m.push(n.join("."))})),"InvalidSubsetError"===(null===i||void 0===i?void 0:i.__typename)&&h.push({pathKey:"",error:i.message}),"PythonError"===(null===i||void 0===i?void 0:i.__typename)){var v=Object(d.jsx)(C.b,{error:i});h.push({pathKey:"",error:Object(d.jsxs)(d.Fragment,{children:["PythonError ",Object(d.jsx)("span",{onClick:function(){return Object(j.b)({body:v})},children:"click for details"})]})})}var y=this.getRootCompositeChildren(),b=y.resources,O=y.solids,x=Object(Ce.a)(y,["resources","solids"]),A=function(e,n){var t=n.map((function(n){if((null===u||void 0===u?void 0:u.length)&&!(null===u||void 0===u?void 0:u.includes(n.name)))return null;var t=[].concat(Object(s.a)(e),[n.name]),i=t.join("."),a=h.filter((function(e){return e.pathKey===i||e.pathKey.startsWith("".concat(i,"."))})).map((function(e){return e.error})),l=Ue(t,r),c=m.some((function(e){return e.includes(t.join("."))})),f=a.length||c,v=t.some((function(e,n){return m.includes(t.slice(0,n+1).join("."))}));if(p&&!f)return!1;var y=v&&n.isRequired?"missing":f?"invalid":l?"present":"none";return Object(d.jsx)(g.E,{position:Oe.a.BOTTOM,content:_e[y].title,intent:_e[y].intent,children:Object(d.jsx)(Ve,{state:y,onClick:function(){var e=a.find(Se);o(e?Object(re.c)(e.stack.entries):t)},children:n.name},n.name)},n.name)})).filter(Boolean);return t.length?t:Object(d.jsx)(Fe,{children:"Nothing to display."})};return Object(d.jsx)(Ee.c,{identifier:"run-preview",axis:"horizontal",first:Object(d.jsxs)(Ye,{children:[Object(d.jsxs)(Pe,{children:[Object(d.jsx)(Ie,{children:"Errors"}),h.map((function(e,n){return Object(d.jsx)(We,{error:e.error,onHighlight:o},n)}))]}),(f.length>0||m.length>0)&&Object(d.jsxs)(Pe,{children:[Object(d.jsx)(Ie,{children:"Bulk Actions:"}),f.length?Object(d.jsx)(we,{onRemoveExtraPaths:a,extraNodes:f}):null,m.length?Object(d.jsx)(Re,{onScaffoldMissingConfig:c,missingNodes:m}):null]})]}),firstInitialPercent:50,firstMinSize:150,second:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{style:{overflowY:"scroll",width:"100%",height:"100%"},children:[Object(d.jsxs)(He,{children:[Object(d.jsxs)(Pe,{children:[Object(d.jsx)(Ie,{children:"Runtime"}),Object(d.jsx)(Me,{children:A([],Object.keys(x).map((function(e){return{name:e,isRequired:!1}})))})]}),((null===b||void 0===b?void 0:b.fields.length)||0)>0&&Object(d.jsxs)(Pe,{children:[Object(d.jsx)(Ie,{children:"Resources"}),Object(d.jsx)(Me,{children:A(["resources"],(null===b||void 0===b?void 0:b.fields)||[])})]})]}),Object(d.jsxs)(Pe,{children:[Object(d.jsx)(Ie,{children:"Solids"}),Object(d.jsx)(Me,{children:A(["solids"],(null===O||void 0===O?void 0:O.fields)||[])})]}),Object(d.jsx)("div",{style:{height:50}})]}),Object(d.jsx)("div",{style:{position:"absolute",top:0,right:0,padding:"12px 15px 0px 10px",background:"rgba(255,255,255,0.7)"},children:Object(d.jsx)(g.d,{label:"Errors Only",checked:p,onChange:function(){return e.setState({errorsOnly:!p})}})}),Object(d.jsx)("div",{style:{position:"absolute",bottom:14,right:14},children:t})]})})}}]),t}(y.Component),Ne=Object(f.gql)(ke(),C.a),Ie=p.c.div.withConfig({displayName:"RunPreview__SectionTitle",componentId:"sc-5v37v5-0"})(["color:",";text-transform:uppercase;font-size:12px;"],m.a.GRAY3),Pe=p.c.div.withConfig({displayName:"RunPreview__Section",componentId:"sc-5v37v5-1"})(["margin-top:14px;margin-left:10px;"]),Me=p.c.div.withConfig({displayName:"RunPreview__ItemSet",componentId:"sc-5v37v5-2"})(["display:flex;flex-direction:row;flex-wrap:wrap;"]),Fe=p.c.div.withConfig({displayName:"RunPreview__ItemsEmptyNotice",componentId:"sc-5v37v5-3"})(["font-size:13px;padding-top:7px;padding-bottom:7px;"]),Le={invalid:"1px solid #CE1126",missing:"1px solid #CE1126",present:"1px solid #AFCCE1",none:"1px solid ".concat(m.a.LIGHT_GRAY2)},De={invalid:m.a.RED5,missing:m.a.RED5,present:"#C8E1F4",none:m.a.LIGHT_GRAY4},Be={invalid:"#E15858",missing:"#E15858",present:"#AFCCE1",none:m.a.LIGHT_GRAY4},Ke={invalid:m.a.WHITE,missing:m.a.WHITE,present:m.a.BLACK,none:m.a.BLACK},Ve=p.c.div.withConfig({displayName:"RunPreview__Item",componentId:"sc-5v37v5-4"})(["white-space:nowrap;font-size:13px;color:",";background:",";border-radius:3px;border:",";padding:3px 5px;margin:3px;transition:background 150ms linear,color 150ms linear;cursor:",";overflow:hidden;text-overflow:ellipsis;&:hover{transition:none;background:",";}"],(function(e){var n=e.state;return Ke[n]}),(function(e){var n=e.state;return De[n]}),(function(e){var n=e.state;return Le[n]}),(function(e){return"present"===e.state?"default":"not-allowed"}),(function(e){var n=e.state;return Be[n]})),Ye=p.c.div.withConfig({displayName:"RunPreview__ErrorListContainer",componentId:"sc-5v37v5-5"})(["margin-left:10px;overflow-y:scroll;height:100%;"]),Ge=p.c.div.withConfig({displayName:"RunPreview__ErrorRowContainer",componentId:"sc-5v37v5-6"})(["text-align:left;font-size:13px;white-space:pre-wrap;word-break:break-word;display:flex;flex-direction:row;align-items:flex-start;border-bottom:1px solid #ccc;padding:7px 0;padding-right:7px;margin-bottom:8px;&:last-child{border-bottom:0;margin-bottom:15px;}",""],(function(e){return e.hoverable&&"&:hover {\n      background: ".concat(m.a.LIGHT_GRAY5,";\n    }\n  ")})),He=p.c.div.withConfig({displayName:"RunPreview__RuntimeAndResourcesSection",componentId:"sc-5v37v5-7"})(["display:flex;@media (max-width:800px){flex-direction:column;}"]),We=function(e){var n=e.error,t=e.onHighlight,r=n,i=null;Se(n)&&(r=n.message,i=n);var o=r;return"string"===typeof r&&r.length>400&&(o=function(e){var n=e.indexOf("{");-1===n&&(n=e.indexOf(". "));-1===n&&(n=400);return e.substr(0,n)+"... "}(r)),Object(d.jsxs)(Ge,{hoverable:!!i,onClick:function(){return i&&t(Object(re.c)(i.stack.entries))},children:[Object(d.jsx)("div",{style:{paddingRight:8},children:Object(d.jsx)(g.k,{icon:"error",iconSize:14,color:m.a.RED4})}),Object(d.jsxs)("div",{children:[o,o!==r&&Object(d.jsxs)(d.Fragment,{children:["\xa0",Object(d.jsx)(Ae.a,{onClick:function(){return Object(j.b)({body:Object(d.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:r})})},children:"View all"})]})]})]})};function Ue(e,n){if(!n||"object"!==typeof n)return!1;if(0===e.length)return!0;var t=Object(je.a)(e),r=t[0];return Ue(t.slice(1),n[r])}var Qe=t(194),ze=t(87),qe=t(130),Xe=t(134),$e=t(131),Je=t(116),Ze=t(45);function en(){var e=Object(r.a)(["\n  query SolidSelectorQuery($selector: PipelineSelector!) {\n    pipelineOrError(params: $selector) {\n      __typename\n      ... on Pipeline {\n        id\n        name\n        solids {\n          name\n          ...PipelineGraphSolidFragment\n        }\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on InvalidSubsetError {\n        message\n      }\n      ... on PythonError {\n        message\n      }\n    }\n  }\n  ","\n"]);return en=function(){return e},e}var nn=function(e){Object(E.a)(t,e);var n=Object(k.a)(t);function t(){var e;Object(x.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).graphRef=y.createRef(),e}return Object(A.a)(t,[{key:"render",value:function(){var e=this.props,n=e.pipelineOrError,t=e.queryResultSolids,r=e.errorMessage;return"Pipeline"!==n.__typename?Object(d.jsx)(on,{children:r&&Object(d.jsx)(an,{children:r})}):Object(d.jsxs)(on,{children:[r&&Object(d.jsx)(an,{children:r}),Object(d.jsx)(qe.b,{ref:this.graphRef,backgroundColor:m.a.WHITE,pipelineName:n.name,solids:t,layout:Object($e.b)(t),interactor:Xe.b.Interactors.None,focusSolids:[],highlightedSolids:[]})]})}}]),t}(y.PureComponent),tn=Object(f.gql)(en(),qe.a),rn=function(e){var n=e.serverProvidedSubsetError,t=e.query,r=e.onChange,i=e.pipelineName,o=e.repoAddress,a=y.useState(t||"*"),s=Object(c.a)(a,2),l=s[0],p=s[1],m=y.useState(!1),h=Object(c.a)(m,2),v=h[0],b=h[1],j=Object(u.a)(Object(u.a)({},Object(Ze.a)(o)),{},{pipelineName:i}),C=Object(f.useQuery)(tn,{variables:{selector:j},fetchPolicy:"cache-and-network"}),x=C.data,A=C.loading;y.useEffect((function(){p(t||"*")}),[t,v]);var E="Pipeline"===(null===x||void 0===x?void 0:x.pipelineOrError.__typename)?Object(ze.a)(x.pipelineOrError.solids,l).all:[],k="Pipeline"!==(null===x||void 0===x?void 0:x.pipelineOrError.__typename)&&(null===x||void 0===x?void 0:x.pipelineOrError.message)||null;k&&console.error("Could not load pipeline ".concat(e.pipelineName));var S=A||0!==E.length&&0!==l.length?n?n.message:k:"You must provide a valid solid query or * to execute the entire pipeline.";return Object(d.jsx)("div",{style:{position:"relative"},children:Object(d.jsxs)(g.s,{autoFocus:!1,isOpen:v,minimal:!0,modifiers:{arrow:{enabled:!1},offset:{enabled:!0,offset:"0, 8px"}},position:"bottom-left",children:[Object(d.jsx)(O.a,{shortcutLabel:"\u2325S",shortcutFilter:function(e){return 83===e.keyCode&&e.altKey},children:Object(d.jsx)(Je.a,{width:"*"!==l&&""!==l||v?350:90,intent:S?de.a.DANGER:de.a.NONE,items:"Pipeline"===(null===x||void 0===x?void 0:x.pipelineOrError.__typename)?null===x||void 0===x?void 0:x.pipelineOrError.solids:[],value:l,placeholder:"Type a Solid Subset",onChange:p,onBlur:function(e){!function(e){if("Pipeline"===(null===x||void 0===x?void 0:x.pipelineOrError.__typename)){""===e&&(e="*");var n=Object(ze.a)(x.pipelineOrError.solids,e).all;n.length===x.pipelineOrError.solids.length?r(null,e):r(n.map((function(e){return e.name})),e)}}(e),b(!1)},onFocus:function(){return b(!0)},onKeyDown:function(e){e.isDefaultPrevented()||"Enter"!==e.key&&"Return"!==e.key&&"Escape"!==e.key||e.currentTarget.blur()}})}),(null===x||void 0===x?void 0:x.pipelineOrError)&&Object(d.jsx)(nn,{pipelineOrError:null===x||void 0===x?void 0:x.pipelineOrError,errorMessage:S,queryResultSolids:E})]})})},on=p.c.div.withConfig({displayName:"SolidSelector__SolidSelectorModalContainer",componentId:"sc-4j0jje-0"})(["border-radius:4px;width:60vw;height:60vh;background:",";& > div{border-radius:4px;}"],m.a.WHITE),an=p.c.div.withConfig({displayName:"SolidSelector__ModalErrorOverlay",componentId:"sc-4j0jje-1"})(["position:absolute;margin:5px;padding:4px 8px;z-index:2;border-radius:2px;border:1px solid ",";background:",";color:white;"],m.a.RED3,m.a.RED5),sn=t(251),ln=function e(n,t){var r=t[n];switch(r.__typename){case"CompositeConfigType":if(r.isSelector)return"<selector>";var i,o={},a=Object(l.a)(r.fields);try{for(a.s();!(i=a.n()).done;){var s=i.value,c=s.name,u=s.isRequired,d=s.configTypeKey;u&&(o[c]=e(d,t))}}catch(p){a.e(p)}finally{a.f()}return o;case"ArrayConfigType":return[];case"NullableConfigType":return e(r.typeParamKeys[0],t);case"EnumConfigType":return r.values.map((function(e){return e.value})).join("|");case"ScalarUnionConfigType":return e(r.scalarTypeKey,t);case"RegularConfigType":return{String:"",Int:0,Bool:!0,Any:"AnyType"}[r.key];default:Object(z.c)(r)}},cn=function(e){var n=e.allConfigTypes,t=e.rootConfigType;console.log(n);var r=function(e){var n,t={},r=Object(l.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t[i.key]=i}}catch(o){r.e(o)}finally{r.f()}return t}(n);return ln(t.key,r)},un=t(61),dn=t(20),pn=t(12);function fn(){var e=Object(r.a)(["\n  query PreviewConfigQuery(\n    $pipeline: PipelineSelector!\n    $runConfigData: RunConfigData!\n    $mode: String!\n  ) {\n    isPipelineConfigValid(pipeline: $pipeline, runConfigData: $runConfigData, mode: $mode) {\n      ...ConfigEditorValidationFragment\n      ...RunPreviewValidationFragment\n    }\n  }\n  ","\n  ","\n"]);return fn=function(){return e},e}var mn="The YAML you provided couldn't be parsed. Please fix the syntax errors and try again.",gn=function(e,n){switch(n.type){case"preview-loading":return Object(u.a)(Object(u.a)({},e),{},{previewLoading:n.payload});case"set-preview":var t=n.payload,r=t.preview,i=t.previewedDocument,o=t.previewLoading;return Object(u.a)(Object(u.a)({},e),{},{preview:r,previewedDocument:i,previewLoading:o});case"toggle-tag-editor":return Object(u.a)(Object(u.a)({},e),{},{tagEditorOpen:n.payload});case"toggle-config-loading":return Object(u.a)(Object(u.a)({},e),{},{configLoading:n.payload});case"set-editor-help-context":return Object(u.a)(Object(u.a)({},e),{},{editorHelpContext:n.payload});case"toggle-whitepsace":return Object(u.a)(Object(u.a)({},e),{},{showWhitespace:n.payload});default:return e}},hn={preview:null,previewLoading:!1,previewedDocument:null,configLoading:!1,showWhitespace:!0,editorHelpContext:null,tagEditorOpen:!1},vn=(n.default=function(e){var n,t=e.currentSession,r=e.onCreateSession,i=e.onSaveSession,u=e.partitionSets,p=e.pipeline,h=e.pipelineSelector,x=e.repoAddress,A=e.runConfigSchemaOrError,E=Object(f.useApolloClient)(),k=y.useReducer(gn,hn),S=Object(c.a)(k,2),_=S[0],w=S[1],R=y.useRef(!1),T=y.useRef(null),N=y.useRef(null),I=y.useRef(0);y.useEffect((function(){return R.current=!0,function(){R.current=!1}}));var P="RunConfigSchema"===(null===A||void 0===A?void 0:A.__typename)?A:void 0,M="ModeNotFoundError"===(null===A||void 0===A?void 0:A.__typename)?A:void 0,F=function(){var e=Object(a.a)(o.a.mark((function e(n){var r,i,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I.current+=1,r=I.current,w({type:"preview-loading",payload:!0}),e.next=5,E.query({fetchPolicy:"no-cache",query:vn,variables:{runConfigData:n,pipeline:h,mode:t.mode||"default"}});case 5:return i=e.sent,a=i.data,R.current&&(s=r===I.current,w({type:"set-preview",payload:{preview:a,previewedDocument:n,previewLoading:!s&&_.previewLoading}})),e.abrupt("return",Object(re.d)(n,a.isPipelineConfigValid));case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),L=function(){var e=Object(a.a)(o.a.mark((function e(n){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[].concat(Object(s.a)((null===p||void 0===p?void 0:p.tags)||[]),Object(s.a)(n.tags)).reduce((function(e,n){return e[n.key]=n.value,e}),{}),i({base:{presetName:n.name},name:n.name,runConfigYaml:n.runConfigYaml||"",solidSelection:n.solidSelection,solidSelectionQuery:null===n.solidSelection?"*":n.solidSelection.join(","),mode:n.mode,tags:Object.entries(t).map((function(e){var n=Object(c.a)(e,2);return{key:n[0],value:n[1]}})),needsRefresh:!1});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),D=function(){var e=Object(a.a)(o.a.mark((function e(n,r,a){var l,c,u,f,m,g;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(),e.prev=1,l=t.base,e.next=5,E.query({query:oe.c,variables:{repositorySelector:n,partitionSetName:r,partitionName:a}});case 5:if(c=e.sent,(u=c.data)&&u.partitionSetOrError&&"PartitionSet"===u.partitionSetOrError.__typename){e.next=10;break}return Y(),e.abrupt("return");case 10:"PythonError"===(f=u.partitionSetOrError.partition).tagsOrError.__typename?(m=((null===p||void 0===p?void 0:p.tags)||[]).slice(),Object(j.b)({body:Object(d.jsx)(C.b,{error:f.tagsOrError})})):m=[].concat(Object(s.a)((null===p||void 0===p?void 0:p.tags)||[]),Object(s.a)(f.tagsOrError.results)),"PythonError"===f.runConfigOrError.__typename?(g="",Object(j.b)({body:Object(d.jsx)(C.b,{error:f.runConfigOrError})})):g=f.runConfigOrError.yaml,i({name:f.name,base:Object.assign({},l,{partitionName:f.name}),runConfigYaml:g,solidSelection:f.solidSelection,solidSelectionQuery:null===f.solidSelection?"*":f.solidSelection.join(","),mode:f.mode,tags:m,needsRefresh:!1}),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(1);case 18:Y();case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(n,t,r){return e.apply(this,arguments)}}(),B=function(){var e=Object(a.a)(o.a.mark((function e(){var n,r,i,a,s,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.base){e.next=3;break}return e.abrupt("return");case 3:if(!("presetName"in n)){e.next=8;break}return r=n.presetName,(i=p.presets.find((function(e){return e.name===r})))&&L(i),e.abrupt("return");case 8:if(a=n.partitionName,s=n.partitionsSetName,l=Object(Ze.a)(x),!a){e.next=15;break}return V(),e.next=14,D(l,s,a);case 14:Y();case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){return w({type:"toggle-tag-editor",payload:!0})},V=function(){return w({type:"toggle-config-loading",payload:!0})},Y=function(){return w({type:"toggle-config-loading",payload:!1})},G=_.preview,H=_.previewLoading,W=_.previewedDocument,U=_.configLoading,Q=_.editorHelpContext,z=_.showWhitespace,q=_.tagEditorOpen,X=t.tags||[];return Object(d.jsx)(Ee.c,{axis:"vertical",identifier:"execution",firstMinSize:100,firstInitialPercent:75,first:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(be.a,{isLoading:U,message:"Generating configuration..."}),Object(d.jsxs)(Qe.a,{children:[Object(d.jsx)(oe.d,{pipeline:p,partitionSets:u.results,base:t.base,solidSelection:t.solidSelection,onLoading:V,onLoaded:Y,onCreateSession:r,onSaveSession:i,onSelectPreset:L,onSelectPartition:D,repoAddress:x}),Object(d.jsx)(yn,{}),Object(d.jsx)(rn,{serverProvidedSubsetError:"InvalidSubsetError"===(null===G||void 0===G?void 0:G.isPipelineConfigValid.__typename)?G.isPipelineConfigValid:void 0,pipelineName:p.name,value:t.solidSelection||null,query:t.solidSelectionQuery||null,onChange:function(e,n){i({solidSelection:e,solidSelectionQuery:n})},repoAddress:x}),Object(d.jsx)(yn,{}),Object(d.jsx)(ge,{modes:p.modes,modeError:M,onModeChange:function(e){i({mode:e})},modeName:t.mode}),X.length?null:Object(d.jsx)(dn.a,{margin:{left:12},children:Object(d.jsx)(O.a,{shortcutLabel:"\u2325T",shortcutFilter:function(e){return 84===e.keyCode&&e.altKey},onShortcut:K,children:Object(d.jsx)(Ae.a,{color:{link:m.a.GRAY3,hover:m.a.DARK_GRAY3},onClick:K,underline:"always",children:"+ Add tags"})})}),Object(d.jsx)(sn.b,{tags:X,onChange:function(e){var n={},t=[];e.forEach((function(e){e.key in n||(n[e.key]=e.value,t.push(e))})),i({tags:t})},open:q,onRequestClose:function(){return w({type:"toggle-tag-editor",payload:!1})}}),Object(d.jsx)("div",{style:{flex:1}}),Object(d.jsx)(g.b,{icon:"paragraph",small:!0,active:z,style:{marginLeft:"auto"},onClick:function(){return w({type:"toggle-whitepsace",payload:!z})}}),Object(d.jsx)(yn,{}),Object(d.jsx)(Ee.b,{axis:"horizontal",container:N})]}),X.length?Object(d.jsx)(sn.a,{tags:X,onRequestEdit:K}):null,null!==t.base&&t.needsRefresh?Object(d.jsx)(dn.a,{padding:{vertical:8,horizontal:12},border:{side:"bottom",width:1,color:m.a.LIGHT_GRAY1},children:Object(d.jsxs)(pn.a,{direction:"row",spacing:8,alignItems:"center",children:[Object(d.jsx)(g.k,{icon:"warning-sign",color:m.a.GOLD3}),Object(d.jsx)("div",{children:"Your repository has been manually refreshed, and this configuration may now be out of date."}),Object(d.jsx)(g.b,{small:!0,intent:"primary",onClick:B,disabled:_.configLoading,children:"Refresh config"}),Object(d.jsx)(g.b,{small:!0,onClick:function(){i({needsRefresh:!1})},children:"Dismiss"})]})}):null,Object(d.jsx)(Ee.c,{ref:N,axis:"horizontal",identifier:"execution-editor",firstMinSize:100,firstInitialPercent:70,first:Object(d.jsx)(te,{ref:T,readOnly:!1,runConfigSchema:P,configCode:t.runConfigYaml,onConfigChange:function(e){i({runConfigYaml:e})},onHelpContextChange:function(e){ie(Q,e)||w({type:"set-editor-help-context",payload:e})},showWhitespace:z,checkConfig:F}),second:Object(d.jsx)(se,{context:Q,allInnerTypes:(null===P||void 0===P?void 0:P.allConfigTypes)||[]})})]}),second:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(be.a,{isLoading:!P||H,message:P?"Checking config...":"Loading config schema..."}),Object(d.jsx)(Te,{document:W,validation:G?G.isPipelineConfigValid:null,solidSelection:t.solidSelection,runConfigSchema:P,onHighlightPath:function(e){var n;return null===(n=T.current)||void 0===n?void 0:n.moveCursorToPath(e)},onRemoveExtraPaths:function(e){return function(e){var n=function(e,n){for(var t=n.split("."),r=0;r<t.length-1;r++)if("undefined"===typeof(e=e[t[r]]))return;var i=t.pop();i&&delete e[i]},r={};try{r=b.parse(t.runConfigYaml||"")||{};var o,a=Object(l.a)(e);try{for(a.s();!(o=a.n()).done;)n(r,o.value)}catch(c){a.e(c)}finally{a.f()}var s=b.stringify(r);i({runConfigYaml:s})}catch(c){return void Object(j.b)({title:"Invalid YAML",body:mn})}}(e)},onScaffoldMissingConfig:function(){var e=P?cn(P):{};try{var n=b.parse(t.runConfigYaml||"")||{},r=v()(e,n),o=b.stringify(r);i({runConfigYaml:o})}catch(a){Object(j.b)({title:"Invalid YAML",body:mn})}},actions:Object(d.jsx)(ye,{pipelineName:p.name,getVariables:function(){var e,n;if(t&&t.mode){var r=t.tags||[],i={};try{i=b.parse(t.runConfigYaml||"")||{}}catch(o){return void Object(j.b)({title:"Invalid YAML",body:mn})}return{executionParams:{runConfigData:i,selector:h,mode:t.mode,executionMetadata:{tags:[].concat(Object(s.a)(r.map((function(e){return{key:e.key,value:e.value}}))),Object(s.a)(t.solidSelectionQuery?[{key:un.a.SolidSelection,value:t.solidSelectionQuery}]:[]),Object(s.a)((null===t||void 0===t||null===(e=t.base)||void 0===e?void 0:e.presetName)?[{key:un.a.PresetName,value:null===t||void 0===t||null===(n=t.base)||void 0===n?void 0:n.presetName}]:[]))}}}}},disabled:"PipelineConfigValidationValid"!==(null===G||void 0===G||null===(n=G.isPipelineConfigValid)||void 0===n?void 0:n.__typename)})})]})})},Object(f.gql)(fn(),Ne,re.b)),yn=p.c.div.withConfig({displayName:"ExecutionSessionContainer__SessionSettingsSpacer",componentId:"sc-13rxma3-0"})(["width:5px;"])}}]);
//# sourceMappingURL=4.b0ec5155.chunk.js.map