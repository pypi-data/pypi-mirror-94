(self.webpackChunkgquantlab=self.webpackChunkgquantlab||[]).push([[876],{876:(t,e,n)=>{"use strict";n.r(e),n.d(e,{FACTORY:()=>zt,IGQUANTTracker:()=>$t,cleanIcon:()=>Ut,default:()=>Zt,gqIcon:()=>Pt,isEnabled:()=>Kt,isLinkedView:()=>Vt,layoutIcon:()=>Qt,runIcon:()=>Ft,setupContextMenu:()=>Yt});var o={};n.r(o),n.d(o,{GQuantModel:()=>Gt,GQuantView:()=>Wt});var a=n(32685),s=n(2145),i=n(62045),r=n(64532),d=n(41797);const l="0.1.0",c="gquantlab";var h=n(87708),u=n(80629),p=n(52683);async function m(t="",e={}){const n=p.ServerConnection.makeSettings(),o=u.URLExt.join(n.baseUrl,"gquantlab",t);let a;try{a=await p.ServerConnection.makeRequest(o,e,n)}catch(t){throw new p.ServerConnection.NetworkError(t)}let s=await a.text();if(s.length>0)try{s=JSON.parse(s)}catch(t){console.log("Not a JSON response body.",a)}if(!a.ok)throw new p.ServerConnection.ResponseError(a,s.message||s);return s}var g=n(41915),f=n(64520),y=n(56271),w=n.n(y),C=n(85499),b=n(93320),x=n.n(b),v=n(10323);const _={};function k(t,e){_[t]=e}function S(t){return function(e){t.tooltip.transition().delay(30).duration(200).style("opacity",1),t.tooltip.html(function(t){const e=Object.keys(t)[0];let n=`<div>Port: ${e.split(".")[1]}</div>`;const o=t[e].portType;let a="<ul>";for(let t=0;t<o.length;t++)a+=`<li>${o[t][0]}</li>`;return a+="</ul>",n+=`<div>Port Type:${a}</div>`,n+=function(t,e){const n=t[e].content;let o="";return t[e].portType.forEach((t=>{t[0]in _&&(o=_[t[0]](n))})),o}(t,e),n}(e)).style("left",t.mousePage.x+25+"px").style("top",t.mousePage.y+"px"),v.select(this).transition().delay(20).duration(200).attr("r",t.circleRadius+1).style("opacity",1)}}function H(t){return function(e){t.tooltip.style("opacity",0).style("left","-1000px").style("top","-1000px"),v.select(this).transition().delay(20).attr("r",t.circleRadius).duration(200)}}function N(t,e,n){return function(t){v.select(this).style("cursor",n),v.select(this.parentNode).attr("stroke",e)}}function I(t){return function(t){v.select(this).style("cursor","default"),v.select(this.parentNode).attr("stroke",null)}}function R(t,e){let n=0,o=0;return v.drag().on("start",(function(t){v.select(this.parentNode).attr("stroke","black"),n=v.event.x,o=v.event.y})).on("drag",(function(t){const[a,s]=v.mouse(this.parentNode.parentNode);v.select(this.parentNode).raise().attr("transform",((t,e)=>`translate(${t.x=a-n}, ${t.y=s-o})`)),e.link=e.link.data(e.edgeData()).join("line").attr("x1",(t=>t.source.x)).attr("y1",(t=>t.source.y)).attr("x2",(t=>t.target.x)).attr("y2",(t=>t.target.y))})).on("end",(function(n){v.select(this.parentNode).attr("stroke",null),t({nodes:e.bars.data()})}))}const q={};function T(t,e){const n=Object.keys(t);for(let o=0;o<n.length;o++){const a=n[o];if(!(a in e)||null!==e[a]&&null!==t[a]&&t[a]!==e[a])return!1}return!0}function E(t){return function(e,n){if(e===n)return!0;if(e.split(".")[0]===n.split(".")[0])return!1;if(t.outputPorts.has(e)){if(!t.inputPorts.has(n))return!1;if(t.props.edges.findIndex((t=>t.to===n))>=0)return!1;const o=t.portTypes[n],a=t.portTypes[e];if(o.findIndex((t=>"any"===t[0]))<0&&a.findIndex((t=>"any"===t[0]))<0&&!o.some((t=>a.some((e=>e.includes(t[0]))))))return!1;if(e in t.outputMeta&&n in t.inputRequriements){let a=!1;for(let s=0;s<o.length;s++)if(o[s][0]in q)return a=!0,q[o[s][0]](t.inputRequriements[n],t.outputMeta[e]);if(!a)return T(t.inputRequriements[n],t.outputMeta[e])}else if(!(e in t.outputMeta)&&n in t.inputRequriements)return T(t.inputRequriements[n],{})}else{if(!t.outputPorts.has(n))return!1;if(t.props.edges.findIndex((t=>t.to===e))>=0)return!1;const o=t.portTypes[n],a=t.portTypes[e];if(o.findIndex((t=>"any"===t[0]))<0&&a.findIndex((t=>"any"===t[0]))<0&&!a.some((t=>o.some((e=>e.includes(t[0]))))))return!1;if(n in t.outputMeta&&e in t.inputRequriements){let o=!1;for(let s=0;s<a.length;s++)if(a[s][0]in q)return o=!0,q[a[s][0]](t.inputRequriements[e],t.outputMeta[n]);if(!o)return T(t.inputRequriements[e],t.outputMeta[n])}else if(!(n in t.outputMeta)&&e in t.inputRequriements)return T(t.inputRequriements[e],{})}return!0}}function j(t){return function(e){console.log("mouse up"),v.event.stopPropagation(),v.event.preventDefault();let n=v.select(this.parentNode).attr("group");if(t.starting){const o=v.select(this.parentNode).datum().id;n=v.select(this.parentNode).attr("group");const a=Object.keys(e)[0].split(".")[1];if("outputs"===n){if("inputs"===t.starting.groupName){const e={from:o+"."+a,to:t.starting.from},n=t.props.edges.findIndex((t=>t.from===e.from&&t.to===e.to));n>=0?t.props.edges.splice(n,1):E(t)(e.from,e.to)&&t.props.edges.push(e),t.connectionUpdate(),t.isDirty=!1}}else if("outputs"===t.starting.groupName){const e={from:t.starting.from,to:o+"."+a},n=t.props.edges.findIndex((t=>t.from===e.from&&t.to===e.to));n>=0?t.props.edges.splice(n,1):E(t)(e.from,e.to)&&t.props.edges.push(e),t.connectionUpdate(),t.isDirty=!1}t.starting=null}t.drawCircles()}}function O(t){return function(e){console.log("mouse down"),v.event.stopPropagation(),v.event.preventDefault();let n=v.select(this.parentNode).attr("group");const o=Object.keys(e)[0],a=v.select(this.parentNode).datum().id;n=v.select(this.parentNode).attr("group");const s=Object.keys(e)[0].split(".")[1];if(t.starting={from:a+"."+s,groupName:n,point:null},"inputs"===n){const e=t.props.edges.findIndex((t=>t.to===o));e>=0&&(t.starting={from:t.props.edges[e].from,groupName:"outputs",point:null},t.props.edges.splice(e,1),t.drawLinks(),t.isDirty=!0)}else{const e=t.props.edges.findIndex((t=>t.from===o));e>=0&&(t.starting={from:t.props.edges[e].to,groupName:"inputs",point:null},t.props.edges.splice(e,1),t.drawLinks(),t.isDirty=!0)}"outputs"===t.starting.groupName?t.starting.point=t.translateCorr(t.starting.from,!0):t.starting.point=t.translateCorr(t.starting.from,!1),t.drawCircles()}}var A=n(60802),D=n(66510),L=n(15973),G=n.n(L),W=n(44339),M=n.n(W),B=(n(72814),n(93379)),z=n.n(B),P=n(28856);z()(P.Z,{insert:"head",singleton:!1}),P.Z.locals;class F extends w().Component{constructor(t){super(t)}render(){const t=G().input`
      width: 100%;
    `,e=G().div`
      width: 100%;
    `;return this._id='taskgraph_editor_"'+Math.random().toString(36).substring(2,15),w().createElement(e,null,w().createElement(t,{id:this._id,type:"text",className:"custom",value:this.props.value,required:this.props.required,onChange:t=>this.props.onChange(t.target.value),onClick:t=>{this.props.formContext.commandRegistry&&this.props.formContext.commandRegistry.execute(et,{filter:[".gq.yaml"]}).then((t=>{t&&this.props.onChange(t.path)}))}}),w().createElement("button",{onClick:()=>{const t=document.getElementById(this._id);this.props.formContext.commandRegistry&&this.props.formContext.commandRegistry.execute(bt,{path:t.value})}},"Show Taskgraph"))}}class U extends w().Component{constructor(t){super(t)}render(){const t=G().input`
      width: 100%;
    `;return w().createElement(t,{type:"text",className:"custom",value:this.props.value,required:this.props.required,onChange:t=>this.props.onChange(t.target.value),onClick:t=>{this.props.formContext.commandRegistry&&this.props.formContext.commandRegistry.execute(et,{filter:[".csv",".csv.gz"]}).then((t=>{t&&this.props.onChange(t.path)}))}})}}class Q extends w().Component{constructor(t){super(t)}render(){const t=G().input`
      width: 100%;
    `;return w().createElement(t,{type:"text",className:"custom",value:this.props.value,required:this.props.required,onChange:t=>this.props.onChange(t.target.value),onClick:t=>{this.props.formContext.commandRegistry&&this.props.formContext.commandRegistry.execute(et).then((t=>{t&&this.props.onChange(t.path)}))}})}}class $ extends w().Component{constructor(t){super(t)}render(){const t=G().input`
      width: 100%;
    `;return w().createElement(t,{type:"text",className:"custom",value:this.props.value,required:this.props.required,onChange:t=>this.props.onChange(t.target.value),onClick:t=>{console.log("event"),console.log(this.props),this.props.formContext.commandRegistry&&this.props.formContext.commandRegistry.execute(nt).then((t=>{t&&this.props.onChange(t.path)}))}})}}class J extends w().Component{constructor(t){super(t),this.handleSave=this.handleSave.bind(this),this.handleDelete=this.handleDelete.bind(this),this.handleClone=this.handleClone.bind(this),this.handleConvert=this.handleConvert.bind(this),this.myRef=w().createRef()}_bugWorkaround(t){const e=t=>{Object.keys(t).forEach((n=>{if("indicators"===n){const e=t[n];Array.isArray(e)&&e.forEach((t=>{console.log(t);let e=0,n=-1;Object.keys(t).forEach((t=>{if(t.startsWith("function.")){e+=1;const o=parseInt(t.split(".")[1]);n<o&&(n=o)}})),e>0&&(console.log("found dup"),Object.keys(t).forEach((e=>{parseInt(e.split(".")[1])!==n&&delete t[e]})))}))}"object"==typeof t[n]&&e(t[n])}))};e(t)}handleSave(t){const e=this.props.nodeDatum.id,n=this.props.nodes.filter((t=>t.id!==e)),o=this.myRef.current.value;if(n.findIndex((t=>t.id===o))>=0)return void window.alert(`the node id ${o} is not unique`);const a=this.props.edges.map((t=>{let n=t.from.split(".")[0];return n===e&&(t.from=o+"."+t.from.split(".")[1]),n=t.to.split(".")[0],n===e&&(t.to=o+"."+t.to.split(".")[1]),t})),s=this.props.nodes.map((n=>(n.id===e&&(n.id=o,n.conf=t.formData),n)));this.props.setChartState({nodes:s,edges:a})}handleDelete(){const t=this.props.nodeDatum.id,e=this.props.nodes.filter((e=>e.id!==t)),n=this.props.edges.filter((e=>e.from.split(".")[0]!==t&&e.to.split(".")[0]!==t));this.props.setChartState({nodes:e,edges:n}),this.props.handler.updateEditor.emit({nodes:[],nodeDatum:{},edges:[],setChartState:null,handler:this.props.handler})}handleClone(){const t=JSON.parse(JSON.stringify(this.props.nodeDatum));t.id=Math.random().toString(36).substring(2,15),t.x+=20,t.y+=20,this.props.nodes.push(t),this.props.setChartState({nodes:this.props.nodes,edges:this.props.edges})}handleConvert(){f.InputDialog.getText({title:"Provide a customized Node name"}).then((t=>{console.log("text "+t.value),this.props.handler.commandRegistry.execute(xt,{nodeName:t.value,conf:this.props.nodeDatum.conf})}))}render(){const t={FileSelector:Q,PathSelector:$,TaskgraphSelector:F,CsvFileSelector:U},e=G().div`
      text-align: left;
      padding: 10px;
      background-color: yellowgreen;
      overflow-y: auto;
      height: 100%;
    `;return null===this.props.setChartState?w().createElement(e,null,w().createElement("h2",null,"Click on the Task Node to Edit")):this.props.nodeDatum.id===qt?w().createElement(e,null,w().createElement("button",{className:"btn btn-danger",onClick:this.handleDelete},"Delete")):"CompositeNode"===this.props.nodeDatum.type?w().createElement(e,null,w().createElement("div",null,w().createElement("span",null,"Node id:"),w().createElement("input",{type:"text",placeholder:"unique node name",defaultValue:this.props.nodeDatum.id,ref:this.myRef})),w().createElement(M(),{schema:this.props.nodeDatum.schema,formData:this.props.nodeDatum.conf,uiSchema:this.props.nodeDatum.ui,onSubmit:this.handleSave,widgets:t,formContext:this.props.handler}),w().createElement("button",{className:"btn btn-primary",onClick:this.handleConvert},"Convert it To Node"),w().createElement("button",{className:"btn btn-primary",onClick:this.handleClone},"Clone"),w().createElement("button",{className:"btn btn-danger",onClick:this.handleDelete},"Delete")):w().createElement(e,null,w().createElement("div",null,w().createElement("span",null,"Node id:"),w().createElement("input",{type:"text",placeholder:"unique node name",defaultValue:this.props.nodeDatum.id,ref:this.myRef})),w().createElement(M(),{schema:this.props.nodeDatum.schema,formData:this.props.nodeDatum.conf,uiSchema:this.props.nodeDatum.ui,onSubmit:this.handleSave,widgets:t,formContext:this.props.handler}),w().createElement("button",{className:"btn btn-primary",onClick:this.handleClone},"Clone"),w().createElement("button",{className:"btn btn-danger",onClick:this.handleDelete},"Delete"))}}const V=J;class K extends f.ReactWidget{constructor(t){super(),this._contentHandler=t,this.id="jp-Gquant-NodeEditor",this.addClass("jp-GQuant-first")}get contentHandler(){return this._contentHandler}render(){return w().createElement(w().Fragment,null,w().createElement(f.UseSignal,{signal:this._contentHandler.updateEditor,initialArgs:{edges:[],nodeDatum:{},setChartState:null,nodes:[],handler:null}},((t,e)=>w().createElement(V,{handler:e.handler,nodeDatum:e.nodeDatum,setChartState:e.setChartState,nodes:e.nodes,edges:e.edges}))))}}class Y extends D.StackedPanel{constructor(t){super(),this._handler=t,this.addClass("jp-RovaPanel"),this.id="gquant-editor-panel",this.title.label="Node Editor",this.title.closable=!0,this._example=new K(this._handler),this.addWidget(this._example)}onResize(t){console.log("here"),console.log(t)}dispose(){super.dispose()}get handler(){return this._handler}}var Z=n(19850);const X="gquant:convertCellToFile",tt="gquant:toolbarConvertCellToFile",et="gquant:selectTheFile",nt="gquant:selectThePath",ot="gquant:openNewFile",at="gquant:includeNewFile",st="gquant:includeNewFile",it="gquant:toolbaropenTaskGraph",rt="gquant:export-yaml",dt="gquant:create-new",lt="gquant:openeditor",ct="gquant:openAnNewNotebook",ht="gquant:addnode",ut="gquant:reLayout",pt="gquant:toolbarReLayout",mt="gquant:aspect",gt="gquant:execute",ft="gquant:cleanResult",yt="gquant:toolbarexecute",wt="gquant:toolbarcleanResult",Ct="gquant:addOutputCollector",bt="gquant:openDocumentForward",xt="gquant:createCustomizedNode",vt="gquant:showLogBox";function _t(){return Math.random().toString(36).substring(2,15)}class kt extends w().Component{constructor(t){super(t),this.myRef=w().createRef(),this.mouse=null,this.mousePage=null,this.starting=null,this.tooltip=null,this.textHeight=25,this.circleHeight=20,this.circleRadius=8,this.bars=null,this.svg=null,this.transform=null,this.link=null,this.mouseLink=null,this.g=null,this.isDirty=!1,this.state={x:-1e3,y:-1e3,opacity:0,nodeDatum:null},this.inputPorts=new Set,this.outputPorts=new Set,this.inputRequriements={},this.outputMeta={},this.portTypes={},this.props.contentHandler.reLayoutSignal.connect(this.nodeReLayout,this),this.props.contentHandler.nodeAddedSignal.connect(this.addNewNode,this)}portMap(){this.inputPorts=new Set,this.outputPorts=new Set,this.inputRequriements={},this.outputMeta={},this.props.nodes.forEach((t=>{const e=t.id;t.inputs.forEach((t=>{this.inputPorts.add(e+"."+t.name),this.portTypes[e+"."+t.name]=t.type})),t.outputs.forEach((t=>{this.outputPorts.add(e+"."+t.name),this.portTypes[e+"."+t.name]=t.type}));let n=Object.keys(t.required);n.forEach((n=>{this.inputRequriements[e+"."+n]=t.required[n]})),n=Object.keys(t.output_meta),n.forEach((n=>{this.outputMeta[e+"."+n]=t.output_meta[n]}))}))}translateCorr(t,e=!1){const n=t.split("."),o=n[0],a=n[1],s=this.props.nodes.filter((t=>t.id===o))[0];if(e){const t=s.outputs.findIndex((t=>t.name===a));return{x:s.x+s.width,y:s.y+(t+.4)*this.circleHeight+this.textHeight,id:o}}{const t=s.inputs.findIndex((t=>t.name===a));return{x:s.x,y:s.y+(t+.4)*this.circleHeight+this.textHeight,id:o}}}edgeMap(t){return{source:this.translateCorr(t.from,!0),target:this.translateCorr(t.to,!1)}}edgeData(){return this.props.edges.map(this.edgeMap.bind(this))}nodeReLayout(t,e){this.reLayout()}addNewNode(t,e){const n=JSON.parse(JSON.stringify(e));e.id===qt&&this.props.nodes.findIndex((t=>t.id===qt))>=0||(n.type===Tt?n.id=qt:n.id=Math.random().toString(36).substring(2,15),n.x=this.mouse?this.mouse.x:0,n.y=this.mouse?this.mouse.y:0,this.transform&&([n.x,n.y]=this.transform.invert([n.x,n.y])),this.props.nodes.push(n),this.props.setChartState({nodes:this.props.nodes,edges:this.props.edges}))}componentWillUnmount(){this.props.contentHandler.reLayoutSignal.disconnect(this.nodeReLayout,this),this.props.contentHandler.nodeAddedSignal.disconnect(this.addNewNode,this)}componentDidMount(){this.tooltip=v.select(this.myRef.current).append("div").attr("class","tooltip").style("opacity",0);const t=v.zoom().scaleExtent([.1,30]).on("zoom",(t=>{this.g.attr("transform",v.event.transform),this.transform=v.event.transform}));var e;this.svg=v.select(this.myRef.current).append("svg").attr("width",this.props.width).attr("height",this.props.height).attr("viewBox",`0 -${.1*this.props.height} ${1.1*this.props.width+300} ${1.1*this.props.height+300}`).attr("font-family","sans-serif").attr("font-size","14").attr("text-anchor","end").on("mouseleave",(function(t){this.mouse=null})).on("mousemove",(e=this,function(t){let[n,o]=v.mouse(this);e.mouse={x:n,y:o},e.mousePage={x:v.event.clientX,y:v.event.clientY};let a=null;e.starting&&(a=e.starting.point);const s=v.zoomTransform(this);[n,o]=s.invert([n,o]),e.mouseLink=e.mouseLink.data(e.starting?["ab"]:[]).join("line").attr("x1",e.starting&&a.x).attr("y1",e.starting&&a.y).attr("x2",e.mouse&&n).attr("y2",e.mouse&&o)})).on("click",function(t){return function(e){if("rect"===v.event.target.tagName||"text"===v.event.target.tagName){const e=v.select(v.event.target.parentNode).datum();t.datum=e,t.renderEditor()}else{console.log("clicked"),t.isDirty&&(t.connectionUpdate(),t.isDirty=!1);const[e,n]=v.mouse(this);t.mouse={x:e,y:n},t.starting=null,t.setState({opacity:0,x:-1e3,y:-1e3})}}}(this)).call(t.bind(this)),this.g=this.svg.append("g"),this.bars=this.g.selectAll("g").data(this.props.nodes),this.link=this.g.append("g").attr("stroke","#999").selectAll("line").data(this.edgeData()).join("line"),this.mouseLink=this.g.append("g").attr("stroke","red").selectAll("line")}drawCircles(){this.bars.selectAll("g").filter(((t,e)=>0===e)).data(((t,e)=>[t])).join("g").attr("transform",((t,e)=>`translate(0, ${this.textHeight})`)).attr("group","inputs").selectAll("circle").data((t=>{const e=[];for(let n=0;n<t.inputs.length;n++)if(t.inputs[n].name in t.required){const o={};o.content=t.required[t.inputs[n].name],o.portType=t.inputs[n].type,e.push({[t.id+"."+t.inputs[n].name]:o})}else{const o={content:{}};o.portType=t.inputs[n].type,e.push({[t.id+"."+t.inputs[n].name]:o})}return e})).join("circle").attr("fill",(t=>{if(!this.starting)return"blue";const e=Object.keys(t)[0];return E(this)(this.starting.from,e)?"blue":"white"})).attr("cx",0).attr("cy",((t,e)=>(e+.4)*this.circleHeight)).attr("r",this.circleRadius).on("mouseover",S(this)).on("mouseout",H(this)).on("mousedown",O(this)).on("mouseup",j(this)),this.bars.selectAll("g").filter(((t,e)=>1===e)).data(((t,e)=>[t])).join("g").attr("transform",((t,e)=>`translate(${t?t.width:0}, ${this.textHeight})`)).attr("group","outputs").selectAll("circle").data((t=>{const e=[];for(let n=0;n<t.outputs.length;n++)if(t.outputs[n].name in t.output_meta){const o={};o.content=t.output_meta[t.outputs[n].name],o.portType=t.outputs[n].type,e.push({[t.id+"."+t.outputs[n].name]:o})}else{const o={content:{}};o.portType=t.outputs[n].type,e.push({[t.id+"."+t.outputs[n].name]:o})}return e})).join("circle").attr("fill",(t=>{if(!this.starting)return"green";const e=Object.keys(t)[0];return E(this)(this.starting.from,e)?"green":"white"})).attr("cx",0).attr("cy",((t,e)=>(e+.4)*this.circleHeight)).attr("r",this.circleRadius).on("mouseover",S(this)).on("mouseout",H(this)).on("mousedown",O(this)).on("mouseup",j(this))}drawLinks(){this.link=this.link.data(this.edgeData()).join("line").attr("x1",(t=>t.source.x)).attr("y1",(t=>t.source.y)).attr("x2",(t=>t.target.x)).attr("y2",(t=>t.target.y))}componentDidUpdate(){this.bars=this.bars.data(this.props.nodes).join("g").attr("transform",((t,e)=>`translate(${t?t.x:0}, ${t?t.y:0})`)),this.bars.selectAll("rect").filter(((t,e)=>0===e)).data(((t,e)=>[{w:t.width,h:this.textHeight+Math.max(t.inputs.length,t.outputs.length)*this.circleHeight,color:t.busy?"red":"steelblue"}])).join("rect").attr("fill",(t=>t.color)).attr("width",(t=>t.w)).attr("height",(t=>t.h)).on("mouseover",N(0,"red","pointer")).on("mouseout",I()),this.bars.selectAll("rect").filter(((t,e)=>1===e)).data(((t,e)=>[{w:t.width,h:this.textHeight}])).join("rect").attr("fill","seagreen").attr("width",(t=>t.w)).attr("height",(t=>t.h)).call(R(this.props.setChartState,this)).on("mouseover",N(0,"black","grab")).on("mouseout",I()),this.bars.selectAll("text").filter(((t,e)=>0===e)).data(((t,e)=>[{w:t.width,id:t.id===qt?"":t.id}])).join("text").attr("fill","white").attr("x",(t=>t.w)).attr("y",0).attr("dy","1.00em").attr("dx","-1.00em").text((t=>t.id)).call(R(this.props.setChartState,this)).on("mouseover",N(0,"black","grab")).on("mouseout",I()),this.bars.selectAll("text").filter(((t,e)=>1===e)).data(((t,e)=>[{w:t.width,text:t.type}])).join("text").attr("transform",((t,e)=>`translate(0, ${this.textHeight})`)).attr("fill","black").attr("x",((t,e)=>t.w)).attr("y",0).attr("dy","1.00em").attr("dx","-1.00em").text(((t,e)=>t.text)).on("mouseover",N(0,"red","pointer")).on("mouseout",I()),this.drawCircles(),this.drawLinks()}reLayout(){this.props.layout(this.props.nodes,this.props.edges,this.transform)}fullUpdate(t,e){const n=It(t,e),o=JSON.stringify(n);this._updateInputs(o,t,e)}nodeEditorUpdate(t){this.fullUpdate(t.nodes,t.edges)}renderEditor(){const t={nodeDatum:this.datum,setChartState:this.nodeEditorUpdate.bind(this),nodes:this.props.nodes,edges:this.props.edges,handler:this.props.contentHandler};this.props.contentHandler.commandRegistry&&this.props.contentHandler.commandRegistry.execute(lt),this.props.contentHandler.updateEditor.emit(t)}_updateInputs(t,e,n){m("load_graph",{body:t,method:"POST"}).then((t=>{const o={};t.nodes.forEach((t=>{o[t.id]={required:t.required,outputMeta:t.output_meta,inputs:t.inputs,outputs:t.outputs,schema:t.schema,ui:t.ui,conf:t.conf}})),e.forEach((t=>{if(t.id in o){if(t.id===qt)return;t.required=o[t.id].required,t.output_meta=o[t.id].outputMeta,t.inputs=o[t.id].inputs,t.outputs=o[t.id].outputs,t.schema=o[t.id].schema,t.ui=o[t.id].ui,t.conf=o[t.id].conf}})),this.props.setChartState({nodes:e,edges:n});let a=null;if(this.datum){const t=e.findIndex((t=>t.id===this.datum.id));t>=0?(this.datum=e[t],a={nodeDatum:this.datum,setChartState:this.nodeEditorUpdate.bind(this),nodes:e,edges:n,handler:this.props.contentHandler}):(this.datum={},a={nodeDatum:this.datum,setChartState:null,nodes:[],edges:[],handler:this.props.contentHandler})}this.props.contentHandler.updateEditor.emit(a)}))}connectionUpdate(){this.fullUpdate(this.props.nodes,this.props.edges)}render(){return this.portMap(),this.svg&&this.svg.attr("width",this.props.width).attr("height",this.props.height).attr("viewBox",`0 -${.1*this.props.height} ${1.1*this.props.width+300} ${1.1*this.props.height+300}`),console.log("rendering"),w().createElement("div",{ref:this.myRef})}}function St(t,e){return t.findIndex((t=>t.id===e))>=0}const Ht=/-(\d+)$/;function Nt(t){const e=t.match(Ht);if(e){const n=e[1],o=(parseInt(n)+1).toString(),a=e.index;return t.substr(0,a)+"-"+o}return t+"-1"}function It(t,e){const n=t,o=e,a={};for(let t=0;t<o.length;t++){const e=o[t].to.split(".")[0],n=o[t].to.split(".")[1];e in a?a[e][n]=o[t].from:a[e]={[n]:o[t].from}}const s=[];for(let t=0;t<n.length;t++){const e=n[t],o={};o.id=e.id===qt?"":e.id,o.type=e.type,o.conf=e.conf,e.id in a?o.inputs=a[e.id]:o.inputs={},"filepath"in e&&(o.filepath=e.filepath),"module"in e&&(o.module=e.module),s.push(o)}return s}class Rt extends w().Component{constructor(t){super(t),this.state={height:null,width:null,nodes:[],edges:[]},t.contentHandler.contentChanged.connect(this.contentChangeHandler,this),t.contentHandler.chartStateUpdate.connect(this.stateUpdateHandler,this),t.contentHandler.sizeStateUpdate.connect(this.stateHandleResize,this),this.props.contentHandler.contentReset.connect(this.contentResetHandler,this),this.props.contentHandler.saveCache.connect(this.saveCacheHandler,this),this.props.contentHandler.includeContent.connect(this.contentIncludeHandler,this)}componentWillUnmount(){this.props.contentHandler.contentChanged.disconnect(this.contentChangeHandler,this),this.props.contentHandler.chartStateUpdate.disconnect(this.stateUpdateHandler,this),this.props.contentHandler.chartStateUpdate.disconnect(this.stateHandleResize,this),this.props.contentHandler.contentReset.disconnect(this.contentResetHandler,this),this.props.contentHandler.saveCache.disconnect(this.saveCacheHandler,this),this.props.contentHandler.includeContent.disconnect(this.contentIncludeHandler,this)}contentChangeHandler(t,e){if(!e.width&&!e.height)return;const n=this._updateLayout(e.nodes,e.edges,null,e.width?e.width:100,e.height?e.height:100);if(this.props.contentHandler.privateCopy&&this.props.contentHandler.privateCopy.get("cache")&&!this.props.contentHandler.privateCopy.get("cache").nodes&&e.width&&e.height){console.log("empty cache",this.state);const t={nodes:n,edges:e.edges},o=JSON.parse(JSON.stringify(t));this.props.contentHandler.privateCopy.set("cache",o),this.props.contentHandler.privateCopy.save()}this.setState({nodes:n,edges:e.edges,width:e.width?e.width:this.state.width,height:e.height?e.height:this.state.height})}saveCacheHandler(t){if(this.props.contentHandler.privateCopy){const t=JSON.parse(JSON.stringify(this.state));this.props.contentHandler.privateCopy.set("cache",t),this.props.contentHandler.privateCopy.save()}}contentIncludeHandler(t,e){const n=this.state.nodes,o=this.state.edges;let a=!1;e.nodes.forEach((t=>{let o=t.id;if(t.id!==qt){for(;St(n,o);)o=Nt(o);o!==t.id&&(e.edges.forEach((e=>{e.from.split(".")[0]===t.id&&(e.from=o+"."+e.from.split(".")[1]),e.to.split(".")[0]===t.id&&(e.to=o+"."+e.to.split(".")[1])})),t.id=o)}else St(n,o)&&(a=!0)})),n.forEach((t=>{a&&t.id===qt||e.nodes.push(t)})),o.forEach((t=>{e.edges.push(t)})),this.contentResetHandler(t,e)}contentResetHandler(t,e){const n=this._updateLayout(e.nodes,e.edges,null,this.state.width,this.state.height);this.updateWorkFlow({nodes:n,edges:e.edges,height:this.state.height,width:this.state.width})}stateUpdateHandler(t,e){this.setState({nodes:e.nodes,edges:e.edges})}stateHandleResize(t,e){const n=this._updateLayout(this.state.nodes,this.state.edges,null,e.width,e.height);this.setState({nodes:n,edges:this.state.edges,width:e.width,height:e.height})}_updateLayout(t,e,n,o,a){if(0===t.length)return t;const s={},i={};for(let t=0;t<e.length;t++){const n=e[t].to.split(".")[0],o=e[t].from.split(".")[0];n in s?s[n].findIndex((t=>t===o))<0&&s[n].push(o):s[n]=[o],o in i?i[o].findIndex((t=>t===n))<0&&i[o].push(n):i[o]=[n]}const r="something uniq 24dd8da7-ac82-4b82-aa6b-4d9338ff15b9",d={id:r,width:0,type:"Empty Layout Node",conf:{},required:{},output_meta:[],outputs:[],schema:{},ui:{},inputs:[]},l=JSON.parse(JSON.stringify(t)),c=l.filter(((t,e)=>!(t.id in i)));s[r]=c.map((t=>t.id)),l.push(d);const h=l.map(((t,e)=>(t.id in s?t.parentIds=s[t.id]:t.parentIds=[],t.x=10*e,t.y=10*e,t))),u=(0,C.dagStratify)()(h);return(0,C.sugiyama)().size([a||100,o||100]).layering((0,C.layeringLongestPath)()).decross((0,C.decrossTwoLayer)()).coord((0,C.coordCenter)())(u),u.descendants().forEach((t=>{if(n){const e=n.invert([t.y,t.x]);t.data.y=e[1],t.data.x=e[0]}else t.data.y=t.x,t.data.x=t.y})),h.filter((t=>t.id!==r))}layout(t,e,n){if(0===t.length)return;const o=this._updateLayout(t,e,n,this.state.width,this.state.height);this.setState({nodes:o,edges:e})}_fixDynamicPorts(t){const e=[];t.nodes.forEach((t=>{t.inputs.forEach((n=>{"dynamic"in n&&e.push(t.id+"."+n.name)}))})),0!==e.length&&t.edges.forEach((t=>{e.includes(t.to)&&(t.to=t.to.split(".")[0]+"."+t.from.split(".")[0]+"@"+t.from.split(".")[1])}))}_fixOutputCollectorPorts(t){const e=t.nodes.findIndex((t=>t.id===qt));if(e<0)return;const n=t.edges.filter((t=>t.to.split(".")[0]===qt));this.props.contentHandler.outputs=n.map((t=>t.from));const o=n.map((t=>t.to.split(".")[1])),a=t.nodes[e],s=o.length+1;a.inputs=[];for(let t=0;t<s;t++)a.inputs.push({name:`in${t+1}`,type:[["any"]]});n.forEach(((t,e)=>{t.to=`${qt}.in${e+1}`}))}updateWorkFlow(t,e=!0){if(t.edges&&t.nodes){this._fixOutputCollectorPorts(t),this._fixDynamicPorts(t);const e=It(t.nodes,t.edges);if(this.props.contentHandler.privateCopy){this.props.contentHandler.privateCopy.set("value",e);const n=JSON.parse(JSON.stringify(t));this.props.contentHandler.privateCopy.set("cache",n),this.props.contentHandler.privateCopy.save(),console.log("edges:",t.edges.length,"nodes:",t.nodes.length)}const n=x().safeDump(e);this.props.contentHandler.update(n)}e&&this.setState(t)}render(){return console.log("chart engine render",this.state.height,this.state.width),w().createElement(kt,{contentHandler:this.props.contentHandler,nodes:this.state.nodes,edges:this.state.edges,setChartState:this.updateWorkFlow.bind(this),width:this.state.width?this.state.width:100,height:this.state.height?this.state.height:100,layout:this.layout.bind(this)})}}const qt="collector_id_fd9567b6",Tt="Output_Collector";class Et extends f.ReactWidget{constructor(t){super(),this._contentHandler=t,this.addClass("jp-GQuant"),this.firstTimeReSize=!1}_calclateSize(){this._height=300;const t=this.parent.parent.parent.parent.parent.parent;this._width=t.inputArea.editorWidget.node.clientWidth-5,this._contentHandler&&this._contentHandler.privateCopy&&this._contentHandler.aspectRatio&&(this._height=this._width*this._contentHandler.aspectRatio)}mimerenderWidgetUpdateSize(){if(this._calclateSize(),!this._contentHandler.privateCopy)return;if(!this._contentHandler.privateCopy.get("cache"))return;if(!this._contentHandler.privateCopy.get("cache").nodes)return;this._contentHandler.sizeStateUpdate.emit({nodes:[],edges:[],width:this._width,height:this._height});const t=this.parent;3===t.widgets.length&&(t.widgets[2].node.style.width=this._width+"px")}onAfterAttach(t){console.log("attached"),super.onAfterAttach(t),this._calclateSize(),this._contentHandler.privateCopy&&this._contentHandler.privateCopy.get("value")&&this._contentHandler.renderGraph(this._contentHandler.privateCopy.get("value"),this._width,this._height)}get contentHandler(){return this._contentHandler}onResize(t){this._height=t.height,this._width=t.width,console.log("resize",this._height,this._width),this._height<0||this._width<0?this.mimerenderWidgetUpdateSize():this.firstTimeReSize?this._contentHandler.sizeStateUpdate.emit({nodes:[],edges:[],width:this._width,height:this._height}):(this._contentHandler.emit(this._width,this._height),this.firstTimeReSize=!0)}render(){return console.log("re render"),w().createElement("div",null,w().createElement(Rt,{contentHandler:this._contentHandler}))}}var jt=n(6168);class Ot{constructor(t){this._contentChanged=new jt.Signal(this),this._contentReset=new jt.Signal(this),this._includeContent=new jt.Signal(this),this._chartStateUpdate=new jt.Signal(this),this._sizeStateUpdate=new jt.Signal(this),this._runGraph=new jt.Signal(this),this._cleanResult=new jt.Signal(this),this._updateEditor=new jt.Signal(this),this._saveCache=new jt.Signal(this),this._nodeAdded=new jt.Signal(this),this._reLayout=new jt.Signal(this),this._aspectRatio=.3,this.context=t}set commandRegistry(t){this._commandRegistry=t}get commandRegistry(){return this._commandRegistry}get updateEditor(){return this._updateEditor}get runGraph(){return this._runGraph}get saveCache(){return this._saveCache}get cleanResult(){return this._cleanResult}get reLayoutSignal(){return this._reLayout}set aspectRatio(t){this._aspectRatio=t}get aspectRatio(){return this._aspectRatio}set outputs(t){this._outputs=t}get outputs(){return this._outputs?this._outputs:[]}get reLayoutSignalInstance(){return this._reLayout}get privateCopy(){return this._privateCopy}get nodeAddedSignal(){return this._nodeAdded}get contentChanged(){return this._contentChanged}get contentReset(){return this._contentReset}get includeContent(){return this._includeContent}get chartStateUpdate(){return this._chartStateUpdate}get sizeStateUpdate(){return this._sizeStateUpdate}setPrivateCopy(t){t&&(this._privateCopy=t)}update(t){this.context&&this.context.model.fromString(t)}emit(t,e){this._onContentChanged(t,e)}async renderGraph(t,e,n){const o=JSON.stringify(t),a=await m("load_graph",{body:o,method:"POST"});e&&(a.width=e),n&&(a.height=n),this._contentChanged.emit(a)}_onContentChanged(t,e){console.log("content chagned"),(async()=>{if(null===this.context)return;await this.context.ready;const n=this.context.model.toString();console.log("model path",this.context.path);const o=x().safeLoad(n);this.renderGraph(o,t,e)})()}}class At extends g.DocumentWidget{constructor(t){super(Object.assign({},t)),this.context=t.context}get contentHandler(){return this.content.content.contentHandler}}class Dt extends g.ABCWidgetFactory{constructor(t){super(t)}createNewWidget(t){const e=new Ot(t),n=new Et(e),o=new f.MainAreaWidget({content:n});return o.toolbar.hide(),new At({context:t,content:o})}}var Lt=n(94968);class Gt extends h.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:Gt.model_name,_model_module:Gt.model_module,_model_module_version:Gt.model_module_version,_view_name:Gt.view_name,_view_module:Gt.view_module,_view_module_version:Gt.view_module_version,value:[],cache:{nodes:[],edges:[]},sub:null})}}Gt.serializers=Object.assign(Object.assign({},h.DOMWidgetModel.serializers),{sub:{deserialize:h.unpack_models}}),Gt.model_name="GQuantModel",Gt.model_module=c,Gt.model_module_version=l,Gt.view_name="GQuantView",Gt.view_module=c,Gt.view_module_version=l;class Wt extends h.DOMWidgetView{addCommands(t,e){const n=new f.CommandToolbarButton({commands:t,id:pt}),o=new f.CommandToolbarButton({commands:t,id:yt}),a=new f.CommandToolbarButton({commands:t,id:wt}),s=new f.CommandToolbarButton({commands:t,id:it}),i=new f.CommandToolbarButton({commands:t,id:tt}),r=new f.CommandToolbarButton({commands:t,id:st}),d=new f.CommandToolbarButton({commands:t,id:vt});e.addItem("relayout",n),e.addItem("run",o),e.addItem("clean",a),e.addItem("open",s),e.addItem("add",r),e.addItem("create",i),e.addItem("log",d)}render(){this._contentHandler=new Ot(null);const t=new Lt.CommandRegistry;this._contentHandler.commandRegistry=t,this._contentHandler.runGraph.connect(this.run,this),this._contentHandler.cleanResult.connect(this.clean,this);const e=new D.Panel;this._widget=new Et(this._contentHandler);const n=new f.Toolbar;e.addWidget(this._widget),e.addWidget(n),this.pWidget=e,this._contentHandler.renderGraph(this.model.get("value")),this._contentHandler.setPrivateCopy(this.model),this.model.on("change:cache",this.cache_changed,this),this.views=new h.ViewList(this.addView,null,this),this.model.on("change:sub",this.sub_changed,this),function(t,e,n,o,a){t.addCommand(it,{label:"",caption:"Open TaskGraph file",icon:A.folderIcon,mnemonic:0,execute:async()=>{const t=s.FileDialog.getOpenFiles({manager:n.defaultBrowser.model.manager,filter:t=>t.path.endsWith(".gq.yaml")}),o=await t;if(o.button.accept){const t=o.value;if(1===t.length){const n={path:t[0].path},o=await m("load_graph_path",{body:JSON.stringify(n),method:"POST"});e.contentReset.emit(o)}}}}),t.addCommand(tt,{label:"",caption:"Create Taskgraph from this Cell",icon:Pt,execute:async t=>(async t=>{const n=await o.execute("docmanager:new-untitled",{path:t,type:"file",ext:".gq.yaml"}),s=e.privateCopy.get("value");n.content=x().safeDump(s),n.format="text",a.serviceManager.contents.save(n.path,n)})(n.defaultBrowser.model.path)}),t.addCommand(pt,{label:"",caption:"Taskgraph Nodes Auto Layout",icon:Qt,mnemonic:0,execute:()=>{e.reLayoutSignal.emit()}}),t.addCommand(yt,{label:"",caption:"Run",icon:Ft,mnemonic:0,execute:async()=>{e.saveCache.emit(),e.runGraph.emit()}}),t.addCommand(vt,{label:"",caption:"Show Log Console",icon:A.listIcon,mnemonic:0,execute:async()=>{var t;a.commands.execute("logconsole:open",{insertMode:"split-bottom",ref:null===(t=a.shell.currentWidget)||void 0===t?void 0:t.id})}}),t.addCommand(wt,{label:"",caption:"Clean Result",icon:Ut,mnemonic:0,execute:async()=>{e.cleanResult.emit()}}),t.addCommand(et,{label:"Select the file",caption:"Select the file",icon:A.folderIcon,execute:async t=>await a.commands.execute(et,t)}),t.addCommand(nt,{label:"Select the Path",caption:"Select the Path",icon:A.folderIcon,execute:async()=>a.commands.execute(nt)}),t.addCommand(lt,{label:"Task Node Editor",caption:"Open the Task Node Editor",icon:A.editIcon,mnemonic:0,execute:()=>{if(Vt(a.shell.currentWidget)){let t=null;for(const n of(0,Z.toArray)(a.shell.widgets()))if(n instanceof Y&&n.handler===e){t=n;break}null===t?(t=new Y(e),t.id=t.id+_t(),a.shell.add(t,"main",{mode:"split-bottom"})):a.shell.activateById(t.id)}else{let t=null;for(const n of(0,Z.toArray)(a.shell.widgets()))if(n instanceof Y&&n.handler===e){t=n;break}null===t?(t=new Y(e),t.id=t.id+_t(),a.shell.add(t,"main",{mode:"split-bottom"})):a.shell.activateById(t.id)}}}),t.addCommand(bt,{label:"Task Node Editor",caption:"Open the Task Node Editor",icon:A.editIcon,mnemonic:0,execute:t=>{a.commands.execute("docmanager:open",t)}}),t.addCommand(xt,{label:"Create Customized Node",caption:"Create Customized Node",icon:A.folderIcon,execute:t=>{a.commands.execute(xt,t)}}),t.addCommand(st,{label:"",caption:"Import TaskGraph from file",icon:A.addIcon,execute:async()=>{const t=s.FileDialog.getOpenFiles({manager:n.defaultBrowser.model.manager,filter:t=>t.path.endsWith(".gq.yaml")}),o=await t;if(o.button.accept){const t=o.value;if(1===t.length){const n={path:t[0].path},o=await m("load_graph_path",{body:JSON.stringify(n),method:"POST"});e.includeContent.emit(o)}}}})}(t,this._contentHandler,Wt.browserFactory,Wt.apps.commands,Wt.apps),this.addCommands(t,n),this.createContexMenu()}run(){this.send({event:"run"})}clean(){const t=this.model.get("cache");t.nodes.forEach((t=>{t.busy=!1})),this._contentHandler.chartStateUpdate.emit(t),this._contentHandler.privateCopy.set("cache",t),this.send({event:"clean"})}sub_changed(t,e){this.create_child_view(e).then((t=>{const e=this.pWidget;3===e.widgets.length&&e.layout.removeWidget(e.widgets[2]),e.insertWidget(2,t.pWidget)})),this.views.update([e]).then((()=>{const t=this.pWidget;if(3===t.widgets.length){const e=t.widgets[2],n=this._widget.parent.parent.parent.parent.parent.parent.inputArea.editorWidget.node.clientWidth-5;e.node.style.width=n+"px"}}))}getFigureSize(){return this.el.getBoundingClientRect()}addView(t){return this.create_child_view(t)}processPhosphorMessage(t){switch(super.processPhosphorMessage.apply(this,t),t.type){case"resize":case"after-show":case"after-attach":this.pWidget.isVisible&&console.log(this.getFigureSize())}}cache_changed(){const t=this.model.get("cache");if("register"in t){const e=t.register;m("register_node",{body:JSON.stringify(e),method:"POST"}).then((t=>{console.log(t)})),delete t.register}this._contentHandler.chartStateUpdate.emit(t)}createContexMenu(){const t=Wt.apps.commands,e=new A.ContextMenuSvg({commands:t});Yt(e,t,null),e.addItem({type:"separator",selector:".jp-GQuant"}),e.addItem({command:"notebook:create-output-view",selector:".jp-GQuant"}),this.pWidget.node.addEventListener("contextmenu",(t=>{e.open(t)&&(t.preventDefault(),t.stopPropagation())}))}}Wt.apps=null,Wt.browserFactory=null;var Mt=n(32309),Bt=n(10410);const zt="GQUANTLAB",Pt=new A.LabIcon({name:"gquantlab:gq",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" width="16" viewBox="-2 -2 34 34">\n    <rect\n       y="-1.7763568e-15"\n       x="0"\n       height="30"\n       width="10"\n       id="rect22"\n       style="fill:#2e8b57;fill-opacity:1;fill-rule:evenodd;stroke-width:0.183308" />\n    <rect\n       style="fill:#2e8b57;fill-opacity:1;fill-rule:evenodd;stroke-width:0.183309;stroke:none;stroke-opacity:1"\n       id="rect22-9"\n       width="10"\n       height="30"\n       x="20"\n       y="0" />\n    <circle\n       r="5"\n       cy="10"\n       cx="10"\n       id="path1050"\n       style="fill:#2e8b57;fill-opacity:1;stroke:none;stroke-width:1;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n    <path\n       d="m 10,15 a 5,5 0 0 1 -4.330127,-2.5 5,5 0 0 1 0,-5 A 5,5 0 0 1 10,5"\n       style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:1;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       id="path1050-2" />\n    <circle\n       r="5"\n       cx="20"\n       cy="20"\n       id="path1050-2-5"\n       style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:1;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n    <path\n       d="m 20,25 a 5,5 0 0 1 -4.330127,-2.5 5,5 0 0 1 0,-5 A 5,5 0 0 1 20,15 v 5 z"\n       style="fill:#2e8b57;fill-opacity:1;stroke:none;stroke-width:1;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       id="path1050-2-5-1" />\n</svg>\n'}),Ft=new A.LabIcon({name:"gquantlab:gqrun",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" width="16" viewBox="0 0 640 480">\n <g>\n  <title>Layer 1</title>\n  <path d="m416.846985,109.244995c17.785004,0 32.207001,-14.471008 32.207001,-32.255005c0,-17.785004 -14.421997,-32.207001 -32.207001,-32.207001c-17.832977,0 -32.254974,14.421997 -32.254974,32.207001c0,17.783997 14.421997,32.255005 32.254974,32.255005" fill-rule="nonzero" fill="#00aa00" id="path8248"/>\n  <path d="m305.852997,133.169006l-50.136993,57.932983c-2.972015,3.654022 -7.455017,5.895996 -12.522003,5.895996c-8.964996,0 -16.225006,-7.259979 -16.225006,-16.176971c0,-4.872009 2.095001,-9.209015 5.457001,-12.181l54.084015,-62.269012c2.971985,-3.557007 7.454987,-5.847015 12.522003,-5.847015l78.250977,-0.048981c5.75,0 10.914001,2.338989 14.714996,5.992981l49.893005,49.894012l41.367004,-41.269989c2.924011,-2.485016 6.676025,-3.947021 10.768005,-3.947021c9.257996,0 16.713013,7.503998 16.713013,16.762024c0,4.043976 -1.36499,7.697998 -3.752014,10.621979l-49.845001,50.234009c-15.152985,15.105011 -27.333984,2.290009 -27.333984,2.290009l-30.598999,-30.744995l-47.798004,55.301971l43.802979,43.803009c0,0 9.257019,8.576019 3.946014,25.628998l-24.557007,109.483032c-1.949005,9.501953 -10.32901,16.664001 -20.365997,16.664001c-11.548004,0 -20.854004,-9.355042 -20.854004,-20.854004c0,-1.851013 0.195007,-3.605042 0.632996,-5.262024l20.221008,-89.799011l-49.796997,-48.382996l-42.828003,47.75c0,0 -6.919006,8.527039 -25.287994,7.893005l-86.875,0.145996c-9.695999,0.147034 -18.514999,-6.47998 -20.659012,-16.322021c-2.582993,-11.20697 4.336014,-22.218964 15.591003,-24.702972c1.755005,-0.389984 3.509003,-0.536011 5.214005,-0.488007l74.694,0.195007l110.458008,-128.046997l-28.894012,-0.145996z" fill-rule="nonzero" fill="#00aa00" id="path8256"/>\n </g>\n</svg>'}),Ut=new A.LabIcon({name:"gquantlab:gqclean",svgstr:'\n<svg height="16" viewBox="1 -25 511.9995 511" width="16" xmlns="http://www.w3.org/2000/svg">\n    <path d="m291.160156 462.433594h-226.105468c-8.28125 0-15-6.71875-15-15 0-8.285156 6.71875-15 15-15h226.105468c8.285156 0 15 6.714844 15 15 0 8.28125-6.714844 15-15 15zm0 0" fill="#878477" />\n    <path d="m379.1875 462.445312h-28.027344c-8.285156 0-15-6.714843-15-15 0-8.285156 6.714844-15 15-15h28.027344c8.285156 0 15 6.714844 15 15 0 8.285157-6.714844 15-15 15zm0 0" fill="#878477" />\n    <path d="m65.058594 462.445312c-3.980469 0-7.796875-1.582031-10.609375-4.394531l-32.566407-32.566406c-14.113281-14.109375-21.882812-32.871094-21.882812-52.828125s7.769531-38.71875 21.882812-52.832031l96.585938-96.585938c2.8125-2.8125 6.628906-4.394531 10.605469-4.394531 3.976562 0 7.792969 1.582031 10.605469 4.394531l149.582031 149.582031c5.855469 5.855469 5.855469 15.351563 0 21.210938l-64.007813 64.007812c-2.8125 2.8125-6.628906 4.390626-10.605468 4.394532zm0 0" fill="#edeade" />\n    <path d="m65.058594 462.445312 149.589844-.011718c3.980468-.003906 7.792968-1.582032 10.605468-4.394532l64.007813-64.007812c5.855469-5.859375 5.855469-15.355469 0-21.210938l-74.789063-74.792968-160.023437 160.023437c2.8125 2.8125 6.628906 4.394531 10.609375 4.394531zm0 0" fill="#c4c0ad" />\n    <path d="m285.035156 404.808594c-3.839844 0-7.675781-1.464844-10.605468-4.394532l-162.34375-162.34375c-5.855469-5.859374-5.855469-15.355468 0-21.210937l211.964843-211.964844c2.8125-2.8125 6.628907-4.394531 10.605469-4.394531 3.980469 0 7.792969 1.582031 10.609375 4.394531l162.339844 162.34375c5.859375 5.855469 5.859375 15.351563 0 21.210938l-211.960938 211.964843c-2.929687 2.929688-6.769531 4.394532-10.609375 4.394532zm0 0" fill="#4dc979" />\n    <path d="m426.433594 86.066406-233.175782 233.175782 81.171876 81.171874c2.929687 2.925782 6.769531 4.394532 10.605468 4.394532 3.839844 0 7.679688-1.464844 10.605469-4.394532l211.964844-211.964843c5.859375-5.859375 5.859375-15.355469 0-21.210938zm0 0" fill="#1e9e60" />\n</svg>'}),Qt=new A.LabIcon({name:"gquantlab:layout",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" width="16" viewBox="0 0 485 485">\n   <g\n   id="g4"\n   style="fill:#00aa00">\n\t<path\n   d="M430,102.509c-30.327,0-55,24.673-55,55c0,9.724,2.547,18.859,6.993,26.794l-61.444,61.445   c-7.934-4.446-17.07-6.993-26.794-6.993c-9.724,0-18.86,2.547-26.794,6.993l-27.707-27.707c4.446-7.934,6.993-17.07,6.993-26.794   c0-30.327-24.673-55-55-55s-55,24.673-55,55c0,9.724,2.547,18.859,6.993,26.794l-61.445,61.444   c-7.935-4.446-17.071-6.993-26.795-6.993c-30.327,0-55,24.673-55,55s24.673,55,55,55s55-24.673,55-55   c0-9.724-2.547-18.859-6.993-26.793l61.445-61.444c7.934,4.446,17.07,6.993,26.794,6.993c9.724,0,18.859-2.547,26.794-6.993   l27.707,27.707c-4.446,7.934-6.993,17.07-6.993,26.794c0,30.327,24.673,55,55,55s55-24.673,55-55c0-9.724-2.547-18.86-6.993-26.794   l61.444-61.444c7.935,4.446,17.07,6.993,26.794,6.993c30.327,0,55-24.673,55-55S460.327,102.509,430,102.509z M55,352.491   c-13.785,0-25-11.215-25-25s11.215-25,25-25s25,11.215,25,25S68.785,352.491,55,352.491z M191.247,216.247   c-13.785,0-25-11.215-25-25s11.215-25,25-25s25,11.215,25,25S205.032,216.247,191.247,216.247z M293.755,318.754   c-13.785,0-25-11.215-25-25s11.215-25,25-25s25,11.215,25,25S307.54,318.754,293.755,318.754z M430,182.509   c-13.785,0-25-11.215-25-25s11.215-25,25-25s25,11.215,25,25S443.785,182.509,430,182.509z"\n   id="path2"\n   style="fill:#00aa00" />\n</g>\n<g\n   id="g6">\n</g>\n<g\n   id="g8">\n</g>\n<g\n   id="g10">\n</g>\n<g\n   id="g12">\n</g>\n<g\n   id="g14">\n</g>\n<g\n   id="g16">\n</g>\n<g\n   id="g18">\n</g>\n<g\n   id="g20">\n</g>\n<g\n   id="g22">\n</g>\n<g\n   id="g24">\n</g>\n<g\n   id="g26">\n</g>\n<g\n   id="g28">\n</g>\n<g\n   id="g30">\n</g>\n<g\n   id="g32">\n</g>\n<g\n   id="g34">\n</g>\n</svg>\n'}),$t=new d.Token("gquant/tracki");function Jt(t){if(!t)return!1;if(0===t.widgets.length)return!1;let e=t.widgets[0];if(!e)return!1;if(e.widgets[0]instanceof Et)return!0;const n=e.children();if(!n)return!1;if(n.next(),e=n.next(),!e)return!1;if(e=e.children().next(),!e)return!1;const o=e.children().next();return!!o&&o instanceof Et}function Vt(t){if(t)for(const e of(0,Z.toArray)(t.children()))if(e instanceof D.Widget&&e.id.startsWith("LinkedOutputView-"))for(const t of(0,Z.toArray)(e.children()))for(const e of(0,Z.toArray)(t.children()))if(Jt(e))return!0;return!1}function Kt(t){return!!t&&(t instanceof Bt.CodeCell&&Jt(t.outputArea))}async function Yt(t,e,n){t.addItem({command:lt,selector:".jp-GQuant"}),t.addItem({command:"docmanager:save",selector:".jp-GQuant"}),t.addItem({command:"filebrowser:download",selector:".jp-GQuant"}),t.addItem({command:X,selector:".jp-GQuant"}),t.addItem({command:ot,selector:".jp-GQuant"}),t.addItem({command:at,selector:".jp-GQuant"}),t.addItem({command:ut,selector:".jp-GQuant"}),t.addItem({type:"separator",selector:".jp-GQuant"});const o=new D.Menu({commands:e});o.title.label="Add Nodes",o.title.mnemonic=4;const a={},s=await m("all_nodes");for(const t in s){const i=t.split(".");let r=null;for(let t=0;t<i.length;t++){const n=i.slice(0,t+1).join(".");n in a?r=a[n]:(r=new D.Menu({commands:e}),r.title.label=i[t],r.title.mnemonic=0,a[n]=r,t>0?a[i.slice(0,t).join(".")].addItem({type:"submenu",submenu:r}):o.addItem({type:"submenu",submenu:r}))}for(let e=0;e<s[t].length;e++){const o={name:s[t][e].type,node:s[t][e]};r.addItem({command:ht,args:o}),n&&n.addItem({command:ht,category:"Add New Nodes",args:o})}}t.addItem({type:"submenu",submenu:o,selector:".jp-GQuant"}),t.addItem({type:"separator",selector:".jp-GQuant"}),t.addItem({command:gt,selector:".jp-GQuant"}),t.addItem({command:ft,selector:".jp-GQuant"}),t.addItem({command:Ct,selector:".jp-GQuant"}),t.addItem({type:"separator",selector:".jp-GQuant"});const i=new D.Menu({commands:e});return i.title.label="Change Aspect Ratio",i.title.mnemonic=0,[.3,.5,.7,1].forEach((t=>{i.addItem({command:mt,args:{aspect:t}})})),t.addItem({type:"submenu",submenu:i,selector:".jp-GQuant"}),m("register_plugins").then((t=>{console.log(t.validation);for(const o in t.validation)e=o,n=new Function("required","outputs",t.validation[o]),q[e]=n;var e,n;for(const e in t.display)k(e,new Function("metaObj",t.display[e]))})),o}const Zt=[{id:"gquantlab-extension",requires:[s.IFileBrowserFactory,a.ILayoutRestorer,r.IMainMenu,f.ICommandPalette,Mt.INotebookTracker],optional:[i.ILauncher],autoStart:!0,activate:async function(t,e,n,o,a,i,r){const d=new Dt({name:zt,fileTypes:["gq.yaml"],defaultFor:["gq.yaml"],toolbarFactory:e=>(e.contentHandler.commandRegistry=t.commands,[{name:"layout",widget:new f.ToolbarButton({className:"myButton",icon:Qt,onClick:()=>{e.contentHandler.reLayoutSignal.emit()},tooltip:"Taskgraph Nodes Auto Layout"})},{name:"download",widget:new f.ToolbarButton({className:"myButton",icon:A.downloadIcon,onClick:()=>{t.commands.execute("filebrowser:download")},tooltip:"Download the TaskGraph"})},{name:"save",widget:new f.ToolbarButton({className:"myButton",icon:A.saveIcon,onClick:()=>{t.commands.execute("docmanager:save")},tooltip:"Save the TaskGraph"})},{name:"notebook",widget:new f.ToolbarButton({className:"myButton",icon:A.notebookIcon,onClick:()=>{t.commands.execute(ct)},tooltip:"Convert TaskGraph to Notebook"})},{name:"editor",widget:new f.ToolbarButton({className:"myButton",icon:A.editIcon,onClick:()=>{t.commands.execute(lt)},tooltip:"Open Task Node Editor"})},{name:"add",widget:new f.ToolbarButton({className:"myButton",icon:A.addIcon,onClick:()=>{t.commands.execute(at)},tooltip:"Import a TaskGraph from file"})}])}),{commands:l}=t,c=new f.WidgetTracker({namespace:"gquant"});n.restore(c,{command:"docmanager:open",args:t=>({path:t.context.path,factory:zt}),name:t=>t.context.path}),d.widgetCreated.connect(((t,e)=>{e.title.icon=Pt,e.context.pathChanged.connect((()=>{c.save(e)})),c.add(e)})),t.docRegistry.addWidgetFactory(d),t.docRegistry.addFileType({name:"gq.yaml",displayName:"TaskGraph",mimeTypes:["application/gq.yaml"],extensions:[".gq.yaml"],icon:Pt,fileFormat:"text"}),function(t,e,n,o,a,i,r){function d(){return i()||a()}t.addCommand(X,{label:"Create Taskgraph from this Cell",caption:"Create Taskgraph from this Cell",icon:Pt,execute:()=>(async o=>{const a=await t.execute("docmanager:new-untitled",{path:o,type:"file",ext:".gq.yaml"}),s=n().contentHandler.privateCopy.get("value");a.content=x().safeDump(s),a.format="text",e.serviceManager.contents.save(a.path,a)})(o.defaultBrowser.model.path),isVisible:a}),t.addCommand(et,{label:"Select the file",caption:"Select the file",icon:A.folderIcon,execute:async t=>{let e=null;e=t&&"filter"in t?s.FileDialog.getOpenFiles({manager:o.defaultBrowser.model.manager,title:"Select the File",filter:e=>t.filter.some((t=>e.path.endsWith(t)))}):s.FileDialog.getOpenFiles({manager:o.defaultBrowser.model.manager,title:"Select the File"});const n=await e;if(n.button.accept){const t=n.value;if(1===t.length)return t[0]}}}),t.addCommand(nt,{label:"Select the Path",caption:"Select the Path",icon:A.folderIcon,execute:async()=>{const t=s.FileDialog.getExistingDirectory({manager:o.defaultBrowser.model.manager,title:"Select the Path"}),e=await t;if(e.button.accept){const t=e.value;if(1===t.length)return t[0]}}}),t.addCommand(xt,{label:"Create Customized Node",caption:"Create Customized Node",icon:A.folderIcon,execute:async n=>{const a=o.defaultBrowser.model.path,s=await t.execute("docmanager:new-untitled",{path:a,type:"file",ext:".py"}),i=`import gquant\nfrom gquant.dataframe_flow.portsSpecSchema import ConfSchema\nimport json\n\ndata = """${JSON.stringify({conf:n.conf},null,2)}\n"""\n\n\nclass ${n.nodeName}(gquant.plugin_nodes.util.CompositeNode):\n    def __init__(self, *args, **kwargs):\n        super().__init__(*args, **kwargs)\n        # modify the self.conf to the one that this Composite node wants\n        global data\n        node_conf = self.conf\n        data_obj = json.loads(data)\n        data_obj['conf']['subnodes_conf'].update(node_conf)\n        self.conf = data_obj['conf']\n\n    def conf_schema(self):\n        full_schema = super().conf_schema()\n        full_schema_json = full_schema.json\n        ui = full_schema.ui\n        json = {\n            "title": "${n.nodeName} configure",\n            "type": "object",\n            "description": "Enter your node description here",\n            "properties": {\n            }\n        }\n        item_dict = full_schema_json['properties']["subnodes_conf"]['properties']\n        for key in item_dict.keys():\n            json['properties'][key] = item_dict[key]\n        return ConfSchema(json=json, ui=ui)\n\n      `;s.content=i,s.format="text",e.serviceManager.contents.save(s.path,s)}}),t.addCommand(ot,{label:"Open TaskGraph file",caption:"Open TaskGraph file",icon:A.folderIcon,execute:async()=>{const t=s.FileDialog.getOpenFiles({manager:o.defaultBrowser.model.manager,filter:t=>t.path.endsWith(".gq.yaml")}),e=await t;if(e.button.accept){const t=e.value;if(1===t.length){const e={path:t[0].path},o=await m("load_graph_path",{body:JSON.stringify(e),method:"POST"});n().contentHandler.contentReset.emit(o)}}},isVisible:a}),t.addCommand(at,{label:"Import TaskGraph from file",caption:"Import TaskGraph from file",icon:A.addIcon,execute:async()=>{const t=s.FileDialog.getOpenFiles({manager:o.defaultBrowser.model.manager,filter:t=>t.path.endsWith(".gq.yaml")}),r=await t;if(r.button.accept){const t=r.value;if(1===t.length){const o={path:t[0].path},s=await m("load_graph_path",{body:JSON.stringify(o),method:"POST"});a()?n().contentHandler.includeContent.emit(s):i()&&e.shell.currentWidget.contentHandler.includeContent.emit(s)}}}}),t.addCommand(rt,{label:"Create an empty Taskgraph",caption:"Create an empty Taskgraph",execute:()=>(async n=>{const o=await t.execute("docmanager:new-untitled",{path:n,type:"file",ext:".gq.yaml"});o.content="",o.format="text",e.serviceManager.contents.save(o.path,o)})(o.defaultBrowser.model.path)}),t.addCommand(dt,{label:"TaskGraph",icon:Pt,caption:"Create a new task graph file",execute:()=>(async e=>{const n=await t.execute("docmanager:new-untitled",{path:e,type:"file",ext:".gq.yaml"});return t.execute("docmanager:open",{path:n.path,factory:zt})})(o.defaultBrowser.model.path)}),e.commands.addCommand(lt,{label:"Task Node Editor",caption:"Open the Task Node Editor",icon:A.editIcon,mnemonic:0,execute:()=>{if(a()){if(Kt(r.activeCell)){const t=n();let o=null;for(const n of(0,Z.toArray)(e.shell.widgets()))if(n instanceof Y&&n.handler===t.contentHandler){o=n;break}null===o?(o=new Y(t.contentHandler),o.id=o.id+_t(),e.shell.add(o,"main",{mode:"split-bottom"})):e.shell.activateById(o.id)}else if(Vt(e.shell.currentWidget)){const t=n();let o=null;for(const n of(0,Z.toArray)(e.shell.widgets()))if(n instanceof Y&&n.handler===t.contentHandler){o=n;break}null===o?(o=new Y(t.contentHandler),o.id=o.id+_t(),e.shell.add(o,"main",{mode:"split-bottom"})):e.shell.activateById(o.id)}}else{const t=e.shell.currentWidget;t.contentHandler.reLayoutSignal.emit();let n=null;for(const o of(0,Z.toArray)(e.shell.widgets()))if(o instanceof Y&&o.handler===t.contentHandler){n=o;break}null===n?(n=new Y(t.contentHandler),n.id=n.id+_t(),e.shell.add(n,"main",{mode:"split-bottom"})):e.shell.activateById(n.id)}},isVisible:d}),t.addCommand(ct,{label:"Convert TaskGraph to Notebook",caption:"Convert TaskGraph to Notebook",icon:A.notebookIcon,execute:async()=>{let s,r="";return a()&&(s=n(),r=JSON.stringify(s.contentHandler.privateCopy.get("value"))),i()&&(s=e.shell.currentWidget,r=JSON.stringify(x().safeLoad(s.contentHandler.context.model.toString()),null,2)),(async(n,a,s)=>{const i=await t.execute("docmanager:new-untitled",{type:"notebook"}),r=[],d={cells:[{cell_type:"code",execution_count:1,metadata:{},outputs:r,source:"# run this cell if you need Dask\nfrom dask_cuda import LocalCUDACluster\ncluster = LocalCUDACluster()\nfrom dask.distributed import Client\nclient = Client(cluster)\nclient\n"},{cell_type:"code",execution_count:2,metadata:{},outputs:r,source:a},{cell_type:"code",execution_count:3,metadata:{},outputs:r,source:"taskGraph.run(formated=True)"}],metadata:{kernelspec:{display_name:"Python 3",language:"python",name:"python3"}},nbformat:4,nbformat_minor:4};i.content=d,i.format="text";const l=await e.serviceManager.contents.save(i.path,i);o.defaultBrowser.model.manager.open(l.path)})(0,`import json\nfrom gquant.dataframe_flow import TaskGraph\nobj="""${r}"""\ntaskList=json.loads(obj)\ntaskGraph=TaskGraph(taskList)\ntaskGraph.draw()`)},isVisible:i}),t.addCommand(ht,{label:t=>"Add "+t.name,mnemonic:4,execute:t=>{a()?n().contentHandler.nodeAddedSignal.emit(t.node):e.shell.currentWidget.contentHandler.nodeAddedSignal.emit(t.node)},isVisible:d}),t.addCommand(ut,{label:"Taskgraph Nodes Auto Layout",caption:"Taskgraph Nodes Auto Layout",icon:Qt,mnemonic:0,execute:()=>{a()?(Kt(r.activeCell)||Vt(e.shell.currentWidget))&&n().contentHandler.reLayoutSignal.emit():e.shell.currentWidget.contentHandler.reLayoutSignal.emit()},isVisible:d}),t.addCommand(mt,{label:t=>"AspectRatio "+t.aspect.toString(),caption:"AspectRatio 1.0",mnemonic:14,execute:t=>{const e=n();e.contentHandler.aspectRatio=t.aspect,e.mimerenderWidgetUpdateSize()},isEnabled:a}),t.addCommand(gt,{label:"Run",caption:"Run",icon:Ft,mnemonic:0,execute:async()=>{if(a())if(Kt(r.activeCell)){const t=n();t.contentHandler.saveCache.emit(),t.contentHandler.runGraph.emit()}else if(Vt(e.shell.currentWidget)){const t=n();t.contentHandler.saveCache.emit(),t.contentHandler.runGraph.emit()}},isVisible:a}),t.addCommand(ft,{label:"Clean Result",caption:"Clean Result",icon:Ut,mnemonic:0,execute:async()=>{a()&&Kt(r.activeCell)&&n().contentHandler.cleanResult.emit()},isVisible:a}),t.addCommand(Ct,{label:"Add Output Collector",mnemonic:1,execute:()=>{const t={id:qt,width:160,type:Tt,conf:{},required:{},output_meta:[],outputs:[],schema:{},ui:{},inputs:[{name:"in1",type:[["any"]]}]};a()&&Kt(r.activeCell)&&n().contentHandler.nodeAddedSignal.emit(t),i()&&e.shell.currentWidget.contentHandler.nodeAddedSignal.emit(t)},isVisible:d}),t.addCommand(bt,{label:"Task Node Editor",caption:"Open the Task Node Editor",icon:A.editIcon,mnemonic:0,execute:t=>{e.commands.execute("docmanager:open",t)}})}(l,t,(function(){const e=t.shell.currentWidget;if(e)for(const t of(0,Z.toArray)(e.children()))if(t.id.startsWith("LinkedOutputView-"))for(const e of(0,Z.toArray)(t.children()))for(const t of(0,Z.toArray)(e.children())){const e=t;if(e&&e.widgets.length>0&&e.widgets[0].widgets.length>0&&e.widgets[0].widgets[0]instanceof Et)return e.widgets[0].widgets[0]}let n=i.activeCell.outputArea.widgets[0];const o=n.children();return o.next(),n=o.next(),n=n.children().next(),n.children().next()}),e,(function(){return!!Vt(t.shell.currentWidget)||null!==i.currentWidget&&i.currentWidget===t.shell.currentWidget}),(function(){return null!==c.currentWidget&&c.currentWidget===t.shell.currentWidget}),i),r&&r.add({command:dt,rank:1,category:"Other"});const h=Yt(t.contextMenu,l,a);if(o&&(o.fileMenu.newMenu.addGroup([{command:dt}],40),o.fileMenu.addGroup([{command:rt}],40),o.addMenu(await h,{rank:40})),a){const t={format:"YAML",label:"YAML",isPalette:!0};a.addItem({command:rt,category:"Notebook Operations",args:t}),a.addItem({command:ut,category:"GquantLab",args:t}),[.3,.5,.7,1].forEach((t=>{a.addItem({command:mt,category:"GquantLab",args:{aspect:t}})})),a.addItem({command:Ct,category:"Add New Nodes",args:t}),a.addItem({command:X,category:"GquantLab",args:t}),a.addItem({command:ft,category:"GquantLab",args:t}),a.addItem({command:gt,category:"GquantLab",args:t})}t.commands.addKeyBinding({command:ut,keys:["Alt A"],selector:".jp-GQuant"}),t.commands.addKeyBinding({command:Ct,keys:["Alt O"],selector:".jp-GQuant"}),t.commands.addKeyBinding({command:gt,keys:["Alt R"],selector:".jp-Notebook"}),t.commands.addKeyBinding({command:ft,keys:["Alt C"],selector:".jp-Notebook"}),t.commands.addKeyBinding({command:ut,keys:["Alt A"],selector:".jp-Notebook"}),t.commands.addKeyBinding({command:Ct,keys:["Alt O"],selector:".jp-Notebook"}),t.commands.addKeyBinding({command:gt,keys:["Alt R"],selector:".jp-LinkedOutputView"}),t.commands.addKeyBinding({command:ft,keys:["Alt C"],selector:".jp-LinkedOutputView"}),t.commands.addKeyBinding({command:ut,keys:["Alt A"],selector:".jp-LinkedOutputView"}),t.commands.addKeyBinding({command:Ct,keys:["Alt O"],selector:".jp-LinkedOutputView"}),t.contextMenu.addItem({command:ct,selector:".jp-GQuant"})}},{id:"gquantlab",requires:[s.IFileBrowserFactory,h.IJupyterWidgetRegistry],optional:[i.ILauncher],autoStart:!0,activate:function(t,e,n){Wt.apps=t,Wt.browserFactory=e,n.registerWidget({name:c,version:l,exports:o})}}]},28856:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var o=n(23645),a=n.n(o)()((function(t){return t[1]}));a.push([t.id,"@import url(//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css);"]),a.push([t.id,".tooltip {\n    position: fixed;\n    background-color: gray;\n}\n\n.confeditor {\n      text-align: left;\n      padding: 10px;\n      position: fixed;\n      background-color: yellowgreen;\n      opacity: 0;\n      left: 0;\n      top: 0;\n}\n\n.rungraph {\n    color: green;\n}\n",""]);const s=a}}]);