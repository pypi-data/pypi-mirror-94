
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>utool.util_ubuntu &#8212; wbia-vtool 3.0.1 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for utool.util_ubuntu</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span> <span class="n">unicode_literals</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="k">import</span> <span class="n">join</span><span class="p">,</span> <span class="n">splitext</span><span class="p">,</span> <span class="n">basename</span>
<span class="kn">from</span> <span class="nn">utool</span> <span class="k">import</span> <span class="n">util_inject</span>

<span class="nb">print</span><span class="p">,</span> <span class="n">rrr</span><span class="p">,</span> <span class="n">profile</span> <span class="o">=</span> <span class="n">util_inject</span><span class="o">.</span><span class="n">inject2</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="add_new_mimetype_association"><a class="viewcode-back" href="../../utool.html#utool.util_ubuntu.add_new_mimetype_association">[docs]</a><span class="k">def</span> <span class="nf">add_new_mimetype_association</span><span class="p">(</span><span class="n">ext</span><span class="p">,</span> <span class="n">mime_name</span><span class="p">,</span> <span class="n">exe_fpath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dry</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    TODO: move to external manager and generalize</span>

<span class="sd">    Args:</span>
<span class="sd">        ext (str): extension to associate</span>
<span class="sd">        mime_name (str): the name of the mime_name to create (defaults to ext)</span>
<span class="sd">        exe_fpath (str): executable location if this is for one specific file</span>

<span class="sd">    References:</span>
<span class="sd">        https://wiki.archlinux.org/index.php/Default_applications#Custom_file_associations</span>

<span class="sd">    Args:</span>
<span class="sd">        ext (str): extension to associate</span>
<span class="sd">        exe_fpath (str): executable location</span>
<span class="sd">        mime_name (str): the name of the mime_name to create (defaults to ext)</span>

<span class="sd">    CommandLine:</span>
<span class="sd">        python -m utool.util_ubuntu --exec-add_new_mimetype_association</span>
<span class="sd">        # Add ability to open ipython notebooks via double click</span>
<span class="sd">        python -m utool.util_ubuntu --exec-add_new_mimetype_association --mime-name=ipynb+json --ext=.ipynb --exe-fpath=/usr/local/bin/ipynb</span>
<span class="sd">        python -m utool.util_ubuntu --exec-add_new_mimetype_association --mime-name=ipynb+json --ext=.ipynb --exe-fpath=jupyter-notebook --force</span>

<span class="sd">        python -m utool.util_ubuntu --exec-add_new_mimetype_association --mime-name=sqlite --ext=.sqlite --exe-fpath=sqlitebrowser</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; # DISABLE_DOCTEST</span>
<span class="sd">        &gt;&gt;&gt; # SCRIPT</span>
<span class="sd">        &gt;&gt;&gt; from utool.util_ubuntu import *  # NOQA</span>
<span class="sd">        &gt;&gt;&gt; import utool as ut</span>
<span class="sd">        &gt;&gt;&gt; ext = ut.get_argval(&#39;--ext&#39;, type_=str, default=None)</span>
<span class="sd">        &gt;&gt;&gt; mime_name = ut.get_argval(&#39;--mime_name&#39;, type_=str, default=None)</span>
<span class="sd">        &gt;&gt;&gt; exe_fpath = ut.get_argval(&#39;--exe_fpath&#39;, type_=str, default=None)</span>
<span class="sd">        &gt;&gt;&gt; dry = not ut.get_argflag(&#39;--force&#39;)</span>
<span class="sd">        &gt;&gt;&gt; result = add_new_mimetype_association(ext, mime_name, exe_fpath, dry)</span>
<span class="sd">        &gt;&gt;&gt; print(result)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">utool</span> <span class="k">as</span> <span class="nn">ut</span>

    <span class="n">terminal</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">mime_codeblock</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">codeblock</span><span class="p">(</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="sd">        &lt;mime-info xmlns=&quot;http://www.freedesktop.org/standards/shared-mime-info&quot;&gt;</span>
<span class="sd">            &lt;mime-type type=&quot;application/x-{mime_name}&quot;&gt;</span>
<span class="sd">                &lt;glob-deleteall/&gt;</span>
<span class="sd">                &lt;glob pattern=&quot;*{ext}&quot;/&gt;</span>
<span class="sd">            &lt;/mime-type&gt;</span>
<span class="sd">        &lt;/mime-info&gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="nb">locals</span><span class="p">())</span>

    <span class="n">prefix</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">truepath</span><span class="p">(</span><span class="s1">&#39;~/.local/share&#39;</span><span class="p">)</span>
    <span class="n">mime_dpath</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="s1">&#39;mime/packages&#39;</span><span class="p">)</span>
    <span class="n">mime_fpath</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">mime_dpath</span><span class="p">,</span> <span class="s1">&#39;application-x-</span><span class="si">{mime_name}</span><span class="s1">.xml&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="nb">locals</span><span class="p">()))</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">mime_codeblock</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;---&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">mime_fpath</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;L___&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">exe_fpath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">exe_fname_noext</span> <span class="o">=</span> <span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">(</span><span class="n">exe_fpath</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">app_name</span> <span class="o">=</span> <span class="n">exe_fname_noext</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span>
        <span class="n">nice_name</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">app_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="n">app_codeblock</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">codeblock</span><span class="p">(</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            [Desktop Entry]</span>
<span class="sd">            Name={nice_name}</span>
<span class="sd">            Exec={exe_fpath}</span>
<span class="sd">            MimeType=application/x-{mime_name}</span>
<span class="sd">            Terminal={terminal}</span>
<span class="sd">            Type=Application</span>
<span class="sd">            Categories=Utility;Application;</span>
<span class="sd">            Comment=Custom App</span>
<span class="sd">            &quot;&quot;&quot;</span>
        <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="nb">locals</span><span class="p">())</span>
        <span class="n">app_dpath</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="s1">&#39;applications&#39;</span><span class="p">)</span>
        <span class="n">app_fpath</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">app_dpath</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{app_name}</span><span class="s1">.desktop&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="nb">locals</span><span class="p">()))</span>

        <span class="nb">print</span><span class="p">(</span><span class="n">app_codeblock</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;---&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">app_fpath</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;L___&#39;</span><span class="p">)</span>

    <span class="c1"># WRITE FILES</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">dry</span><span class="p">:</span>
        <span class="n">ut</span><span class="o">.</span><span class="n">ensuredir</span><span class="p">(</span><span class="n">mime_dpath</span><span class="p">)</span>
        <span class="n">ut</span><span class="o">.</span><span class="n">ensuredir</span><span class="p">(</span><span class="n">app_dpath</span><span class="p">)</span>

        <span class="n">ut</span><span class="o">.</span><span class="n">writeto</span><span class="p">(</span><span class="n">mime_fpath</span><span class="p">,</span> <span class="n">mime_codeblock</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">ut</span><span class="o">.</span><span class="n">NOT_QUIET</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">exe_fpath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ut</span><span class="o">.</span><span class="n">writeto</span><span class="p">(</span><span class="n">app_fpath</span><span class="p">,</span> <span class="n">app_codeblock</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">ut</span><span class="o">.</span><span class="n">NOT_QUIET</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

        <span class="c1"># UPDATE BACKENDS</span>

        <span class="c1"># ut.cmd(&#39;update-mime-database /usr/share/mime&#39;)</span>
        <span class="c1"># ~/.local/share/applications/mimeapps.list</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="n">ut</span><span class="o">.</span><span class="n">codeblock</span><span class="p">(</span>
                <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Run these commands:</span>
<span class="sd">            update-desktop-database ~/.local/share/applications</span>
<span class="sd">            update-mime-database ~/.local/share/mime</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">exe_fpath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ut</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s1">&#39;update-desktop-database ~/.local/share/applications&#39;</span><span class="p">)</span>
        <span class="n">ut</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s1">&#39;update-mime-database ~/.local/share/mime&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;dry_run&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="make_application_icon"><a class="viewcode-back" href="../../utool.html#utool.util_ubuntu.make_application_icon">[docs]</a><span class="k">def</span> <span class="nf">make_application_icon</span><span class="p">(</span><span class="n">exe_fpath</span><span class="p">,</span> <span class="n">dry</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="p">{}):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    CommandLine:</span>
<span class="sd">        python -m utool.util_ubuntu --exec-make_application_icon --exe=cockatrice --icon=/home/joncrall/code/Cockatrice/cockatrice/resources/cockatrice.png</span>
<span class="sd">        python -m utool.util_ubuntu --exec-make_application_icon --exe=cockatrice --icon=/home/joncrall/code/Cockatrice/cockatrice/resources/cockatrice.png</span>
<span class="sd">        python -m utool.util_ubuntu --exec-make_application_icon --exe=/opt/zotero/zotero --icon=/opt/zotero/chrome/icons/default/main-window.ico</span>

<span class="sd">        python -m utool.util_ubuntu --exec-make_application_icon --exe &quot;env WINEPREFIX=&quot;/home/joncrall/.wine&quot; wine C:\\\\windows\\\\command\\\\start.exe /Unix /home/joncrall/.wine32-dotnet45/dosdevices/c:/users/Public/Desktop/Hearthstone.lnk&quot; --path &quot;/home/joncrall/.wine/dosdevices/c:/Program Files (x86)/Hearthstone&quot;</span>
<span class="sd">        # Exec=env WINEPREFIX=&quot;/home/joncrall/.wine&quot; wine /home/joncrall/.wine/drive_c/Program\ Files\ \(x86\)/Battle.net/Battle.net.exe</span>

<span class="sd">        --icon=/opt/zotero/chrome/icons/default/main-window.ico</span>

<span class="sd">        python -m utool.util_ubuntu --exec-make_application_icon --exe=/home/joncrall/code/build-ArenaTracker-Desktop_Qt_5_6_1_GCC_64bit-Debug</span>

<span class="sd">        update-desktop-database ~/.local/share/applications</span>


<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; # DISABLE_DOCTEST</span>
<span class="sd">        &gt;&gt;&gt; from utool.util_ubuntu import *  # NOQA</span>
<span class="sd">        &gt;&gt;&gt; import utool as ut</span>
<span class="sd">        &gt;&gt;&gt; exe_fpath = ut.get_argval(&#39;--exe&#39;, default=&#39;cockatrice&#39;)</span>
<span class="sd">        &gt;&gt;&gt; icon = ut.get_argval(&#39;--icon&#39;, default=None)</span>
<span class="sd">        &gt;&gt;&gt; dry = not ut.get_argflag((&#39;--write&#39;, &#39;-w&#39;))</span>
<span class="sd">        &gt;&gt;&gt; props = {&#39;terminal&#39;: False, &#39;icon&#39;: icon}</span>
<span class="sd">        &gt;&gt;&gt; result = make_application_icon(exe_fpath, dry, props)</span>
<span class="sd">        &gt;&gt;&gt; print(result)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">utool</span> <span class="k">as</span> <span class="nn">ut</span>

    <span class="n">exe_fname_noext</span> <span class="o">=</span> <span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">(</span><span class="n">exe_fpath</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">app_name</span> <span class="o">=</span> <span class="n">exe_fname_noext</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span>
    <span class="n">nice_name</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">app_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;[Desktop Entry]&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Name=</span><span class="si">{nice_name}</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Exec=</span><span class="si">{exe_fpath}</span><span class="s1">&#39;</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="k">if</span> <span class="s1">&#39;mime_name&#39;</span> <span class="ow">in</span> <span class="n">props</span><span class="p">:</span>
        <span class="n">lines</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;MimeType=application/x-</span><span class="si">{mime_name}</span><span class="s1">&#39;</span><span class="p">]</span>

    <span class="k">if</span> <span class="s1">&#39;icon&#39;</span> <span class="ow">in</span> <span class="n">props</span><span class="p">:</span>
        <span class="n">lines</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;Icon=</span><span class="si">{icon}</span><span class="s1">&#39;</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">):</span>
        <span class="n">lines</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;Path=</span><span class="si">{path}</span><span class="s1">&#39;</span><span class="p">]</span>

    <span class="c1"># if props.get(&#39;comment&#39;):</span>
    <span class="c1">#     lines += [&#39;Path={comment}&#39;]</span>

    <span class="n">lines</span> <span class="o">+=</span> <span class="p">[</span>
        <span class="s1">&#39;Terminal=</span><span class="si">{terminal}</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Type=Application&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Categories=Utility;Application;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Comment=Custom App&#39;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="n">fmtdict</span> <span class="o">=</span> <span class="nb">locals</span><span class="p">()</span>
    <span class="n">fmtdict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">props</span><span class="p">)</span>

    <span class="n">prefix</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">truepath</span><span class="p">(</span><span class="s1">&#39;~/.local/share&#39;</span><span class="p">)</span>
    <span class="n">app_codeblock</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">fmtdict</span><span class="p">)</span>
    <span class="n">app_dpath</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="s1">&#39;applications&#39;</span><span class="p">)</span>
    <span class="n">app_fpath</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">app_dpath</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{app_name}</span><span class="s1">.desktop&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="nb">locals</span><span class="p">()))</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">app_codeblock</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;---&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">app_fpath</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;L___&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">dry</span><span class="p">:</span>
        <span class="n">ut</span><span class="o">.</span><span class="n">writeto</span><span class="p">(</span><span class="n">app_fpath</span><span class="p">,</span> <span class="n">app_codeblock</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">ut</span><span class="o">.</span><span class="n">NOT_QUIET</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">ut</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s1">&#39;update-desktop-database ~/.local/share/applications&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="XCtrl"><a class="viewcode-back" href="../../utool.html#utool.util_ubuntu.XCtrl">[docs]</a><span class="k">class</span> <span class="nc">XCtrl</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    xdotool key ctrl+shift+i</span>

<span class="sd">    References:</span>
<span class="sd">        http://superuser.com/questions/382616/detecting-currently-active-window</span>
<span class="sd">        http://askubuntu.com/questions/455762/xbindkeys-wont-work-properly</span>

<span class="sd">    Ignore:</span>
<span class="sd">        xdotool keyup --window 0 7 type --clearmodifiers ---window 0 &#39;%paste&#39;</span>

<span class="sd">        # List current windows:</span>
<span class="sd">        wmctrl  -l</span>

<span class="sd">        # Get current window</span>
<span class="sd">        xdotool getwindowfocus getwindowname</span>


<span class="sd">        #====</span>
<span class="sd">        # Get last opened window</span>
<span class="sd">        #====</span>

<span class="sd">        win_title=x-terminal-emulator.X-terminal-emulator</span>
<span class="sd">        key_ = &#39;x-terminal-emulator.X-terminal-emulator&#39;</span>

<span class="sd">        # Get all windows in current workspace</span>
<span class="sd">        workspace_number=`wmctrl -d | grep &#39;\*&#39; | cut -d&#39; &#39; -f 1`</span>
<span class="sd">        win_list=`wmctrl -lx | grep $win_title | grep &quot; $workspace_number &quot; | awk &#39;{print $1}&#39;`</span>

<span class="sd">        # Get stacking order of windows in current workspace</span>
<span class="sd">        win_order=$(xprop -root|grep &quot;^_NET_CLIENT_LIST_STACKING&quot; | tr &quot;,&quot; &quot; &quot;)</span>
<span class="sd">        echo $win_order</span>

<span class="sd">    CommandLine:</span>
<span class="sd">        python -m utool.util_ubuntu XCtrl</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; # DISABLE_DOCTEST</span>
<span class="sd">        &gt;&gt;&gt; # Script</span>
<span class="sd">        &gt;&gt;&gt; import utool as ut</span>
<span class="sd">        &gt;&gt;&gt; from utool import util_ubuntu</span>
<span class="sd">        &gt;&gt;&gt; orig_window = []</span>
<span class="sd">        &gt;&gt;&gt; ut.copy_text_to_clipboard(ut.lorium_ipsum())</span>
<span class="sd">        &gt;&gt;&gt; doscript = [</span>
<span class="sd">        &gt;&gt;&gt;     (&#39;focus&#39;, &#39;x-terminal-emulator.X-terminal-emulator&#39;),</span>
<span class="sd">        &gt;&gt;&gt;     (&#39;type&#39;, &#39;%paste&#39;),</span>
<span class="sd">        &gt;&gt;&gt;     (&#39;key&#39;, &#39;KP_Enter&#39;),</span>
<span class="sd">        &gt;&gt;&gt;    # (&#39;focus&#39;, &#39;GVIM&#39;)</span>
<span class="sd">        &gt;&gt;&gt; ]</span>
<span class="sd">        &gt;&gt;&gt; util_ubuntu.XCtrl.do(*doscript, sleeptime=.01)</span>

<span class="sd">    Ignore:</span>
<span class="sd">        &gt;&gt;&gt; ut.copy_text_to_clipboard(text)</span>
<span class="sd">        &gt;&gt;&gt; if &#39;\n&#39; in text or len(text) &gt; 20:</span>
<span class="sd">        &gt;&gt;&gt;     text = &#39;\&#39;%paste\&#39;&#39;</span>
<span class="sd">        &gt;&gt;&gt; else:</span>
<span class="sd">        &gt;&gt;&gt;     import pipes</span>
<span class="sd">        &gt;&gt;&gt;     text = pipes.quote(text.lstrip(&#39; &#39;))</span>
<span class="sd">        &gt;&gt;&gt;     (&#39;focus&#39;, &#39;GVIM&#39;),</span>
<span class="sd">        &gt;&gt;&gt; #</span>
<span class="sd">        &gt;&gt;&gt; doscript = [</span>
<span class="sd">        &gt;&gt;&gt;     (&#39;focus&#39;, &#39;x-terminal-emulator.X-terminal-emulator&#39;),</span>
<span class="sd">        &gt;&gt;&gt;     (&#39;type&#39;, text),</span>
<span class="sd">        &gt;&gt;&gt;     (&#39;key&#39;, &#39;KP_Enter&#39;),</span>
<span class="sd">        &gt;&gt;&gt; ]</span>
<span class="sd">        &gt;&gt;&gt; ut.util_ubuntu.XCtrl.do(*doscript, sleeptime=.01)</span>


<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># @staticmethod</span>
    <span class="c1"># def send_raw_key_input(keys):</span>
    <span class="c1">#     import utool as ut</span>
    <span class="c1">#     print(&#39;send key input: %r&#39; % (keys,))</span>
    <span class="c1">#     args = [&#39;xdotool&#39;, &#39;type&#39;, keys]</span>
    <span class="c1">#     ut.cmd(*args, quiet=True, silence=True)</span>

<div class="viewcode-block" id="XCtrl.move_window"><a class="viewcode-back" href="../../utool.html#utool.util_ubuntu.XCtrl.move_window">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">move_window</span><span class="p">(</span><span class="n">win_key</span><span class="p">,</span> <span class="n">bbox</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        CommandLine:</span>
<span class="sd">            # List windows</span>
<span class="sd">            wmctrl -l</span>
<span class="sd">            # List desktops</span>
<span class="sd">            wmctrl -d</span>

<span class="sd">            # Window info</span>
<span class="sd">            xwininfo -id 60817412</span>

<span class="sd">            python -m utool.util_ubuntu XCtrl.move_window joncrall 0+1920,680,400,600,400</span>
<span class="sd">            python -m utool.util_ubuntu XCtrl.move_window joncrall [0,0,1000,1000]</span>
<span class="sd">            python -m utool.util_ubuntu XCtrl.move_window GVIM special2</span>
<span class="sd">            python -m utool.util_ubuntu XCtrl.move_window joncrall special2</span>
<span class="sd">            python -m utool.util_ubuntu XCtrl.move_window x-terminal-emulator.X-terminal-emulator [0,0,1000,1000]</span>

<span class="sd">        # &gt;&gt;&gt; import utool as ut</span>
<span class="sd">        # &gt;&gt;&gt; from utool import util_ubuntu</span>
<span class="sd">        # &gt;&gt;&gt; orig_window = []</span>
<span class="sd">        # &gt;&gt;&gt; X = util_ubuntu.XCtrl</span>
<span class="sd">        win_key =  &#39;x-terminal-emulator.X-terminal-emulator&#39;</span>
<span class="sd">        win_id = X.findall_window_ids(key)[0]</span>

<span class="sd">        python -m utool.util_ubuntu XCtrl.findall_window_ids gvim --src</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">utool</span> <span class="k">as</span> <span class="nn">ut</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">wbia.plottool.screeninfo</span> <span class="k">as</span> <span class="nn">screeninfo</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">wbia.plottool.screeninfo</span> <span class="k">as</span> <span class="nn">screeninfo</span>
        <span class="n">monitor_infos</span> <span class="o">=</span> <span class="p">{</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span> <span class="n">screeninfo</span><span class="o">.</span><span class="n">get_resolution_info</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)}</span>
        <span class="c1"># TODO: cut out borders</span>
        <span class="c1"># TODO: fix screeninfo monitor offsets</span>
        <span class="c1"># TODO: dynamic num screens</span>
        <span class="k">def</span> <span class="nf">rel_to_abs_bbox</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot; monitor_num, relative x, y, w, h &quot;&quot;&quot;</span>
            <span class="n">minfo</span> <span class="o">=</span> <span class="n">monitor_infos</span><span class="p">[</span><span class="n">m</span><span class="p">]</span>
            <span class="c1"># print(&#39;minfo(%d) = %s&#39; % (m, ut.repr3(minfo),))</span>
            <span class="n">mx</span><span class="p">,</span> <span class="n">my</span> <span class="o">=</span> <span class="n">minfo</span><span class="p">[</span><span class="s1">&#39;off_x&#39;</span><span class="p">],</span> <span class="n">minfo</span><span class="p">[</span><span class="s1">&#39;off_y&#39;</span><span class="p">]</span>
            <span class="n">mw</span><span class="p">,</span> <span class="n">mh</span> <span class="o">=</span> <span class="n">minfo</span><span class="p">[</span><span class="s1">&#39;pixels_w&#39;</span><span class="p">],</span> <span class="n">minfo</span><span class="p">[</span><span class="s1">&#39;pixels_h&#39;</span><span class="p">]</span>
            <span class="c1"># Transform to the absolution position</span>
            <span class="n">abs_x</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">mw</span><span class="p">)</span> <span class="o">+</span> <span class="n">mx</span>
            <span class="n">abs_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">y</span> <span class="o">*</span> <span class="n">mh</span><span class="p">)</span> <span class="o">+</span> <span class="n">my</span>
            <span class="n">abs_w</span> <span class="o">=</span> <span class="n">w</span> <span class="o">*</span> <span class="n">mw</span>
            <span class="n">abs_h</span> <span class="o">=</span> <span class="n">h</span> <span class="o">*</span> <span class="n">mh</span>
            <span class="n">abs_bbox</span> <span class="o">=</span> <span class="p">[</span><span class="n">abs_x</span><span class="p">,</span> <span class="n">abs_y</span><span class="p">,</span> <span class="n">abs_w</span><span class="p">,</span> <span class="n">abs_h</span><span class="p">]</span>
            <span class="n">abs_bbox</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">abs_bbox</span><span class="p">)))</span>
            <span class="k">return</span> <span class="n">abs_bbox</span>

        <span class="k">if</span> <span class="n">win_key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;joncrall&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">bbox</span> <span class="o">==</span> <span class="s1">&#39;special2&#39;</span><span class="p">:</span>
            <span class="c1"># Specify the relative position</span>
            <span class="n">abs_bbox</span> <span class="o">=</span> <span class="n">rel_to_abs_bbox</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">win_key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;GVIM&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">bbox</span> <span class="o">==</span> <span class="s1">&#39;special2&#39;</span><span class="p">:</span>
            <span class="c1"># Specify the relative position</span>
            <span class="n">abs_bbox</span> <span class="o">=</span> <span class="n">rel_to_abs_bbox</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">abs_bbox</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">eval</span><span class="p">(</span><span class="n">bbox</span><span class="p">)))</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;MOVING: win_key = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">win_key</span><span class="p">,))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;TO: abs_bbox = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">abs_bbox</span><span class="p">,))</span>
        <span class="c1"># abs_bbox.replace(&#39;[&#39;, &#39;&#39;).replace(&#39;]&#39;, &#39;&#39;)</span>
        <span class="c1"># get = lambda cmd: ut.cmd2(&#39; &#39;.join([&quot;/bin/bash&quot;, &quot;-c&quot;, cmd]))[&#39;out&#39;]  # NOQA</span>
        <span class="n">win_id</span> <span class="o">=</span> <span class="n">XCtrl</span><span class="o">.</span><span class="n">find_window_id</span><span class="p">(</span><span class="n">win_key</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="s1">&#39;raise&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;MOVING: win_id = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">win_id</span><span class="p">,))</span>
        <span class="n">fmtdict</span> <span class="o">=</span> <span class="nb">locals</span><span class="p">()</span>
        <span class="n">cmd_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s1">&#39;wmctrl -ir </span><span class="si">{win_id}</span><span class="s1"> -b remove,maximized_horz&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">fmtdict</span><span class="p">)),</span>
            <span class="p">(</span><span class="s1">&#39;wmctrl -ir </span><span class="si">{win_id}</span><span class="s1"> -b remove,maximized_vert&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">fmtdict</span><span class="p">)),</span>
            <span class="p">(</span><span class="s1">&#39;wmctrl -ir </span><span class="si">{win_id}</span><span class="s1"> -e 0,</span><span class="si">{abs_bbox}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">fmtdict</span><span class="p">)),</span>
        <span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cmd_list</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">cmd</span> <span class="ow">in</span> <span class="n">cmd_list</span><span class="p">:</span>
            <span class="n">ut</span><span class="o">.</span><span class="n">cmd2</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span></div>

<div class="viewcode-block" id="XCtrl.findall_window_ids"><a class="viewcode-back" href="../../utool.html#utool.util_ubuntu.XCtrl.findall_window_ids">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">findall_window_ids</span><span class="p">(</span><span class="n">pattern</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        CommandLine:</span>
<span class="sd">            wmctrl  -l</span>
<span class="sd">            python -m utool.util_ubuntu XCtrl.findall_window_ids gvim --src</span>
<span class="sd">            python -m utool.util_ubuntu XCtrl.findall_window_ids gvim --src</span>
<span class="sd">            python -m utool.util_ubuntu XCtrl.findall_window_ids joncrall --src</span>

<span class="sd">        xprop -id</span>

<span class="sd">        wmctrl -l | awk &#39;{print $1}&#39; | xprop -id</span>

<span class="sd">        0x00a00007 | grep &quot;WM_CLASS(STRING)&quot;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">utool</span> <span class="k">as</span> <span class="nn">ut</span>

        <span class="n">cmdkw</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">silence</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;wmctrl -lx | grep &#39;</span><span class="si">%s</span><span class="s2">&#39; | awk &#39;{print $1}&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pattern</span><span class="p">,)</span>
        <span class="c1"># print(command)</span>
        <span class="n">winid_list</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="o">**</span><span class="n">cmdkw</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">winid_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">h</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">winid_list</span> <span class="k">if</span> <span class="n">h</span><span class="p">]</span>
        <span class="n">winid_list</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">winid_list</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">winid_list</span></div>

<div class="viewcode-block" id="XCtrl.sort_window_ids"><a class="viewcode-back" href="../../utool.html#utool.util_ubuntu.XCtrl.sort_window_ids">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">sort_window_ids</span><span class="p">(</span><span class="n">winid_list</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;mru&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Orders window ids by most recently used</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">utool</span> <span class="k">as</span> <span class="nn">ut</span>

        <span class="n">winid_order</span> <span class="o">=</span> <span class="n">XCtrl</span><span class="o">.</span><span class="n">sorted_window_ids</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
        <span class="n">sorted_win_ids</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">isect</span><span class="p">(</span><span class="n">winid_order</span><span class="p">,</span> <span class="n">winid_list</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sorted_win_ids</span></div>

<div class="viewcode-block" id="XCtrl.killold"><a class="viewcode-back" href="../../utool.html#utool.util_ubuntu.XCtrl.killold">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">killold</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">4</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Leaves no more than `num` instances of a program alive.  Ordering is</span>
<span class="sd">        determined by most recent usage.</span>

<span class="sd">        CommandLine:</span>
<span class="sd">            python -m utool.util_ubuntu XCtrl.killold gvim 2</span>

<span class="sd">        &gt;&gt;&gt; import utool as ut</span>
<span class="sd">        &gt;&gt;&gt; from utool import util_ubuntu</span>
<span class="sd">        &gt;&gt;&gt; XCtrl = util_ubuntu.XCtrl</span>
<span class="sd">        &gt;&gt;&gt; pattern = &#39;gvim&#39;</span>
<span class="sd">        &gt;&gt;&gt; num = 2</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">utool</span> <span class="k">as</span> <span class="nn">ut</span>

        <span class="n">cmdkw</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">silence</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
        <span class="n">winid_list</span> <span class="o">=</span> <span class="n">XCtrl</span><span class="o">.</span><span class="n">findall_window_ids</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span>
        <span class="n">winid_list</span> <span class="o">=</span> <span class="n">XCtrl</span><span class="o">.</span><span class="n">sort_window_ids</span><span class="p">(</span><span class="n">winid_list</span><span class="p">,</span> <span class="s1">&#39;mru&#39;</span><span class="p">)[</span><span class="n">num</span><span class="p">:]</span>
        <span class="n">output_lines</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">ut</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;wmctrl -lxp | awk &#39;{print $1 &quot; &quot; $3}&#39;&quot;&quot;&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">cmdkw</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">output_fields</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">output_lines</span><span class="p">]</span>
        <span class="n">output_fields</span> <span class="o">=</span> <span class="p">[(</span><span class="nb">int</span><span class="p">(</span><span class="n">wid</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">pid</span><span class="p">))</span> <span class="k">for</span> <span class="n">wid</span><span class="p">,</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">output_fields</span><span class="p">]</span>
        <span class="n">pid_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">pid</span> <span class="k">for</span> <span class="n">wid</span><span class="p">,</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">output_fields</span> <span class="k">if</span> <span class="n">wid</span> <span class="ow">in</span> <span class="n">winid_list</span><span class="p">]</span>
        <span class="kn">import</span> <span class="nn">psutil</span>

        <span class="k">for</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">pid_list</span><span class="p">:</span>
            <span class="n">proc</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">pid</span><span class="o">=</span><span class="n">pid</span><span class="p">)</span>
            <span class="n">proc</span><span class="o">.</span><span class="n">kill</span><span class="p">()</span></div>

<div class="viewcode-block" id="XCtrl.sorted_window_ids"><a class="viewcode-back" href="../../utool.html#utool.util_ubuntu.XCtrl.sorted_window_ids">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">sorted_window_ids</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="s1">&#39;mru&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns window ids orderd by criteria</span>
<span class="sd">        default is mru (most recently used)</span>

<span class="sd">        CommandLine:</span>
<span class="sd">            xprop -root | grep &quot;^_NET_CLIENT_LIST_STACKING&quot; | tr &quot;,&quot; &quot; &quot;</span>
<span class="sd">            python -m utool.util_ubuntu XCtrl.sorted_window_ids</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">utool</span> <span class="k">as</span> <span class="nn">ut</span>

        <span class="k">if</span> <span class="n">order</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;mru&#39;</span><span class="p">,</span> <span class="s1">&#39;lru&#39;</span><span class="p">]:</span>
            <span class="n">cmdkw</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">silence</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">winid_order_str</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span>
                <span class="s1">&#39;xprop -root | grep &quot;^_NET_CLIENT_LIST_STACKING&quot;&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">cmdkw</span>
            <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">winid_order</span> <span class="o">=</span> <span class="n">winid_order_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">winid_order</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">winid_order</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">order</span> <span class="o">==</span> <span class="s1">&#39;lru&#39;</span><span class="p">:</span>
                <span class="n">winid_order</span> <span class="o">=</span> <span class="n">winid_order</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">winid_order</span></div>

<div class="viewcode-block" id="XCtrl.find_window_id"><a class="viewcode-back" href="../../utool.html#utool.util_ubuntu.XCtrl.find_window_id">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">find_window_id</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;mru&#39;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="s1">&#39;raise&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        xprop -id 0x00a00007 | grep &quot;WM_CLASS(STRING)&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">utool</span> <span class="k">as</span> <span class="nn">ut</span>

        <span class="n">winid_candidates</span> <span class="o">=</span> <span class="n">XCtrl</span><span class="o">.</span><span class="n">findall_window_ids</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">winid_candidates</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">error</span> <span class="o">==</span> <span class="s1">&#39;raise&#39;</span><span class="p">:</span>
                <span class="n">available_windows</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">cmd2</span><span class="p">(</span><span class="s1">&#39;wmctrl -l&#39;</span><span class="p">)[</span><span class="s1">&#39;out&#39;</span><span class="p">]</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;No window matches pattern=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pattern</span><span class="p">,)</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">available windows are:</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">available_windows</span><span class="p">,)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">win_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">winid_candidates</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">win_id</span> <span class="o">=</span> <span class="n">winid_candidates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># print(&#39;Multiple (%d) windows matches pattern=%r&#39; % (</span>
            <span class="c1">#     len(winid_list), pattern,))</span>
            <span class="c1"># Find most recently used window with the focus name.</span>
            <span class="n">win_id</span> <span class="o">=</span> <span class="n">XCtrl</span><span class="o">.</span><span class="n">sort_window_ids</span><span class="p">(</span><span class="n">winid_candidates</span><span class="p">,</span> <span class="n">method</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">win_id</span></div>

<div class="viewcode-block" id="XCtrl.current_gvim_edit"><a class="viewcode-back" href="../../utool.html#utool.util_ubuntu.XCtrl.current_gvim_edit">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">current_gvim_edit</span><span class="p">(</span><span class="n">op</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="n">fpath</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        CommandLine:</span>
<span class="sd">            python -m utool.util_ubuntu XCtrl.current_gvim_edit sp ~/.bashrc</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">utool</span> <span class="k">as</span> <span class="nn">ut</span>

        <span class="n">fpath</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">unexpanduser</span><span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">truepath</span><span class="p">(</span><span class="n">fpath</span><span class="p">))</span>
        <span class="c1"># print(&#39;fpath = %r&#39; % (fpath,))</span>
        <span class="n">ut</span><span class="o">.</span><span class="n">copy_text_to_clipboard</span><span class="p">(</span><span class="n">fpath</span><span class="p">)</span>
        <span class="c1"># print(ut.get_clipboard())</span>
        <span class="n">doscript</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s1">&#39;focus&#39;</span><span class="p">,</span> <span class="s1">&#39;gvim&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;Escape&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;type2&#39;</span><span class="p">,</span> <span class="s1">&#39;;&#39;</span> <span class="o">+</span> <span class="n">op</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">fpath</span><span class="p">),</span>
            <span class="c1"># (&#39;type2&#39;, &#39;;&#39; + op + &#39; &#39;),</span>
            <span class="c1"># (&#39;key&#39;, &#39;ctrl+v&#39;),</span>
            <span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;KP_Enter&#39;</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="n">XCtrl</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="o">*</span><span class="n">doscript</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sleeptime</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span></div>

<div class="viewcode-block" id="XCtrl.copy_gvim_to_terminal_script"><a class="viewcode-back" href="../../utool.html#utool.util_ubuntu.XCtrl.copy_gvim_to_terminal_script">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">copy_gvim_to_terminal_script</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">return_to_win</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sleeptime</span><span class="o">=</span><span class="mf">0.02</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        import utool.util_ubuntu</span>
<span class="sd">        utool.util_ubuntu.XCtrl.copy_gvim_to_terminal_script(&#39;print(&quot;hi&quot;)&#39;, verbose=1)</span>
<span class="sd">        python -m utool.util_ubuntu XCtrl.copy_gvim_to_terminal_script &quot;echo hi&quot; 1 1</span>

<span class="sd">        If this doesn&#39;t work make sure pyperclip is installed and set to xsel</span>

<span class="sd">        print(&#39;foobar&#39;)</span>
<span class="sd">        echo hi</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Prepare to send text to xdotool</span>
        <span class="kn">import</span> <span class="nn">utool</span> <span class="k">as</span> <span class="nn">ut</span>
        <span class="kn">import</span> <span class="nn">utool.util_ubuntu</span>

        <span class="n">ut</span><span class="o">.</span><span class="n">copy_text_to_clipboard</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;text = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">text</span><span class="p">,))</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">get_clipboard</span><span class="p">())</span>

        <span class="kn">import</span> <span class="nn">re</span>

        <span class="n">terminal_pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;\|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="s1">&#39;terminal&#39;</span><span class="p">,</span>
                <span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="s1">&#39;terminator.Terminator&#39;</span><span class="p">),</span>  <span class="c1"># gtk3 terminator</span>
                <span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="s1">&#39;x-terminal-emulator.X-terminal-emulator&#39;</span><span class="p">),</span>  <span class="c1"># gtk2 terminator</span>
            <span class="p">]</span>
        <span class="p">)</span>

        <span class="c1"># Build xdtool script</span>
        <span class="n">doscript</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s1">&#39;remember_window_id&#39;</span><span class="p">,</span> <span class="s1">&#39;ACTIVE_WIN&#39;</span><span class="p">),</span>
            <span class="c1"># (&#39;focus&#39;, &#39;x-terminal-emulator.X-terminal-emulator&#39;),</span>
            <span class="p">(</span><span class="s1">&#39;focus&#39;</span><span class="p">,</span> <span class="n">terminal_pattern</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;ctrl+shift+v&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;KP_Enter&#39;</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
            <span class="c1"># Press enter twice for multiline texts</span>
            <span class="n">doscript</span> <span class="o">+=</span> <span class="p">[</span>
                <span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;KP_Enter&#39;</span><span class="p">),</span>
            <span class="p">]</span>

        <span class="k">if</span> <span class="n">return_to_win</span> <span class="o">==</span> <span class="s1">&#39;1&#39;</span><span class="p">:</span>
            <span class="n">doscript</span> <span class="o">+=</span> <span class="p">[</span>
                <span class="p">(</span><span class="s1">&#39;focus_id&#39;</span><span class="p">,</span> <span class="s1">&#39;$ACTIVE_WIN&#39;</span><span class="p">),</span>
            <span class="p">]</span>
        <span class="c1"># execute script</span>
        <span class="c1"># verbose = 1</span>
        <span class="n">utool</span><span class="o">.</span><span class="n">util_ubuntu</span><span class="o">.</span><span class="n">XCtrl</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="o">*</span><span class="n">doscript</span><span class="p">,</span> <span class="n">sleeptime</span><span class="o">=</span><span class="n">sleeptime</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span></div>

<div class="viewcode-block" id="XCtrl.do"><a class="viewcode-back" href="../../utool.html#utool.util_ubuntu.XCtrl.do">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">do</span><span class="p">(</span><span class="o">*</span><span class="n">cmd_list</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">utool</span> <span class="k">as</span> <span class="nn">ut</span>
        <span class="kn">import</span> <span class="nn">time</span>
        <span class="kn">import</span> <span class="nn">six</span>
        <span class="kn">import</span> <span class="nn">sys</span>

        <span class="n">verbose</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;verbose&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="n">orig_print</span> <span class="o">=</span> <span class="nb">globals</span><span class="p">()[</span><span class="s1">&#39;print&#39;</span><span class="p">]</span>
        <span class="nb">print</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">orig_print</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">))</span>
        <span class="c1"># print(&#39;Running xctrl.do script&#39;)</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Executing x do: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ut</span><span class="o">.</span><span class="n">repr4</span><span class="p">(</span><span class="n">cmd_list</span><span class="p">),))</span>
        <span class="n">debug</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">cmdkw</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">silence</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="c1"># http://askubuntu.com/questions/455762/xbindkeys-wont-work-properly</span>
        <span class="c1"># Make things work even if other keys are pressed</span>
        <span class="n">defaultsleep</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">sleeptime</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sleeptime&#39;</span><span class="p">,</span> <span class="n">defaultsleep</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>
        <span class="n">out</span><span class="p">,</span> <span class="n">err</span><span class="p">,</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s1">&#39;xset r off&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">cmdkw</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;----------&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;xset r off&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ret = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ret</span><span class="p">,))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;err = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">err</span><span class="p">,))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;out = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">out</span><span class="p">,))</span>

        <span class="n">memory</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">tmpverbose</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">count</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">cmd_list</span><span class="p">):</span>
            <span class="c1"># print(&#39;item = %r&#39; % (item,))</span>
            <span class="n">sleeptime</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sleeptime&#39;</span><span class="p">,</span> <span class="n">defaultsleep</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">tmpverbose</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;moving on&#39;</span><span class="p">)</span>
            <span class="n">tmpverbose</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">nocommand</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span>
            <span class="n">xcmd</span><span class="p">,</span> <span class="n">key_</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">)</span> <span class="ow">and</span> <span class="n">item</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;?&#39;</span><span class="p">):</span>
                    <span class="n">sleeptime</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">2</span><span class="p">][:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">tmpverbose</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;special command sleep&#39;</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;sleeptime = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sleeptime</span><span class="p">,))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">sleeptime</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

            <span class="k">if</span> <span class="n">xcmd</span> <span class="o">==</span> <span class="s1">&#39;focus&#39;</span><span class="p">:</span>
                <span class="n">key_</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">key_</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">key_</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;$&#39;</span><span class="p">):</span>
                    <span class="n">key_</span> <span class="o">=</span> <span class="n">memory</span><span class="p">[</span><span class="n">key_</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span>
                <span class="n">pattern</span> <span class="o">=</span> <span class="n">key_</span>
                <span class="n">win_id</span> <span class="o">=</span> <span class="n">XCtrl</span><span class="o">.</span><span class="n">find_window_id</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;mru&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">win_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;wmctrl&#39;</span><span class="p">,</span> <span class="s1">&#39;-xa&#39;</span><span class="p">,</span> <span class="n">pattern</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;wmctrl&#39;</span><span class="p">,</span> <span class="s1">&#39;-ia&#39;</span><span class="p">,</span> <span class="nb">hex</span><span class="p">(</span><span class="n">win_id</span><span class="p">)]</span>
            <span class="k">elif</span> <span class="n">xcmd</span> <span class="o">==</span> <span class="s1">&#39;focus_id&#39;</span><span class="p">:</span>
                <span class="n">key_</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">key_</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">key_</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;$&#39;</span><span class="p">):</span>
                    <span class="n">key_</span> <span class="o">=</span> <span class="n">memory</span><span class="p">[</span><span class="n">key_</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span>
                <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;wmctrl&#39;</span><span class="p">,</span> <span class="s1">&#39;-ia&#39;</span><span class="p">,</span> <span class="nb">hex</span><span class="p">(</span><span class="n">key_</span><span class="p">)]</span>
            <span class="k">elif</span> <span class="n">xcmd</span> <span class="o">==</span> <span class="s1">&#39;remember_window_id&#39;</span><span class="p">:</span>
                <span class="n">out</span><span class="p">,</span> <span class="n">err</span><span class="p">,</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s1">&#39;xdotool getwindowfocus&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">cmdkw</span><span class="p">)</span>
                <span class="n">memory</span><span class="p">[</span><span class="n">key_</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">out</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
                <span class="n">nocommand</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">args</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">elif</span> <span class="n">xcmd</span> <span class="o">==</span> <span class="s1">&#39;remember_window_name&#39;</span><span class="p">:</span>
                <span class="n">out</span><span class="p">,</span> <span class="n">err</span><span class="p">,</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s1">&#39;xdotool getwindowfocus getwindowname&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">cmdkw</span><span class="p">)</span>
                <span class="kn">import</span> <span class="nn">pipes</span>

                <span class="n">memory</span><span class="p">[</span><span class="n">key_</span><span class="p">]</span> <span class="o">=</span> <span class="n">pipes</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">out</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
                <span class="n">nocommand</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">args</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">elif</span> <span class="n">xcmd</span> <span class="o">==</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span>
                <span class="n">args</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="s1">&#39;xdotool&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;keyup&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;--window&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;0&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;7&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;type&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;--clearmodifiers&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;--window&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;0&#39;</span><span class="p">,</span>
                    <span class="nb">str</span><span class="p">(</span><span class="n">key_</span><span class="p">),</span>
                <span class="p">]</span>
            <span class="k">elif</span> <span class="n">xcmd</span> <span class="o">==</span> <span class="s1">&#39;type2&#39;</span><span class="p">:</span>
                <span class="kn">import</span> <span class="nn">pipes</span>

                <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;xdotool&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">pipes</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">key_</span><span class="p">))]</span>
            <span class="k">elif</span> <span class="n">xcmd</span> <span class="o">==</span> <span class="s1">&#39;xset-r-on&#39;</span><span class="p">:</span>
                <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;xset&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;on&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">xcmd</span> <span class="o">==</span> <span class="s1">&#39;xset-r-off&#39;</span><span class="p">:</span>
                <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;xset&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;off&#39;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;xdotool&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">xcmd</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">key_</span><span class="p">)]</span>

            <span class="k">if</span> <span class="n">verbose</span> <span class="ow">or</span> <span class="n">tmpverbose</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1"># Step </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">count</span><span class="p">,))</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">nocommand</span><span class="p">:</span>
                <span class="k">continue</span>
                <span class="c1"># print(&#39;args = %r -&gt; %s&#39; % (args, &#39; &#39;.join(args),))</span>
            <span class="c1"># print(&#39;args = %r&#39; % (args,))</span>
            <span class="n">out</span><span class="p">,</span> <span class="n">err</span><span class="p">,</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">cmdkw</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;---- &#39;</span> <span class="o">+</span> <span class="n">xcmd</span> <span class="o">+</span> <span class="s1">&#39; ------&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ret = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ret</span><span class="p">,))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;err = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">err</span><span class="p">,))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;out = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">out</span><span class="p">,))</span>

            <span class="k">if</span> <span class="n">sleeptime</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">sleeptime</span><span class="p">)</span>

        <span class="n">out</span><span class="p">,</span> <span class="n">err</span><span class="p">,</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s1">&#39;xset r on&#39;</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">silence</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;----------&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;xset r on&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ret = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ret</span><span class="p">,))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;err = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">err</span><span class="p">,))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;out = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">out</span><span class="p">,))</span></div>

<div class="viewcode-block" id="XCtrl.focus_window"><a class="viewcode-back" href="../../utool.html#utool.util_ubuntu.XCtrl.focus_window">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">focus_window</span><span class="p">(</span><span class="n">winhandle</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sleeptime</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        sudo apt-get install xautomation</span>
<span class="sd">        apt-get install autokey-gtk</span>

<span class="sd">        wmctrl -xa gnome-terminal.Gnome-terminal</span>
<span class="sd">        wmctrl -xl</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">utool</span> <span class="k">as</span> <span class="nn">ut</span>
        <span class="kn">import</span> <span class="nn">time</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;focus: &#39;</span> <span class="o">+</span> <span class="n">winhandle</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;wmctrl&#39;</span><span class="p">,</span> <span class="s1">&#39;-xa&#39;</span><span class="p">,</span> <span class="n">winhandle</span><span class="p">]</span>
        <span class="n">ut</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">sleeptime</span><span class="p">)</span></div></div>


<span class="n">xctrl</span> <span class="o">=</span> <span class="n">XCtrl</span>


<div class="viewcode-block" id="monitor_mouse"><a class="viewcode-back" href="../../utool.html#utool.util_ubuntu.monitor_mouse">[docs]</a><span class="k">def</span> <span class="nf">monitor_mouse</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    CommandLine:</span>
<span class="sd">        python -m utool.util_ubuntu monitor_mouse</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; # DISABLE_DOCTEST</span>
<span class="sd">        &gt;&gt;&gt; # SCRIPT</span>
<span class="sd">        &gt;&gt;&gt; from utool.util_ubuntu import *  # NOQA</span>
<span class="sd">        &gt;&gt;&gt; import utool as ut</span>
<span class="sd">        &gt;&gt;&gt; monitor_mouse()</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">utool</span> <span class="k">as</span> <span class="nn">ut</span>
    <span class="kn">import</span> <span class="nn">re</span>
    <span class="kn">import</span> <span class="nn">parse</span>

    <span class="n">mouse_ids</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s1">&#39;xinput --list &#39;</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">mouse_ids</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
    <span class="n">pattern</span> <span class="o">=</span> <span class="s1">&#39;mouse&#39;</span>
    <span class="n">pattern</span> <span class="o">=</span> <span class="s1">&#39;trackball&#39;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">grepres</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">greplines</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">),</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">reflags</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
    <span class="n">mouse_id</span> <span class="o">=</span> <span class="n">parse</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{left}</span><span class="s1">id=</span><span class="si">{id}{right}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">grepres</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mouse_id = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">mouse_id</span><span class="p">,))</span>
    <span class="kn">import</span> <span class="nn">time</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">ut</span><span class="o">.</span><span class="n">cmd</span><span class="p">(</span><span class="s1">&#39;xinput --query-state &#39;</span> <span class="o">+</span> <span class="n">mouse_id</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">out</span><span class="p">)</span></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    CommandLine:</span>
<span class="sd">        python -m utool.util_ubuntu</span>
<span class="sd">        python -m utool.util_ubuntu --allexamples</span>
<span class="sd">        python -m utool.util_ubuntu --allexamples --noface --nosrc</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">multiprocessing</span>

    <span class="n">multiprocessing</span><span class="o">.</span><span class="n">freeze_support</span><span class="p">()</span>  <span class="c1"># for win32</span>
    <span class="kn">import</span> <span class="nn">utool</span> <span class="k">as</span> <span class="nn">ut</span>  <span class="c1"># NOQA</span>

    <span class="n">ut</span><span class="o">.</span><span class="n">doctest_funcs</span><span class="p">()</span>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">wbia-vtool</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../utool.html">utool package</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  <li><a href="../utool.html">utool</a><ul>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Wild Me.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>