

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>recipe &mdash; Recipe 0.14.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #4eb2cd" >
          

          
            <a href="../index.html" class="icon icon-home"> Recipe
          

          
          </a>

          
            
            
              <div class="version">
                0.14.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Getting Started</a></li>
</ul>
<p class="caption"><span class="caption-text">Key Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../concepts/overview.html">Overview of Recipe Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/ingredients.html">Ingredients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/shelves.html">Shelves</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/from_field_expression_config.html">Defining Shelves with Field Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/from_config.html">Defining Shelves from configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/using_from_config.html">Using Shelves from configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extensions/intro_to_extensions.html">Using Extensions</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../advanced/settings.html">Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/ovens.html">Ovens</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/hooks.html">Hooks</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API</a></li>
</ul>
<p class="caption"><span class="caption-text">Contributing to Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/oven_drivers.html">Custom Oven Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/dynamic_extensions.html">Dynamic Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Recipe</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>recipe</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/reference/recipe.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="recipe">
<h1>recipe<a class="headerlink" href="#recipe" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>Recipe<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<dl class="py exception">
<dt>
<em class="property">exception </em><code class="sig-prename descclassname">recipe.</code><code class="sig-name descname">BadIngredient</code><a class="reference internal" href="../_modules/recipe/exceptions.html#BadIngredient"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Something is wrong with an ingredient</p>
</dd></dl>

<dl class="py exception">
<dt>
<em class="property">exception </em><code class="sig-prename descclassname">recipe.</code><code class="sig-name descname">BadRecipe</code><a class="reference internal" href="../_modules/recipe/exceptions.html#BadRecipe"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Something is wrong with a recipe</p>
</dd></dl>

<dl class="py class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">recipe.</code><code class="sig-name descname">Ingredient</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/ingredients.html#Ingredient"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Ingredients combine to make a SQLAlchemy query.</p>
<p>Any unknown keyword arguments provided to an Ingredient
during initializatino are stored in a meta object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># icon is an unknown keyword argument</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">Metric</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">MyTable</span><span class="o">.</span><span class="n">sales</span><span class="p">),</span> <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;cog&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">icon</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s1">&#39;cog&#39;</span>
</pre></div>
</div>
<p>This meta storage can be used to add new capabilities to
ingredients.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – An id to identify this Ingredient. If ingredients are
added to a Shelf, the id is automatically set as the key in
the shelf.</p></li>
<li><p><strong>columns</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">ColumnElement</span></code>) – A list of SQLAlchemy columns to use in a query select.</p></li>
<li><p><strong>filters</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">BinaryExpression</span></code>) – A list of SQLAlchemy BinaryExpressions to use in the
.filter() clause of a query.</p></li>
<li><p><strong>havings</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">BinaryExpression</span></code>) – A list of SQLAlchemy BinaryExpressions to use in the
.having() clause of a query.</p></li>
<li><p><strong>columns</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">ColumnElement</span></code>) – A list of SQLAlchemy columns to use in the <cite>group_by</cite> clause
of a query.</p></li>
<li><p><strong>formatters</strong> – (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">callable</span></code>):
A list of callables to apply to the result values.
If formatters exist, property <cite>{ingredient.id}_raw</cite> will
exist on each result row containing the unformatted
value.</p></li>
<li><p><strong>cache_context</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – Extra context when caching this ingredient. DEPRECATED</p></li>
<li><p><strong>ordering</strong> (<cite>string</cite>, ‘asc’ or ‘desc’) – One of ‘asc’ or ‘desc’.  ‘asc’ is the default value.
The default ordering of this ingredient if it is
used in a <code class="docutils literal notranslate"><span class="pre">recipe.order_by</span></code>.
This is added to the ingredient when the ingredient is
used in a <code class="docutils literal notranslate"><span class="pre">recipe.order_by</span></code>.</p></li>
<li><p><strong>group_by_strategy</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – A strategy to use when preparing group_bys for the query
“labels” is the default strategy which will use the labels assigned to
each column.
“direct” will use the column expression directly. This alternative is
useful when there might be more than one column with the same label
being used in the query.</p></li>
<li><p><strong>quickselects</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of named filters) – A list of named filters that can be accessed through
<code class="docutils literal notranslate"><span class="pre">build_filter</span></code>. Named filters are dictionaries with
a <code class="docutils literal notranslate"><span class="pre">name</span></code> (:obj:str) property and a <code class="docutils literal notranslate"><span class="pre">condition</span></code> property
(<code class="xref py py-obj docutils literal notranslate"><span class="pre">BinaryExpression</span></code>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An Ingredient object.</p>
</dd>
</dl>
<dl class="py method">
<dt>
<code class="sig-name descname">build_filter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">operator</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/ingredients.html#Ingredient.build_filter"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Builds a filter based on a supplied value and optional operator. If
no operator is supplied an <code class="docutils literal notranslate"><span class="pre">in</span></code> filter will be used for a list and a
<code class="docutils literal notranslate"><span class="pre">eq</span></code> filter if we get a scalar value.</p>
<p><code class="docutils literal notranslate"><span class="pre">build_filter</span></code> is used by the AutomaticFilter extension.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul>
<li><p><strong>value</strong> – A value or list of values to operate against</p></li>
<li><p><strong>operator</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – An operator that determines the type of comparison
to do against value.</p>
<p>The default operator is ‘in’ if value is a list and
‘eq’ if value is a string, number, boolean or None.</p>
</li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Filter object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<em class="property">property </em><code class="sig-name descname">cauldron_extras</code></dt>
<dd><p>Yield extra tuples containing a field name and a callable that takes
a row.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">describe</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/ingredients.html#Ingredient.describe"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>A string representation of the ingredient.</p>
</dd></dl>

<dl class="py method">
<dt>
<em class="property">property </em><code class="sig-name descname">expression</code></dt>
<dd><p>An accessor for the SQLAlchemy expression representing this
Ingredient.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">make_column_suffixes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/ingredients.html#Ingredient.make_column_suffixes"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Make sure we have the right column suffixes. These will be appended
to <cite>id</cite> when generating the query.</p>
<p>Developers note: These are generated when the query runs because the
recipe may be run with anonymization on or off, which will inject
a formatter.</p>
</dd></dl>

<dl class="py method">
<dt>
<em class="property">property </em><code class="sig-name descname">order_by_columns</code></dt>
<dd><p>Yield columns to be used in an order by using this ingredient. Column
ordering is in reverse order of columns</p>
</dd></dl>

<dl class="py method">
<dt>
<em class="property">property </em><code class="sig-name descname">query_columns</code></dt>
<dd><p>Yield labeled columns to be used as a select in a query.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">recipe.</code><code class="sig-name descname">Dimension</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">expression</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/ingredients.html#Dimension"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>A Dimension is an Ingredient that adds columns and groups by those
columns. Columns should be non-aggregate SQLAlchemy expressions.</p>
<p>The required expression supplies the dimension’s “value” role. Additional
expressions can be provided in keyword arguments with keys
that look like “{role}_expression”. The role is suffixed to the
end of the SQL column name.</p>
<p>For instance, the following</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Dimension</span><span class="p">(</span><span class="n">Hospitals</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
          <span class="n">latitude_expression</span><span class="o">=</span><span class="n">Hospitals</span><span class="o">.</span><span class="n">lat</span>
          <span class="n">longitude_expression</span><span class="o">=</span><span class="n">Hospitals</span><span class="o">.</span><span class="n">lng</span><span class="p">,</span>
          <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;hospital&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>would add columns named “hospital”, “hospital_latitude”, and
“hospital_longitude” to the recipes results. All three of these expressions
would be used as group bys.</p>
<p>Two special roles that can be added are “id” and “order_by”. If a keyword argument
“id_expression” is passed, this expression will appear first in the list of
columns and group_bys. This “id” will be used if you call <cite>build_filter</cite> on the
dimension.</p>
<p>If the keyword argument “order_by_expression” is passed, this expression will
appear last in the list of columns and group_bys.</p>
<p>The following additional keyword parameters are also supported:</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul>
<li><p><strong>lookup</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code>) – A dictionary that is used to map values to new values.</p>
<p>Note: Lookup adds a <code class="docutils literal notranslate"><span class="pre">formatter</span></code> callable as the first
item in the list of formatters.</p>
</li>
<li><p><strong>lookup_default</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code>) – A default to show if the value can’t be found in the
lookup dictionary.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Filter object</p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lookup</strong> – dict A dictionary to translate values into</p></li>
<li><p><strong>lookup_default</strong> – A default to show if the value can’t be found in the
lookup dictionary.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt>
<em class="property">property </em><code class="sig-name descname">cauldron_extras</code></dt>
<dd><p>Yield extra tuples containing a field name and a callable that takes
a row</p>
</dd></dl>

<dl class="py method">
<dt>
<em class="property">property </em><code class="sig-name descname">id_prop</code></dt>
<dd><p>The label of this dimensions id in the query columns</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">make_column_suffixes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/ingredients.html#Dimension.make_column_suffixes"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Make sure we have the right column suffixes. These will be appended
to <cite>id</cite> when generating the query.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">recipe.</code><code class="sig-name descname">LookupDimension</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">expression</span></em>, <em class="sig-param"><span class="n">lookup</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/ingredients.html#LookupDimension"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>DEPRECATED Returns the expression value looked up in a lookup dictionary</p>
</dd></dl>

<dl class="py class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">recipe.</code><code class="sig-name descname">IdValueDimension</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">id_expression</span></em>, <em class="sig-param"><span class="n">value_expression</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/ingredients.html#IdValueDimension"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>DEPRECATED: A convenience class for creating a Dimension
with a separate <code class="docutils literal notranslate"><span class="pre">id_expression</span></code>.  The following are identical.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="n">Dimension</span><span class="p">(</span><span class="n">Student</span><span class="o">.</span><span class="n">student_name</span><span class="p">,</span> <span class="n">id_expression</span><span class="o">=</span><span class="n">Student</span><span class="o">.</span><span class="n">student_id</span><span class="p">)</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">IdValueDimension</span><span class="p">(</span><span class="n">Student</span><span class="o">.</span><span class="n">student_id</span><span class="p">,</span> <span class="n">Student</span><span class="o">.</span><span class="n">student_name</span><span class="p">)</span>
</pre></div>
</div>
<p>The former approach is recommended.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id_expression</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">ColumnElement</span></code>) – A column expression that is used to identify the id
for a Dimension</p></li>
<li><p><strong>value_expression</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">ColumnElement</span></code>) – A column expression that is used to identify the value
for a Dimension</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">recipe.</code><code class="sig-name descname">Metric</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">expression</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/ingredients.html#Metric"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>A simple metric created from a single expression</p>
<dl class="py method">
<dt>
<code class="sig-name descname">build_filter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">operator</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/ingredients.html#Metric.build_filter"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Building filters with Metric returns Having objects.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">recipe.</code><code class="sig-name descname">DivideMetric</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">numerator</span></em>, <em class="sig-param"><span class="n">denominator</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/ingredients.html#DivideMetric"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>A metric that divides a numerator by a denominator handling several
possible error conditions</p>
<p>The default strategy is to add an small value to the denominator
Passing ifzero allows you to give a different value if the denominator is
zero.</p>
</dd></dl>

<dl class="py class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">recipe.</code><code class="sig-name descname">WtdAvgMetric</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">expression</span></em>, <em class="sig-param"><span class="n">weight_expression</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/ingredients.html#WtdAvgMetric"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>A metric that generates the weighted average of a metric by a weight.</p>
</dd></dl>

<dl class="py class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">recipe.</code><code class="sig-name descname">Filter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">expression</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/ingredients.html#Filter"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>A simple filter created from a single expression.</p>
<dl class="py method">
<dt>
<em class="property">property </em><code class="sig-name descname">expression</code></dt>
<dd><p>An accessor for the SQLAlchemy expression representing this
Ingredient.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">recipe.</code><code class="sig-name descname">Having</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">expression</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/ingredients.html#Having"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>A Having that limits results based on an aggregate boolean clause</p>
<dl class="py method">
<dt>
<em class="property">property </em><code class="sig-name descname">expression</code></dt>
<dd><p>An accessor for the SQLAlchemy expression representing this
Ingredient.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">recipe.</code><code class="sig-name descname">Recipe</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">shelf</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">metrics</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dimensions</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">filters</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">order_by</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">session</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">extension_classes</span><span class="o">=</span><span class="default_value">()</span></em>, <em class="sig-param"><span class="n">dynamic_extensions</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/core.html#Recipe"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>A tool for getting data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>shelf</strong> (<em>Shelf</em>) – A shelf to use for shared metrics</p></li>
<li><p><strong>metrics</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – A list of metrics to use from
the shelf. These can also be <a class="reference internal" href="../api.html#recipe.Metric" title="recipe.Metric"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Metric</span></code></a> objects.</p></li>
<li><p><strong>dimensions</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – A list of dimensions to use
from the shelf. These can also be <a class="reference internal" href="../api.html#recipe.Dimension" title="recipe.Dimension"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Dimension</span></code></a> objects.</p></li>
<li><p><strong>filters</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – A list of filters to use from
the shelf. These can also be <a class="reference internal" href="../api.html#recipe.Filter" title="recipe.Filter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Filter</span></code></a> objects.</p></li>
<li><p><strong>order_by</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – A list of dimension or
metric keys from the shelf to use for ordering. If prefixed by ‘-‘
the ordering will be descending.</p></li>
<li><p><strong>session</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Session</span></code>)</p></li>
<li><p><strong>extension_classes</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <a class="reference internal" href="../api.html#recipe.RecipeExtension" title="recipe.RecipeExtension"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RecipeExtension</span></code></a>) – Extensions to apply to this recipe.</p></li>
<li><p><strong>dynamic_extensions</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – Dynamic extensions to apply to this recipe.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Recipe object.</p>
</dd>
</dl>
<dl class="py method">
<dt>
<code class="sig-name descname">all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/core.html#Recipe.all"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Return a (potentially cached) list of result objects.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">as_table</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/core.html#Recipe.as_table"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Return an alias to a table</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">cache_prefix</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/core.html#Recipe.cache_prefix"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Set a cache prefix for recipe-caching to use</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">cache_region</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/core.html#Recipe.cache_region"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Set a cache region for recipe-caching to use</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">dimensions</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">dimensions</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/core.html#Recipe.dimensions"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Add a list of Dimension ingredients to the query. These can either be
Dimension objects or strings representing dimensions on the shelf.</p>
<p>The Dimension expression will be added to the query’s select statement
and to the group_by.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dimensions</strong> (<em>list</em>) – Dimensions to add to the recipe. Dimensions can
either be keys on the <code class="docutils literal notranslate"><span class="pre">shelf</span></code> or
Dimension objects</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">filters</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">filters</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/core.html#Recipe.filters"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Add a list of Filter ingredients to the query. These can either be
Filter objects or strings representing filters on the service’s shelf.
<code class="docutils literal notranslate"><span class="pre">.filters()</span></code> are additive, calling .filters() more than once will add
to the list of filters being used by the recipe.</p>
<p>The Filter expression will be added to the query’s where clause</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filters</strong> (<em>list</em>) – Filters to add to the recipe. Filters can
either be keys on the <code class="docutils literal notranslate"><span class="pre">shelf</span></code> or
Filter objects</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">first</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/core.html#Recipe.first"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Return the first element on the result</p>
</dd></dl>

<dl class="py method">
<dt>
<em class="property">classmethod </em><code class="sig-name descname">from_config</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">shelf</span></em>, <em class="sig-param"><span class="n">obj</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/core.html#Recipe.from_config"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Construct a Recipe from a plain Python dictionary.</p>
<p>Most of the directives only support named ingredients, specified as
strings, and looked up on the shelf. But filters can be specified as
objects.</p>
<p>Additionally, each RecipeExtension can extract and handle data from the
configuration.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">limit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">limit</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/core.html#Recipe.limit"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Limit the number of rows returned from the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>limit</strong> (<em>int</em>) – The number of rows to return in the recipe. 0 will
return all rows.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">metrics</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">metrics</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/core.html#Recipe.metrics"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Add a list of Metric ingredients to the query. These can either be
Metric objects or strings representing metrics on the shelf.</p>
<p>The Metric expression will be added to the query’s select statement.
The metric value is a property of each row of the result.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>metrics</strong> (<em>list</em>) – Metrics to add to the recipe. Metrics can
either be keys on the <code class="docutils literal notranslate"><span class="pre">shelf</span></code> or
Metric objects</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">offset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">offset</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/core.html#Recipe.offset"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Offset a number of rows before returning rows from the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>offset</strong> (<em>int</em>) – The number of rows to offset in the recipe. 0 will
return from the first available row</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">one</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/core.html#Recipe.one"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Return the first element on the result</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">order_by</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">order_bys</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/core.html#Recipe.order_by"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Apply an ordering to the recipe results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>order_bys</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – Order_bys to add to the recipe. Order_bys must
be keys of ingredients already added to the recipe. If the
key is prefixed by “-” the ordering will be descending.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">query</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/core.html#Recipe.query"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Generates a query using the ingredients supplied by the recipe.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A SQLAlchemy query</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">shelf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">shelf</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/core.html#Recipe.shelf"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Defines a shelf to use for this recipe</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">subquery</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/core.html#Recipe.subquery"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>The recipe’s query as a subquery suitable for use in joins or other
queries.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">to_sql</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/core.html#Recipe.to_sql"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>A string representation of the SQL this recipe will generate.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">total_count</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/core.html#Recipe.total_count"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Return the number of rows that would be returned by this Recipe,
ignoring any <cite>limit</cite> that has been applied.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>query</strong> – An optional SQLAlchemy query to calculate total_count for.
If None, the recipe query will be used.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A count of the number of rows that are returned by this query.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">use_cache</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/core.html#Recipe.use_cache"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>If False, invalidate the cache before fetching data.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">recipe.</code><code class="sig-name descname">Shelf</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/shelf.html#Shelf"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Holds ingredients used by a recipe.</p>
<p>Can be initialized with no arguments, but also accepts:
- a dictionary of ingredients as a positional argument
- ingredients as keyword arguments</p>
<p>These keyword arguments have special meaning:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>select_from</strong> – The SQLALchemy-compatible object which
will be queried (usually a Table or ORM object).</p></li>
<li><p><strong>table</strong> – Unused, but stored on the <cite>Meta</cite> attribute.</p></li>
<li><p><strong>metadata</strong> – Unused, but stored on the <cite>Meta</cite> attribute.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt>
<code class="sig-name descname">brew_query_parts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">order_by_keys</span><span class="o">=</span><span class="default_value">[]</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/shelf.html#Shelf.brew_query_parts"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Make columns, group_bys, filters, havings</p>
</dd></dl>

<dl class="py method">
<dt>
<em class="property">property </em><code class="sig-name descname">dimension_ids</code></dt>
<dd><p>Return the Dimensions on this shelf in the order in which
they were used.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">enchant</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">cache_context</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/shelf.html#Shelf.enchant"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Add any calculated values to each row of a resultset generating a
new namedtuple</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – a list of row results</p></li>
<li><p><strong>cache_context</strong> – optional extra context for caching</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list with ingredient.cauldron_extras added for all
ingredients</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<em class="property">property </em><code class="sig-name descname">filter_ids</code></dt>
<dd><p>Return the Metrics on this shelf in the order in which
they were used.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">find</code><span class="sig-paren">(</span><em class="sig-param">obj</em>, <em class="sig-param">filter_to_class=&lt;class 'recipe.ingredients.Ingredient'&gt;</em>, <em class="sig-param">constructor=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/shelf.html#Shelf.find"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Find an Ingredient, optionally using the shelf.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – A string or Ingredient</p></li>
<li><p><strong>filter_to_class</strong> – The Ingredient subclass that obj must be an
instance of</p></li>
<li><p><strong>constructor</strong> – An optional callable for building Ingredients
from obj</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An Ingredient of subclass <cite>filter_to_class</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<em class="property">classmethod </em><code class="sig-name descname">from_config</code><span class="sig-paren">(</span><em class="sig-param">obj</em>, <em class="sig-param">selectable</em>, <em class="sig-param">ingredient_constructor=&lt;function ingredient_from_validated_dict&gt;</em>, <em class="sig-param">metadata=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/shelf.html#Shelf.from_config"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Create a shelf using a dict shelf definition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – A Python dictionary describing a Shelf.</p></li>
<li><p><strong>selectable</strong> – A SQLAlchemy Table, a Recipe, a table name, or a
SQLAlchemy join to select from.</p></li>
<li><p><strong>metadata</strong> – If <cite>selectable</cite> is passed as a table name, then in
order to introspect its schema, we must have the SQLAlchemy
MetaData object to associate it with.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A shelf that contains the ingredients defined in obj.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<em class="property">classmethod </em><code class="sig-name descname">from_validated_yaml</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">yaml_str</span></em>, <em class="sig-param"><span class="n">selectable</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/shelf.html#Shelf.from_validated_yaml"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Create a shelf using a yaml shelf definition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>yaml_str</strong> – A string containing yaml ingredient definitions.</p></li>
<li><p><strong>selectable</strong> – A SQLAlchemy Table, a Recipe, or a SQLAlchemy
join to select from.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A shelf that contains the ingredients defined in yaml_str.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<em class="property">classmethod </em><code class="sig-name descname">from_yaml</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">yaml_str</span></em>, <em class="sig-param"><span class="n">selectable</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/shelf.html#Shelf.from_yaml"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Shim that calls from_validated_yaml.</p>
<p>This used to call a different implementation of yaml parsing</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">ingredients</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/shelf.html#Shelf.ingredients"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Return the ingredients in this shelf in a deterministic order</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/shelf.html#Shelf.items"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Return an iterator over the ingredient names and values.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/shelf.html#Shelf.keys"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Return an iterator over the ingredient keys.</p>
</dd></dl>

<dl class="py method">
<dt>
<em class="property">property </em><code class="sig-name descname">metric_ids</code></dt>
<dd><p>Return the Metrics on this shelf in the order in which
they were used.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">pop</code><span class="sig-paren">(</span><em class="sig-param">k</em>, <em class="sig-param">d=&lt;object object&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/shelf.html#Shelf.pop"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Pop an ingredient off of this shelf.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">values</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/shelf.html#Shelf.values"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Return an iterator over the ingredients.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt>
<code class="sig-prename descclassname">recipe.</code><code class="sig-name descname">AutomaticShelf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">table</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/shelf.html#AutomaticShelf"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Given a SQLAlchemy Table, automatically generate a Shelf with metrics
and dimensions based on its schema.</p>
</dd></dl>

<dl class="py class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">recipe.</code><code class="sig-name descname">Anonymize</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#Anonymize"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Allows recipes to be anonymized by adding an anonymize property.
This flips the anonymize flag on all Ingredients used in the recipe.</p>
<p>Injects an ingredient.meta._anonymize boolean property on each used
ingredient.</p>
<p>AnonymizeRecipe should occur last</p>
<dl class="py method">
<dt>
<code class="sig-name descname">add_ingredients</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#Anonymize.add_ingredients"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Put the anonymizers in the last position of formatters</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">anonymize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#Anonymize.anonymize"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Should this recipe be anonymized</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">recipe.</code><code class="sig-name descname">AutomaticFilters</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#AutomaticFilters"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Automatic generation and addition of Filters to a recipe.</p>
<p>Automatic filters take a dictionary of keys and values. For each key in
the dictionary, if the key is the id of a <code class="docutils literal notranslate"><span class="pre">Dimension</span></code> on the shelf,
a filter will be added to the recipe containing the values.</p>
<dl class="py method">
<dt>
<code class="sig-name descname">add_ingredients</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#AutomaticFilters.add_ingredients"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Add ingredients to the recipe</p>
<p>This method should be overridden by subclasses</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">apply_automatic_filters</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#AutomaticFilters.apply_automatic_filters"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Toggles whether automatic filters are applied to a recipe. The
following will disable automatic filters for this recipe:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">recipe</span><span class="o">.</span><span class="n">apply_automatic_filters</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">automatic_filters</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#AutomaticFilters.automatic_filters"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Sets a dictionary of automatic filters to apply to this recipe.
If your recipe uses a shelf that has dimensions ‘state’ and ‘gender’
you could filter the data to Men in California and New Hampshire with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shelf</span> <span class="o">=</span> <span class="n">Shelf</span><span class="p">({</span>
    <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="n">Dimension</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">state</span><span class="p">),</span>
    <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="n">Dimension</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">gender</span><span class="p">),</span>
    <span class="s1">&#39;population&#39;</span><span class="p">:</span> <span class="n">Metric</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">population</span><span class="p">)),</span>
<span class="p">})</span>
<span class="n">recipe</span> <span class="o">=</span> <span class="n">Recipe</span><span class="p">(</span><span class="n">shelf</span><span class="o">=</span><span class="n">shelf</span><span class="p">)</span>
<span class="n">recipe</span><span class="o">.</span><span class="n">dimensions</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">metrics</span><span class="p">(</span><span class="s1">&#39;population&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">automatic_filters</span><span class="p">({</span>
    <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;California&#39;</span><span class="p">,</span> <span class="s1">&#39;New Hampshire&#39;</span><span class="p">],</span>
    <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;M&#39;</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Automatic filter keys can optionally include an <code class="docutils literal notranslate"><span class="pre">operator</span></code>.</p>
<p><strong>List operators</strong></p>
<p>If the value provided in the automatic_filter dictionary is a list,
the following operators are available. The default operator is <code class="docutils literal notranslate"><span class="pre">in</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ow">in</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span>
<span class="n">notin</span>
<span class="n">quickselect</span> <span class="p">(</span><span class="n">applies</span> <span class="n">multiple</span> <span class="n">conditions</span> <span class="n">matching</span> <span class="n">the</span>
  <span class="n">named</span> <span class="n">quickselect</span><span class="p">,</span> <span class="n">quickselects</span> <span class="n">are</span> <span class="n">ORed</span> <span class="n">together</span><span class="p">)</span>
<span class="n">between</span> <span class="p">(</span><span class="n">requires</span> <span class="n">a</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">two</span> <span class="n">items</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Scalar operators</strong></p>
<p>If the value provided in the automatic_filter dictionary is a scalar
(a string, integer, or number), the following operators are available.
The default operator is <code class="docutils literal notranslate"><span class="pre">eq</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">eq</span> <span class="p">(</span><span class="n">equal</span><span class="p">)</span> <span class="p">(</span><span class="n">the</span> <span class="n">default</span><span class="p">)</span>
<span class="n">ne</span> <span class="p">(</span><span class="ow">not</span> <span class="n">equal</span><span class="p">)</span>
<span class="n">lt</span> <span class="p">(</span><span class="n">less</span> <span class="n">than</span><span class="p">)</span>
<span class="n">lte</span> <span class="p">(</span><span class="n">less</span> <span class="n">than</span> <span class="ow">or</span> <span class="n">equal</span><span class="p">)</span>
<span class="n">gt</span> <span class="p">(</span><span class="n">greater</span> <span class="n">than</span><span class="p">)</span>
<span class="n">gte</span> <span class="p">(</span><span class="n">greater</span> <span class="n">than</span> <span class="ow">or</span> <span class="n">equal</span><span class="p">)</span>
<span class="n">like</span> <span class="p">(</span><span class="n">SQL</span> <span class="n">LIKE</span><span class="p">)</span>
<span class="n">ilike</span> <span class="p">(</span><span class="n">Case</span> <span class="n">insensitive</span> <span class="n">LIKE</span><span class="p">)</span>
<span class="n">quickselect</span> <span class="p">(</span><span class="n">applies</span> <span class="n">the</span> <span class="n">condition</span> <span class="n">matching</span> <span class="n">the</span> <span class="n">named</span> <span class="n">quickselect</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>An example using operators</strong></p>
<p>Here’s an example that filters to states that start with the letters
A-C:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shelf</span> <span class="o">=</span> <span class="n">Shelf</span><span class="p">({</span>
    <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="n">Dimension</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">state</span><span class="p">),</span>
    <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="n">Dimension</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">gender</span><span class="p">),</span>
    <span class="s1">&#39;population&#39;</span><span class="p">:</span> <span class="n">Metric</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">population</span><span class="p">)),</span>
<span class="p">})</span>
<span class="n">recipe</span> <span class="o">=</span> <span class="n">Recipe</span><span class="p">(</span><span class="n">shelf</span><span class="o">=</span><span class="n">shelf</span><span class="p">)</span>
<span class="n">recipe</span><span class="o">.</span><span class="n">dimensions</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">metrics</span><span class="p">(</span><span class="s1">&#39;population&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">automatic_filters</span><span class="p">({</span>
    <span class="s1">&#39;state__lt&#39;</span><span class="p">:</span> <span class="s1">&#39;D&#39;</span>
<span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">exclude_automatic_filter_keys</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">keys</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#AutomaticFilters.exclude_automatic_filter_keys"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>A “blacklist” of automatic filter keys to exclude. The following will
cause <code class="docutils literal notranslate"><span class="pre">'state'</span></code> to be ignored if it is present in the
<code class="docutils literal notranslate"><span class="pre">automatic_filters</span></code> dictionary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">recipe</span><span class="o">.</span><span class="n">exclude_automatic_filter_keys</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">include_automatic_filter_keys</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">keys</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#AutomaticFilters.include_automatic_filter_keys"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>A “whitelist” of automatic filter keys to use. The following will
<strong>only use</strong> <code class="docutils literal notranslate"><span class="pre">'state'</span></code> for automatic filters regardless of what is
provided in the automatic_filters dictionary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">recipe</span><span class="o">.</span><span class="n">include_automatic_filter_keys</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">recipe.</code><code class="sig-name descname">BlendRecipe</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#BlendRecipe"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Add blend recipes, used for joining data from another table to a base
table</p>
<p>Supply a second recipe with a different <code class="docutils literal notranslate"><span class="pre">from</span></code>
Optionally supply join criteria, if no join criteria is provided join
will be attempted using constraints.
All ingredients from the blended recipe will be hoisted to the base
recipe except for ingredients that are used for joins (they must be the
same anyway).</p>
<p>Supports blend (inner) and full_blend (outer) joins.</p>
<dl class="py method">
<dt>
<code class="sig-name descname">add_ingredients</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#BlendRecipe.add_ingredients"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>If we have a blend_recipe, modify all ingredients in the base recipe
to group_by using the direct strategy. This is because when we join
the base recipe to the blend recipe we will likely have more than one column
that has the same label. This will generate invalid sql if a more explicit
reference isn’t used.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">blend</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">blend_recipe</span></em>, <em class="sig-param"><span class="n">join_base</span></em>, <em class="sig-param"><span class="n">join_blend</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#BlendRecipe.blend"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Blend a recipe into the base recipe.
This performs an inner join of the blend_recipe to the
base recipe’s SQL.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">full_blend</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">blend_recipe</span></em>, <em class="sig-param"><span class="n">join_base</span></em>, <em class="sig-param"><span class="n">join_blend</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#BlendRecipe.full_blend"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Blend a recipe into the base recipe preserving
values from both recipes.</p>
<p>This performs an outer join of the blend_recipe to the
base recipe.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">modify_postquery_parts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">postquery_parts</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#BlendRecipe.modify_postquery_parts"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Make the comparison recipe a subquery that is left joined to the
base recipe using dimensions that are shared between the recipes.</p>
<p>Hoist the metric from the comparison recipe up to the base query
while adding the suffix.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">recipe.</code><code class="sig-name descname">CompareRecipe</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#CompareRecipe"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Add compare recipes, used for presenting comparative context
vis-a-vis a base recipe.</p>
<p>Supply a second recipe with the same <code class="docutils literal notranslate"><span class="pre">`from</span></code>.
Metrics from the second recipe will be hoisted to the base recipe and
suffixed with a string (the default is “_compare”
Dimensions will be used to match the base recipe to the compare recipe.
Ordering from the base recipe is maintained.</p>
<dl class="py method">
<dt>
<code class="sig-name descname">add_ingredients</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#CompareRecipe.add_ingredients"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>If we have a compare_recipe, modify all ingredients in the base recipe
to group_by using the direct strategy. This is because when we join
the base recipe to the compare recipe we will likely have more than one column
that has the same label. This will generate invalid sql if a more explicit
reference isn’t used.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">compare</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">compare_recipe</span></em>, <em class="sig-param"><span class="n">suffix</span><span class="o">=</span><span class="default_value">'_compare'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#CompareRecipe.compare"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Adds a comparison recipe to a base recipe.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">modify_postquery_parts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">postquery_parts</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#CompareRecipe.modify_postquery_parts"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Make the comparison recipe a subquery that is left joined to the
base recipe using dimensions that are shared between the recipes.</p>
<p>Hoist the metric from the comparison recipe up to the base query
while adding the suffix.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">recipe.</code><code class="sig-name descname">RecipeExtension</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">recipe</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#RecipeExtension"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Recipe extensions plug into the recipe builder pattern and can modify the
generated query.</p>
<p>recipe generates a query in the following way</p>
<blockquote>
<div><p>(RECIPE) recipe checks if a query has been generated</p>
<p>(EXTENSIONS) all extension <code class="docutils literal notranslate"><span class="pre">add_ingredients</span></code> run to inject
ingredients directly on the recipe</p>
<p>(RECIPE) recipe runs gather_all_ingredients_into_cauldron to build a
global lookup for ingredients</p>
<p>(RECIPE) recipe runs cauldron.brew_query_parts to gather sqlalchemy
columns, group_bys and filters</p>
<p>(EXTENSIONS) all extension <code class="docutils literal notranslate"><span class="pre">modify_recipe_parts(recipeparts)</span></code> run to
directly modify the collected sqlalchemy columns, group_bys or filters</p>
<p>(RECIPE) recipe builds a preliminary query with columns</p>
<p>(EXTENSIONS) all extension <code class="docutils literal notranslate"><span class="pre">modify_prequery_parts(prequery_parts)</span></code>
run to modify the query</p>
<p>(RECIPE) recipe builds a full query with group_bys, order_bys,
and filters.</p>
<p>(RECIPE) recipe tests that this query only uses a single from</p>
<p>(EXTENSIONS) all extension <code class="docutils literal notranslate"><span class="pre">modify_postquery_parts(</span>
<span class="pre">postquery_parts)</span></code> run to modify the query</p>
<p>(RECIPE) recipe applies limits and offsets on the query</p>
<p>(RECIPE) recipe caches completed query</p>
</div></blockquote>
<p>When the recipe fetches data the results will be <code class="docutils literal notranslate"><span class="pre">enchanted</span></code> to add
fields to the result. <code class="docutils literal notranslate"><span class="pre">RecipeExtensions</span></code> can modify result rows with</p>
<blockquote>
<div><p>enchant_add_fields: Return a tuple of field names to add to a
result row</p>
<p>enchant_row(row): Return a tuple of field values for each row in
results.</p>
</div></blockquote>
<dl class="py method">
<dt>
<code class="sig-name descname">add_ingredients</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#RecipeExtension.add_ingredients"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Add ingredients to the recipe</p>
<p>This method should be overridden by subclasses</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">enchant_add_fields</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#RecipeExtension.enchant_add_fields"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>This method allows extensions to add fields to a result row.
Return a tuple of the field names that are being added with
this method</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">enchant_row</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">row</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#RecipeExtension.enchant_row"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>This method adds the fields named in <code class="docutils literal notranslate"><span class="pre">enchant_add_fields</span></code> to
each result row.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">modify_postquery_parts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">postquery_parts</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#RecipeExtension.modify_postquery_parts"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>This method allows extensions to directly modify query,
group_bys, filters, and order_bys generated from collected
ingredients after a final query using columns has been created.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">modify_prequery_parts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">prequery_parts</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#RecipeExtension.modify_prequery_parts"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>This method allows extensions to directly modify query,
group_bys, filters, and order_bys generated from collected
ingredients after a preliminary query using columns has been created.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">modify_recipe_parts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">recipe_parts</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#RecipeExtension.modify_recipe_parts"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Modify sqlalchemy components of the query</p>
<p>This method allows extensions to directly modify columns,
group_bys, filters, and order_bys generated from collected
ingredients.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">recipe.</code><code class="sig-name descname">Paginate</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#Paginate"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Allows recipes to paginate results. Pagination also supports
searching and sorting within paginated data.</p>
<p><strong>Using and controlling pagination</strong></p>
<p>Pagination returns pages of data using limit and offset.</p>
<p>Pagination is enabled by setting a nonzero page size, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shelf</span> <span class="o">=</span> <span class="n">Shelf</span><span class="p">({</span>
    <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="n">Dimension</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">state</span><span class="p">),</span>
    <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="n">Dimension</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">gender</span><span class="p">),</span>
    <span class="s1">&#39;population&#39;</span><span class="p">:</span> <span class="n">Metric</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">population</span><span class="p">)),</span>
<span class="p">})</span>
<span class="n">recipe</span> <span class="o">=</span> <span class="n">Recipe</span><span class="p">(</span><span class="n">shelf</span><span class="o">=</span><span class="n">shelf</span><span class="p">,</span> <span class="n">extension_classes</span><span class="o">=</span><span class="p">[</span><span class="n">Paginate</span><span class="p">])</span>            <span class="o">.</span><span class="n">dimensions</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span>            <span class="o">.</span><span class="n">metrics</span><span class="p">(</span><span class="s1">&#39;population&#39;</span><span class="p">)</span>            <span class="o">.</span><span class="n">pagination_page_size</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>Pagination may be disabled by setting <cite>.apply_pagination(False)</cite>.</p>
<p><strong>Searching</strong></p>
<p><cite>pagination_q</cite> allows a recipe to be searched for a string.
The default search fields are all dimensions used in the recipe.
Search keys can be customized with <cite>pagination_search_keys</cite>.
Search may be disabled by setting <cite>.apply_pagination_filters(False)</cite></p>
<p><strong>Sorting</strong></p>
<p>Pagination can override ordering applied to a recipe by setting
<cite>.pagination_order_by(…)</cite> to a list of ordering keys. If keys are
preceded by a “-“, ordering is descending, otherwise ordering is ascending.</p>
<p><strong>An example using all features</strong></p>
<p>Here’s an example that searches for keys that start with “t”, showing
the fifth page of results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shelf</span> <span class="o">=</span> <span class="n">Shelf</span><span class="p">({</span>
    <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="n">Dimension</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">state</span><span class="p">),</span>
    <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="n">Dimension</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">gender</span><span class="p">),</span>
    <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="n">Dimension</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">age</span><span class="p">),</span>
    <span class="s1">&#39;population&#39;</span><span class="p">:</span> <span class="n">Metric</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">population</span><span class="p">)),</span>
<span class="p">})</span>
<span class="n">recipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">recipe</span><span class="p">()</span>            <span class="o">.</span><span class="n">metrics</span><span class="p">(</span><span class="s2">&quot;pop2000&quot;</span><span class="p">)</span>            <span class="o">.</span><span class="n">dimensions</span><span class="p">(</span><span class="s2">&quot;state&quot;</span><span class="p">,</span> <span class="s2">&quot;sex&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">)</span>            <span class="o">.</span><span class="n">pagination_page_size</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>            <span class="o">.</span><span class="n">pagination_page</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>            <span class="o">.</span><span class="n">pagination_q</span><span class="p">(</span><span class="s1">&#39;t%&#39;</span><span class="p">)</span>            <span class="o">.</span><span class="n">pagination_search_keys</span><span class="p">(</span><span class="s2">&quot;state&quot;</span><span class="p">,</span> <span class="s2">&quot;sex&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will generate SQL like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">census</span><span class="o">.</span><span class="n">age</span> <span class="n">AS</span> <span class="n">age</span><span class="p">,</span>
       <span class="n">census</span><span class="o">.</span><span class="n">sex</span> <span class="n">AS</span> <span class="n">sex</span><span class="p">,</span>
       <span class="n">census</span><span class="o">.</span><span class="n">state</span> <span class="n">AS</span> <span class="n">state</span><span class="p">,</span>
       <span class="nb">sum</span><span class="p">(</span><span class="n">census</span><span class="o">.</span><span class="n">population</span><span class="p">)</span> <span class="n">AS</span> <span class="n">population</span>
<span class="n">FROM</span> <span class="n">census</span>
<span class="n">WHERE</span> <span class="n">lower</span><span class="p">(</span><span class="n">census</span><span class="o">.</span><span class="n">state</span><span class="p">)</span> <span class="n">LIKE</span> <span class="n">lower</span><span class="p">(</span><span class="s1">&#39;t%&#39;</span><span class="p">)</span>
  <span class="n">OR</span> <span class="n">lower</span><span class="p">(</span><span class="n">census</span><span class="o">.</span><span class="n">sex</span><span class="p">)</span> <span class="n">LIKE</span> <span class="n">lower</span><span class="p">(</span><span class="s1">&#39;t%&#39;</span><span class="p">)</span>
<span class="n">GROUP</span> <span class="n">BY</span> <span class="n">census</span><span class="o">.</span><span class="n">age</span><span class="p">,</span>
         <span class="n">census</span><span class="o">.</span><span class="n">sex</span><span class="p">,</span>
         <span class="n">census</span><span class="o">.</span><span class="n">state</span>
<span class="n">LIMIT</span> <span class="mi">10</span>
<span class="n">OFFSET</span> <span class="mi">40</span>
</pre></div>
</div>
<dl class="py method">
<dt>
<code class="sig-name descname">add_ingredients</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#Paginate.add_ingredients"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Apply pagination ordering and search to this query if necessary.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">apply_pagination</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#Paginate.apply_pagination"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Should this recipe be paginated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<em>bool</em>) – Enable or disable pagination for this recipe, default True</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">apply_pagination_filters</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#Paginate.apply_pagination_filters"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Should this recipe apply the paginations query filtering.</p>
<p>Should paginate_q be used to apply a search on paginate_search_keys or
all dimensions used in the recipe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<em>bool</em>) – Enable or disable pagination filtering for this recipe, default True</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">modify_postquery_parts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">postquery_parts</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#Paginate.modify_postquery_parts"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Apply validated pagination limits and offset to a completed query.</p>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">pagination_order_by</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#Paginate.pagination_order_by"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Sort this pagination by these keys. Pagination ordering is applied
before any other order_bys defined in the recipe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – A list of keys to order the paginated recipe by</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">pagination_page</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#Paginate.pagination_page"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Fetch this page.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<em>integer</em>) – A positive integer page number to fetch</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">pagination_page_size</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#Paginate.pagination_page_size"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Paginate recipe responses into pages of this size.</p>
<p>A page size of zero disasbles pagination.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<em>integer</em>) – A page size (zero or a positive integer)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">pagination_q</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#Paginate.pagination_q"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Search this recipe for this string. The search is an case
insensitive like that ORs all dimensions in the recipe by default.</p>
<p>To search for a substring, use a percentage sign for wildcard,
like ‘%searchval%’.</p>
<p><cite>pagination_search_keys</cite> can be used to customize what keys are used
for search.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<em>str</em>) – A query string to search for this in this recipe.
The query string is evaluated as a <cite>ilike</cite> on all dimensions
in the recipe or pagination_search_keys if provided</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">pagination_search_keys</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#Paginate.pagination_search_keys"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>When querying this recipe with a <cite>pagination_q</cite>, search these keys</p>
<p>pagination_search_keys do not have to be used in the recipe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – A list of keys to search in the paginated recipe</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt>
<code class="sig-name descname">validated_pagination</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#Paginate.validated_pagination"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Return pagination validated against the actual number of items in the
response.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="../api.html#recipe.BadRecipe" title="recipe.BadRecipe"><strong>BadRecipe</strong></a> – </p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">recipe.</code><code class="sig-name descname">SummarizeOver</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#SummarizeOver"><span class="viewcode-link">[source]</span></a></dt>
<dd><dl class="py method">
<dt>
<code class="sig-name descname">modify_postquery_parts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">postquery_parts</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/extensions.html#SummarizeOver.modify_postquery_parts"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Take a recipe that has dimensions
Resummarize it over one of the dimensions returning averages of the
metrics.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">recipe.</code><code class="sig-name descname">FakerAnonymizer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format_str</span></em>, <em class="sig-param"><span class="n">locale</span><span class="o">=</span><span class="default_value">'en_US'</span></em>, <em class="sig-param"><span class="n">postprocessor</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">providers</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/recipe/utils.html#FakerAnonymizer"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns a deterministically generated fake value that depends on the
input value.</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Chris Gemignani
      <span class="lastupdated">
        Last updated on May 04, 2020.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>