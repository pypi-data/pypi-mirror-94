(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{472:function(t,e,n){"use strict";n.r(e);var s={name:"gsrp5-o2mcalendar-view",props:["metas","meta","model","views","rel","mode","items","o2mfield","parent","root","guid","container"],data:()=>({focus:"",type:"month",typeToLabel:{month:"Month",week:"Week",day:"Day","4day":"4 Days"},start:null,end:null,selectedEvent:{},selectedElement:null,selectedOpen:!1,events:[],colors:["blue","indigo","deep-purple","cyan","green","orange","grey darken-1"],names:["Meeting","Holiday","PTO","Travel","Event","Birthday","Conference","Party"]}),computed:{title(){const{start:t,end:e}=this;if(!t||!e)return"";const n=this.monthFormatter(t),s=this.monthFormatter(e),a=n===s?"":s,o=t.year,i=e.year,r=o===i?"":i,l=t.day+this.nth(t.day),c=e.day+this.nth(e.day);switch(this.type){case"month":return`${n} ${o}`;case"week":case"4day":return`${n} ${l} ${o} - ${a} ${c} ${r}`;case"day":return`${n} ${l} ${o}`}return""},monthFormatter(){return this.$refs.calendar.getFormatter({timeZone:"UTC",month:"long"})}},created:function(){this.$websocket.registerComponent({n:`${this.$options.name}:${this._uid}`,c:this}),this.view=this.views.schedule,this.today=(new Date).toDateString()},mounted(){this.fields=Object.keys(this.view.columns),-1==this.fields.indexOf(this.meta.names.from_date)&&this.fields.push(this.meta.names.start_date),-1==this.fields.indexOf(this.meta.names.to_date)&&this.fields.push(this.meta.names.end_date),this.$refs.calendar.checkChange()},beforeDestroy:function(){this.$websocket.unregisterComponent(`${this.$options.name}:${this._uid}`)},methods:{viewDay({date:t}){this.focus=t,this.type="day"},getEventColor:t=>t.color,setToday(){this.focus=this.today},prev(){this.$refs.calendar.prev()},next(){this.$refs.calendar.next()},showEvent({nativeEvent:t,event:e}){const n=()=>{this.selectedEvent=e,this.selectedElement=t.target,setTimeout(()=>this.selectedOpen=!0,10)};this.selectedOpen?(this.selectedOpen=!1,setTimeout(n,10)):n(),t.stopPropagation()},updateRange({start:t,end:e}){const n=[],s=new Date(t.date+"T00:00:00"),a=new Date(e.date+"T23:59:59"),o=(a.getTime()-s.getTime())/864e5,i=this.rnd(o,o+20);for(let t=0;t<i;t++){const t=0===this.rnd(0,3),e=this.rnd(s.getTime(),a.getTime()),o=new Date(e-e%9e5),i=9e5*this.rnd(2,t?288:8),r=new Date(o.getTime()+i);n.push({name:this.names[this.rnd(0,this.names.length-1)],start:this.formatDate(o,!t),end:this.formatDate(r,!t),color:this.colors[this.rnd(0,this.colors.length-1)]})}this.start=t,this.end=e,this.events=n},nth:t=>t>3&&t<21?"th":["th","st","nd","rd","th","th","th","th","th","th"][t%10],rnd:(t,e)=>Math.floor((e-t+1)*Math.random())+t,formatDate:(t,e)=>e?`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()} ${t.getHours()}:${t.getMinutes()}`:`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`}},a=n(19),o=Object(a.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{staticClass:"fill-height"},[n("v-col",[n("v-sheet",{attrs:{height:"64"}},[n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"grey darken-2"},on:{click:t.setToday}},[t._v("\n          Today\n        ")]),t._v(" "),n("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:t.prev}},[n("v-icon",{attrs:{small:""}},[t._v("mdi-chevron-left")])],1),t._v(" "),n("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:t.next}},[n("v-icon",{attrs:{small:""}},[t._v("mdi-chevron-right")])],1),t._v(" "),n("v-toolbar-title",[t._v(t._s(t.title))]),t._v(" "),n("v-spacer"),t._v(" "),n("v-menu",{attrs:{bottom:"",right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[n("v-btn",t._g({attrs:{outlined:"",color:"grey darken-2"}},s),[n("span",[t._v(t._s(t.typeToLabel[t.type]))]),t._v(" "),n("v-icon",{attrs:{right:""}},[t._v("mdi-menu-down")])],1)]}}])},[t._v(" "),n("v-list",[n("v-list-item",{on:{click:function(e){t.type="day"}}},[n("v-list-item-title",[t._v("Day")])],1),t._v(" "),n("v-list-item",{on:{click:function(e){t.type="week"}}},[n("v-list-item-title",[t._v("Week")])],1),t._v(" "),n("v-list-item",{on:{click:function(e){t.type="month"}}},[n("v-list-item-title",[t._v("Month")])],1),t._v(" "),n("v-list-item",{on:{click:function(e){t.type="4day"}}},[n("v-list-item-title",[t._v("4 days")])],1)],1)],1)],1)],1),t._v(" "),n("v-sheet",{attrs:{height:"600"}},[n("v-calendar",{ref:"calendar",attrs:{color:"primary",events:t.events,"event-color":t.getEventColor,now:t.today,type:t.type},on:{"click:event":t.showEvent,"click:more":t.viewDay,"click:date":t.viewDay,change:t.updateRange},model:{value:t.focus,callback:function(e){t.focus=e},expression:"focus"}}),t._v(" "),n("v-menu",{attrs:{"close-on-content-click":!1,activator:t.selectedElement,"offset-x":""},model:{value:t.selectedOpen,callback:function(e){t.selectedOpen=e},expression:"selectedOpen"}},[n("v-card",{attrs:{color:"grey lighten-4","min-width":"350px",flat:""}},[n("v-toolbar",{attrs:{color:t.selectedEvent.color,dark:""}},[n("v-btn",{attrs:{icon:""}},[n("v-icon",[t._v("mdi-pencil")])],1),t._v(" "),n("v-toolbar-title",{domProps:{innerHTML:t._s(t.selectedEvent.name)}}),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""}},[n("v-icon",[t._v("mdi-heart")])],1),t._v(" "),n("v-btn",{attrs:{icon:""}},[n("v-icon",[t._v("mdi-dots-vertical")])],1)],1),t._v(" "),n("v-card-text",[n("span",{domProps:{innerHTML:t._s(t.selectedEvent.details)}})]),t._v(" "),n("v-card-actions",[n("v-btn",{attrs:{text:"",color:"secondary"},on:{click:function(e){t.selectedOpen=!1}}},[t._v("\n              Cancel\n            ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=o.exports}}]);