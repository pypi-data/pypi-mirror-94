(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{498:function(e,t,s){"use strict";s.r(t);var o={name:"gsrp5-login",mixins:[{methods:{send:s(10).C}}],data:function(){let e=window.location.host.split(":")[0]+":8100";return{uri:("https:"==window.location.protocol?"wss:":"ws:")+"/"+e+"/ws",slot:"test001",login:"admin",password:"admin",dialog:!0,e1:!0,formTitle:"Login"}},computed:{isConnected(){return this.$websocket.app._isConnected},isLogged:{get(){return this.$websocket.app._isLogged},set(e){this.$websocket.app._isLogged=e}},sessionId:{get(){return this.$websocket.app._sessionId},set(e){this.$websocket.app._sessionId=e}},lang(){return this.$websocket._lang},timezone(){return this.$websocket._timezone},exception:{get(){return this.$websocket._exception},set(e){this.$websocket._exception=e}},wsparams:{get(){return this.$websocket.app._wsparams},set(e){for(let t in e)this.$websocket.app._wsparams[t]=e[t]}}},methods:{on_connect(){this.send("on_getSlots",["_slots"])},on_getSlots(e){console.log("slots:",e)},connect(){this.$websocket.connect(this.uri)},signup(){this.send("on_open",["00000000000000000000000000000000","_open","gsrp5.user",{profile:this.slot}])},on_open(e){"string"==typeof e[0]&&(this.sessionId=e[0],this.send("on_login",["login",{user:this.login,password:this.password}]))},on_login(e){this.wsparams={url:this.url,slot:this.slot,login:this.login,password:this.password};let t=e[2].langs,s=e[2].country_names,o=e[2].country_timezones,n=e[2].preferences;for(let e=0;e<t.length;e++)this.$root.$refs.preferences.langs.push({lang:t[e].code,descr:t[e].description});for(let e in s)this.$root.$refs.preferences.countries.push({country:e,descr:s[e]});for(let e in o){this.$root.$refs.preferences.tzs[e]=[];for(let t=0;t<o[e].length;t++)this.$root.$refs.preferences.tzs[e].push({tz:o[e][t],descr:o[e][t]})}n.length>0&&(this.$root.$refs.preferences.preferences_id=n[0].id,this.$root.$refs.preferences.user_id=n[0].user_id.id,this.$root.$refs.preferences.lang_id=n[0].lang.id,this.$root.$refs.preferences.lang=n[0].lang.name,this.$root.$refs.preferences.country=n[0].country,this.$root.$refs.preferences.timezone=n[0].timezone),this.$root.user=e[1],this.isLogged=!0,this.$websocket.send({c:{handler:"APPLICATION",method:"on_loadmenu"},m:["uis","menu",{context:{}}]}),this.dialog=!1}},created(){this.$websocket.registerComponent({n:`${this.$options.name}:${this._uid}`,c:this})},beforeDestroy(){this.$websocket.unregisterComponent(`${this.$options.name}:${this._uid}`)}},n=s(19),i=Object(n.a)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-layout",{attrs:{row:"","align-center":"","justify-center":""}},[s("v-dialog",{attrs:{"max-width":"400px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-card",{staticClass:"elevation-12"},[s("v-card-title",[s("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),e._v(" "),s("v-card-text",[s("v-container",{attrs:{"grid-list-md":""}},[s("v-layout",{attrs:{column:""}},[s("v-text-field",{attrs:{label:"URI",required:"",readonly:e.isConnected},model:{value:e.uri,callback:function(t){e.uri=t},expression:"uri"}}),e._v(" "),e.isConnected?s("v-text-field",{attrs:{label:"Slot",required:""},model:{value:e.slot,callback:function(t){e.slot=t},expression:"slot"}}):e._e(),e._v(" "),e.isConnected?s("v-text-field",{attrs:{label:"Login",required:""},model:{value:e.login,callback:function(t){e.login=t},expression:"login"}}):e._e(),e._v(" "),e.isConnected?s("v-text-field",{attrs:{label:"Password",required:"",type:e.e1?"password":"text","append-icon":e.e1?"visibility":"visibility_off"},on:{"click:append":function(){return e.e1=!e.e1}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}):e._e()],1)],1)],1),e._v(" "),s("v-card-actions",[s("v-spacer"),e._v(" "),s("v-btn",{attrs:{color:"blue darken-1"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),e._v(" "),e.isConnected?e._e():s("v-btn",{attrs:{color:"blue darken-1"},nativeOn:{click:function(t){return e.connect(t)}}},[e._v("Connect")]),e._v(" "),e.isConnected?s("v-btn",{attrs:{color:"blue darken-1"},nativeOn:{click:function(t){return e.signup(t)}}},[e._v("Sign Up")]):e._e()],1)],1)],1)],1)}),[],!1,null,null,null);t.default=i.exports}}]);