(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{491:function(e,t,s){"use strict";s.r(t);var i=s(420),r=s.n(i),l={name:"gsrp5-o2mmdx-view",props:["metas","meta","model","views","rel","mode","items","o2mfield","parent","root","guid","container"],data:()=>({data:[],fields:[],colFields:[],rowFields:[],reducer:function(e,t){return e+1},selectionFrom:{},selectionFromForm:{},vfields:[],rfields:[],rfield:null,aggregates:[{text:"Count",value:"count"},{text:"Sum",value:"sum"},{text:"Average",value:"avg"},{text:"Min",value:"min"},{text:"Max",value:"max"}],aggregate:"sum",template:null}),components:{Pivot:r.a,PivotTable:r.a},watch:{rfield(e,t){switch(this.aggregate){case"count":this.$set(this,"reducer",new Function("sum","item","return sum + 1"));break;case"sum":this.$set(this,"reducer",new Function("sum","item","return sum + item."+this.rfield));break;case"avg":this.$set(this,"reducer",new Function("sum","item","return (sum + item."+this.rfield+")/2"));break;case"min":this.$set(this,"reducer",new Function("sum","item","return sum < item ? sum : item."+this.rfield));break;case"max":this.$set(this,"reducer",new Function("sum","item","return sum > item ? sum : item."+this.rfield))}},aggregate(e,t){switch(this.aggregate){case"count":this.$set(this,"reducer",new Function("sum","item","return sum + 1"));break;case"sum":this.$set(this,"reducer",new Function("sum","item","return sum + item."+this.rfield));break;case"avg":this.$set(this,"reducer",new Function("sum","item","return (sum + item."+this.rfield+")/2"));break;case"min":this.$set(this,"reducer",new Function("sum","item","return sum < item ? sum : item."+this.rfield));break;case"max":this.$set(this,"reducer",new Function("sum","item","return sum > item ? sum : item."+this.rfield))}}},mounted(){if(this.items.length>0){let e=[];for(let t=0;t<this.items.length;t++)e.push(this.items[t].__data__);this.$set(this,"data",e)}},created:function(){this.$websocket.registerComponent({n:`${this.$options.name}:${this._uid}`,c:this}),void 0!==this.views&&(this.view=this.views.mdx);let e=[],t=[];this.vfields=Object.keys(this.view.columns);for(let s=0;s<this.vfields.length;s++)switch(this.meta.columns[this.vfields[s]].type){case"char":case"varchar":this.vfields[s]==this.meta.names.rec_name?this.colFields.push({label:this.meta.columns[this.vfields[s]].label,getter:new Function("item","return item."+this.vfields[s])}):this.rowFields.push({label:this.meta.columns[this.vfields[s]].label,getter:new Function("item","return item."+this.vfields[s])});break;case"date":case"time":case"datatime":case"text":case"xml":this.rowFields.push({label:this.meta.columns[this.vfields[s]].label,getter:new Function("item","return item."+this.vfields[s])});break;case"many2one":case"related":this.rowFields.push({label:this.meta.columns[this.vfields[s]].label,getter:new Function("item","return item."+this.vfields[s]+".name")});break;case"selection":this.selectionFromForm[this.vfields[s]]={},t=this.meta.columns[this.vfields[s]].selections;for(let i=0;i<t.length;i++)e.push({text:t[i][1],value:t[i][0]}),this.selectionFromForm[this.vfields[s]][t[i][0]]=t[i][1];this.selectionFrom[this.vfields[s]]=e,this.rowFields.push({label:this.meta.columns[this.vfields[s]].label,getter:new Function("item","return item."+this.vfields[s])});break;case"integer":case"float":case"double":case"real":case"decimal":case"numeric":this.rfields.push(this.vfields[s]);break;default:this.rowFields.push({label:this.meta.columns[this.vfields[s]].label,getter:new Function("item","return item."+this.vfields[s])})}this.rfield=this.rfields[0],this.reducer=new Function("sum","item","return sum + item."+this.rfield)},beforeDestroy:function(){this.$websocket.unregisterComponent(`${this.$options.name}:${this._uid}`)}},a=s(19),n=Object(a.a)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-layout",{attrs:{row:""}},[s("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}}),e._v(" "),s("v-flex",{attrs:{xs2:"",sm2:"",md2:"",lg2:"",xl2:""}},[s("v-select",{attrs:{label:"Criteria",items:e.rfields},model:{value:e.rfield,callback:function(t){e.rfield=t},expression:"rfield"}})],1),e._v(" "),s("v-flex",{attrs:{xs1:"",sm1:"",md1:"",lg1:"",xl1:""}}),e._v(" "),s("v-flex",{attrs:{xs2:"",sm2:"",md2:"",lg2:"",xl2:""}},[s("v-select",{attrs:{label:"Aggregate",items:e.aggregates},model:{value:e.aggregate,callback:function(t){e.aggregate=t},expression:"aggregate"}})],1)],1),e._v(" "),s("pivot",{attrs:{data:e.data,fields:e.fields,"row-fields":e.rowFields,"col-fields":e.colFields,reducer:e.reducer}})],1)}),[],!1,null,null,null);t.default=n.exports}}]);