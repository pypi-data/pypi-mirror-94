(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{500:function(e,o,s){"use strict";s.r(o);var t=s(10),a={name:"gsrp5-upload",props:["model"],data:function(){return{dialog:!0}},watch:{dialog(e){e||this.close()}},mixins:[{methods:{send:t.C}}],methods:{close(){this.$destroy(),this.$el.remove()},upload(e){var o,s=e.target;if(s.files&&s.files[0]){o=s.files[0].name.split(".").pop().toLowerCase();var a=new FileReader;a.onload=e=>{switch(o){case"csv":o=Object(t.b)(e.target.result),this.send("on_do_upload",["models",this.model,"do_upload_csv",o]);break;case"json":o=JSON.parse(e.target.result),this.$websocket.send("on_do_upload",["models",this.model,"do_upload_json",o]);break;case"yaml":o=YAML.parse(e.target.result),this.send([this.on_do_upload,"models",this.model,"do_upload_yaml",o]);break;case"xlsx":let o=xlsxUpload(e.target.result);this.send([this.on_do_upload,"models",this.model,"do_upload_yaml",o])}},a.readAsText(s.files[0])}},on_do_upload(e){console.log("on_do_upload:",e),this.send(".ws-log",["_commit"]),this.dialog=!1}},created(){this.$websocket.registerComponent({n:`${this.$options.name}:${this._uid}`,c:this})},destroyed(){this.$websocket.unregisterComponent(`${this.$options.name}:${this._uid}`)}},l=s(19),d=Object(l.a)(a,(function(){var e=this,o=e.$createElement,s=e._self._c||o;return s("v-layout",{attrs:{row:"","justify-center":""}},[s("v-dialog",{attrs:{width:"600px"},model:{value:e.dialog,callback:function(o){e.dialog=o},expression:"dialog"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"headline"},[e._v("Upload file")])]),e._v(" "),s("v-card-text"),e._v(" "),s("v-card-actions",[s("v-spacer"),e._v(" "),s("input",{attrs:{type:"file",accept:".csv,.json,.yaml,.xlsx",name:""},on:{change:e.upload}}),e._v(" "),s("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(o){e.dialog=!1}}},[e._v("Close")])],1)],1)],1)],1)}),[],!1,null,null,null);o.default=d.exports}}]);