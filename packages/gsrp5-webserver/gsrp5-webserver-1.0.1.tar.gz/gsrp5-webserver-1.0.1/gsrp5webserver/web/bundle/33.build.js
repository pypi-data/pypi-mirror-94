(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{480:function(t,e,s){"use strict";s.r(e);var a=s(435),i=(s(436),s(419)),l=s.n(i),n={name:"gsrp5-o2mgantt-view",props:["metas","model","items","rel","mode","role","o2mfield","root","guid","container","parent"],components:{ganttElastic:a.a},data:()=>({fields:[],meta:{},views:{},view:{},name:"",actions:{},tasks:[],options:{taskMapping:{progress:"percent"},maxRows:100,maxHeight:500,title:{label:"Your project title as html (link or whatever...)",html:!1},row:{height:24},calendar:{hour:{display:!0}},chart:{progress:{bar:!1},expander:{display:!0}},taskList:{expander:{straight:!1},columns:[{id:1,label:"ID",value:"id",width:40},{id:2,label:"Description",value:"label",width:200,expander:!0,html:!0,events:{click({data:t,column:e}){alert("description clicked!\n"+t.label)}}},{id:3,label:"Assigned to",value:"user",width:130,html:!0},{id:3,label:"Start",value:t=>l()(t.start).format("YYYY-MM-DD"),width:78},{id:4,label:"Type",value:"type",width:68},{id:5,label:"%",value:"progress",width:35,style:{"task-list-header-label":{"text-align":"center",width:"100%"},"task-list-item-value-container":{"text-align":"center",width:"100%"}}}]},locale:{name:"en",Now:"Now","X-Scale":"Zoom-X","Y-Scale":"Zoom-Y","Task list width":"Task list","Before/After":"Expand","Display task list":"Task list"}}}),methods:{_buildTasks:function(t){let e={};for(let s=0;s<t.length;s++){e={id:t[s].__data__.id,label:t[s].__data__[this.meta.names.rec_name],start:l()(t[s].__data__[this.meta.names.start_date]).format("YYYY-MM-DDTHH:mm:ssZ").valueOf(),end:l()(t[s].__data__[this.meta.names.end_date]).format("YYYY-MM-DDTHH:mm:ssZ").valueOf(),progress:t[s].__data__[this.meta.names.progress],type:t[s].__data__[this.meta.names.project_type]},null!=t[s].__data__[this.meta.names.parent_id].id&&(e.parentId=t[s].__data__[this.meta.names.parent_id].id);for(let a in t[s].__data__)"id"!=a&&(["many2one","related"].indexOf(this.meta.columns[a].type)>=0?e[a]=t[s].__data__[a].name:e[a]=t[s][a]);this.tasks.push(e),e={}}}},created:function(){this.$websocket.registerComponent({n:`${this.$options.name}:${this._uid}`,c:this}),this.meta=this.metas[this.model].meta,this.views=this.metas[this.model].views,this.view=this.views.gantt,this.name=this.meta.description,this.fields=Object.keys(this.view.columns)},mounted:function(){let t=1;this.options.taskList.columns.splice(0,this.options.taskList.columns.length),this.options.taskList.columns.push({id:1,label:"ID",value:"id",width:120});for(let e in this.view.columns)t++,this.options.taskList.columns.push({id:t,label:this.meta.columns[e].label,value:e,width:80});this.tasks.splice(0,this.tasks.length),this.items.length>0&&this._buildTasks(this.items)},beforeDestroy:function(){this.$websocket.unregisterComponent(`${this.$options.name}:${this._uid}`)}},o=s(19),d=Object(o.a)(n,(function(){var t=this.$createElement;return(this._self._c||t)("gantt-elastic",{attrs:{tasks:this.tasks,options:this.options}})}),[],!1,null,null,null);e.default=d.exports}}]);