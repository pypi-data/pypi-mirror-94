(this["webpackJsonpcode-visualization-react"]=this["webpackJsonpcode-visualization-react"]||[]).push([[0],{249:function(e,t,n){},475:function(e,t,n){"use strict";n.r(t);var i=n(3),o=n(0),a=n.n(o),r=n(11),s=n.n(r),l=(n(249),n(133)),c=n(100),d=n.n(c),h=n(206),p=n(28),u=n(101),g=n(16),f=n(228),v=n(227),b=n(74),y=n(207),m=n.n(y),j=n(102),C=n.n(j),k=n(41),x=n.n(k),O=function e(){Object(p.a)(this,e)};O.connectedNodeColor="#a1c4ff",O.nodeColor="#D3D3D3",O.highlightedNodeColor="#448aff",O.backgroundColor="#ccc",O.edgeColor="#ccc",O.highlightedEdgeColor="#888",O.nodeColorNext="#2f60b2",O.nodeColorPrev="#a1c4ff",O.prevClickedNodeColor="#6a0dad",O.activeButtonBackgroundColor="#00ff00",O.activeButtonTextColor="#ffffff",O.disabledButtonBackgroundColor="#e0e0e0",O.disabledButtonTextColor="#000000";var N=O,w=function e(t,n){Object(p.a)(this,e),this.name=t,this.title=n.title;var i=n[this.name];void 0!==i&&(this.language=i.language,this.nodes=i.nodes,this.edges=i.edges)},S=n(208),E=n.n(S),F=n(209);function L(){var e=Object(F.a)(['\n  .prettyprint {\n    background: #1d1f21;\n    font-family: Menlo, "Bitstream Vera Sans Mono", "DejaVu Sans Mono", Monaco, Consolas, monospace;\n    border: 0 !important;\n    font-size: 12px;\n  }\n  .pln {\n    color: #c5c8c6;\n  }\n  ol.linenums {\n    margin-top: 0;\n    margin-bottom: 0;\n    color: #969896;\n  }\n  li.L0,\n  li.L1,\n  li.L2,\n  li.L3,\n  li.L4,\n  li.L5,\n  li.L6,\n  li.L7,\n  li.L8,\n  li.L9 {\n    padding-left: 1em;\n    background-color: #1d1f21;\n    list-style-type: decimal;\n  }\n  @media screen {\n    .str {\n        color: #b5bd68;\n    }\n    .kwd {\n        color: #b294bb;\n    }\n    .com {\n        color: #969896;\n    }\n    .typ {\n        color: #81a2be;\n    }\n    .lit {\n        color: #de935f;\n    }\n    .pun {\n        color: #c5c8c6;\n    }\n    .opn {\n        color: #c5c8c6;\n    }\n    .clo {\n        color: #c5c8c6;\n    }\n    .tag {\n        color: #cc6666;\n    }\n    .atn {\n        color: #de935f;\n    }\n    .atv {\n        color: #8abeb7;\n    }\n    /* declaration */\n    \n    .dec {\n        color: #de935f;\n    }\n    .var {\n        color: #cc6666;\n    }\n    .fun {\n        color: #81a2be;\n    }\n  }\n']);return L=function(){return e},e}var T=n(210).a.div(L()),G=n(214),z=n.n(G),D=n(476),P=n(514);var W=function(e){return Object(i.jsxs)(D.a,{variant:"outlined",style:{marginTop:"5px",paddingTop:"10px",paddingLeft:"20px",paddingRight:"20px",paddingBottom:"10px",maxWidth:"400px"},children:[Object(i.jsx)(P.a,{variant:"body1",style:{fontWeight:"bold"},display:"inline",children:"Name:"}),Object(i.jsxs)(P.a,{variant:"body2",display:"inline",children:[" ",e.name]}),Object(i.jsx)("br",{}),Object(i.jsx)(P.a,{variant:"body1",style:{fontWeight:"bold"},display:"inline",children:"Type:"}),Object(i.jsxs)(P.a,{variant:"body2",display:"inline",children:[" ",e.type]}),Object(i.jsx)("br",{}),Object(i.jsx)(P.a,{variant:"body1",style:{fontWeight:"bold"},display:"inline",children:"File Path:"}),Object(i.jsxs)(P.a,{variant:"body2",display:"inline",children:[" ",e.filePath]}),Object(i.jsx)(P.a,{variant:"subtitle1",style:{fontWeight:"bold"},children:"Comment:"}),Object(i.jsx)(P.a,{variant:"body2",children:e.comment})]})};var R=function(e){var t;return"javascript"==e.language&&(t=Object(i.jsxs)("div",{children:[Object(i.jsx)(P.a,{variant:"subtitle1",style:{"font-weight":"bold"},display:"inline",children:"Props:"}),Object(i.jsxs)(P.a,{variant:"body2",display:"inline",children:[" ",e.props.map((function(e){return Object(i.jsx)("li",{children:e})}))]})]})),Object(i.jsxs)(D.a,{variant:"outlined",style:{"margin-top":"5px","padding-top":"10px","padding-left":"20px","padding-right":"20px","padding-bottom":"10px"},children:[Object(i.jsx)(P.a,{variant:"body1",style:{"font-weight":"bold"},display:"inline",children:"Source:"}),Object(i.jsxs)(P.a,{variant:"body2",display:"inline",children:[" ",e.source]}),Object(i.jsx)("br",{}),Object(i.jsx)(P.a,{variant:"body1",style:{"font-weight":"bold"},display:"inline",children:"Target:"}),Object(i.jsxs)(P.a,{variant:"body2",display:"inline",children:[" ",e.target]}),Object(i.jsx)("br",{}),t]})},B=n(526),_=n(134),H=n(50),I=n(517),M=n(226),V=n(520),U=n(518),J=n(519),A=n(522),q=n(219),K=n.n(q),Q=n(516),X=n(515),Y=function e(){Object(p.a)(this,e)};Y.helpText="Hover over a node or an edge to see comments. \n    Click a node once to see its code. \n    Double click on a node to display the node's children. \n    Only nodes whose labels are bold contain a child graph.",Y.backButtonTooltipText="Pop graph",Y.resetButtonTooltipText="Reset screen",Y.revealCodeTooltipText="Toggle to preview source code";var Z=Y;var $=function(e){return Object(i.jsx)(X.a,{title:Object(i.jsx)("span",{style:{fontSize:"14px"},children:Z.resetButtonTooltipText}),placement:"top",children:Object(i.jsx)(Q.a,{size:"small",style:{backgroundColor:"white"},children:Object(i.jsx)(K.a,{})})})},ee=n(220),te=n.n(ee);var ne=function(e){return Object(i.jsx)(X.a,{title:Object(i.jsx)("span",{style:{fontSize:"14px"},children:Z.backButtonTooltipText}),children:Object(i.jsx)(Q.a,{size:"small",style:{backgroundColor:"white"},children:Object(i.jsx)(te.a,{})})})},ie=n(221),oe=n.n(ie);var ae=function(){return Object(i.jsx)(X.a,{title:Object(i.jsx)("span",{style:{fontSize:"14px"},children:Z.helpText}),children:Object(i.jsx)(Q.a,{size:"small",style:{backgroundColor:"white"},children:Object(i.jsx)(oe.a,{})})})},re=n(222),se=n.n(re);var le=function(){return Object(i.jsx)(X.a,{title:Object(i.jsx)("span",{style:{fontSize:"14px"},children:Z.revealCodeTooltipText}),children:Object(i.jsx)(Q.a,{size:"small",style:{backgroundColor:"white"},children:Object(i.jsx)(se.a,{})})})},ce=n(529),de=n(528),he=n(521),pe=n(531),ue=n(527),ge=n(525),fe=Object(I.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(H.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(H.a)({position:"relative",borderRadius:e.shape.borderRadius,borderColor:"white",marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(H.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(H.a)({display:"flex"},e.breakpoints.down("sm"),{display:"none"})}}));function ve(e){var t=a.a.useState(function(){switch(e.graphName){case"files":return"file";case"main":return"function";default:return"file"}}()),n=Object(b.a)(t,2),r=n[0],s=n[1],l=a.a.useState(!1),c=Object(b.a)(l,2),d=c[0],h=c[1],p=Object(o.useRef)(null),u=fe(),g=Object(M.a)({palette:{primary:{main:"#fff"},secondary:{main:"#448aff"}}}),f=function(e){var t=[];return e.forEach((function(e){t.push(function(e){return e._private.data.id}(e))})),Object.values(t)},v=function(e){var t=e.nodes;return Object.keys(t)};return Object(i.jsx)("div",{className:u.grow,children:Object(i.jsx)(U.a,{position:"static",style:{background:"#ccc"},children:Object(i.jsxs)(J.a,{children:[Object(i.jsx)("img",{style:{height:40,width:40,marginRight:10},src:"/company-icon.png",alt:"logo"}),Object(i.jsx)(P.a,{className:u.title,variant:"h6",noWrap:!0,children:"VizCode Beta"}),Object(i.jsx)("div",{className:u.grow}),Object(i.jsxs)("div",{className:u.sectionDesktop,children:[Object(i.jsx)("div",{style:{marginRight:8},children:Object(i.jsx)(V.a,{theme:g,children:Object(i.jsxs)(he.a,{container:!0,spacing:1,alignItems:"center",children:[Object(i.jsx)(he.a,{item:!0,children:Object(i.jsx)(de.a,{id:"free-solo-demo",style:{height:70,width:400},size:"small",value:e.selectedNodeName,options:function(){switch(r){case"file":return d?v(e.graphData.files):"files"==e.graphName?f(e.nodes):[];case"function":return d?v(e.graphData.main):"main"==e.graphName?f(e.nodes):[];default:return[]}}(),onChange:function(t,n){e.handleClick(n,r,d)},renderInput:function(e){return Object(i.jsx)(ce.a,Object(_.a)(Object(_.a)({},e),{},{label:"Search graph...",variant:"standard",style:{marginTop:8,marginBottom:8},className:u.root}))}})}),Object(i.jsx)(he.a,{item:!0,children:Object(i.jsxs)(ue.a,{value:r,onChange:function(e){s(e.target.value)},style:{paddingTop:3},children:[Object(i.jsx)(pe.a,{value:"file",children:"File"}),Object(i.jsx)(pe.a,{value:"function",children:"Function"})]})}),Object(i.jsx)(he.a,{item:!0,children:Object(i.jsx)(ge.a,{ref:p,disableElevation:!0,variant:"contained",style:{marginTop:3,marginRight:30},onClick:function(){var e=!d;h(e);var t=p.current;e?(t.style.backgroundColor=N.activeButtonBackgroundColor,t.style.color=N.activeButtonTextColor):(t.style.backgroundColor=N.disabledButtonBackgroundColor,t.style.color=N.disabledButtonTextColor)},children:"All"})})]})})}),Object(i.jsx)(A.a,{color:"inherit",onClick:e.resetGraph,children:Object(i.jsx)($,{})}),Object(i.jsx)(A.a,{color:"inherit",onClick:e.popGraph,children:Object(i.jsx)(ne,{})}),Object(i.jsx)(A.a,{color:"inherit",children:Object(i.jsx)(ae,{})}),Object(i.jsx)(A.a,{edge:"end",color:"inherit",onClick:e.handleCode,children:Object(i.jsx)(le,{})})]})]})})})}var be=n(223),ye=n.n(be),me=function(){function e(t,n){Object(p.a)(this,e),this.ip=t,this.api_key=n}return Object(u.a)(e,[{key:"writeLog",value:function(e){e.ip=this.ip,e.time_stamp=Date.now(),e.api_key=this.api_key;ye.a.post("https://vizcode-logger.herokuapp.com/log",JSON.stringify(e),{headers:{"Content-Type":"application/json"}})}}]),e}(),je=n(224),Ce=n.n(je),ke=n(225),xe=n.n(ke);try{C.a.use(z.a)}catch(ze){console.log(ze)}C.a.use(Ce.a);var Oe=function(e){var t=e.match(/\w\w/g).map((function(e){return parseInt(e,16)})),n=Object(b.a)(t,3),i=n[0],o=n[1],a=n[2];return"rgb(".concat(i,",").concat(o,",").concat(a,")")},Ne={name:"dagre",ranker:"network-simplex",rankDir:"LR",fit:!0,padding:20},we={"background-color":N.nodeColor,label:"data(id)","text-margin-y":-10},Se={lineColor:"#ccc",curveStyle:"bezier",targetArrowShape:"triangle",arrowScale:1.8},Ee=n(456),Fe="files",Le="60%",Te=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var i;return Object(p.a)(this,n),(i=t.call(this,e)).updateGraph=i.updateGraph.bind(Object(g.a)(i)),i.pushGraph=i.pushGraph.bind(Object(g.a)(i)),i.popGraph=i.popGraph.bind(Object(g.a)(i)),i.displayCode=i.displayCode.bind(Object(g.a)(i)),i.handleNodeClick=i.handleNodeClick.bind(Object(g.a)(i)),i.handleEdgeClick=i.handleEdgeClick.bind(Object(g.a)(i)),i.handleEdgeHover=i.handleEdgeHover.bind(Object(g.a)(i)),i.handleEdgeLessHover=i.handleEdgeLessHover.bind(Object(g.a)(i)),i.resetToDefault=i.resetToDefault.bind(Object(g.a)(i)),i.handleSearchClick=i.handleSearchClick.bind(Object(g.a)(i)),i.resizeGraph=i.resizeGraph.bind(Object(g.a)(i)),i.resizeWindow=i.resizeWindow.bind(Object(g.a)(i)),i.updateFilePath=i.updateFilePath.bind(Object(g.a)(i)),i.cyPopperRef=a.a.createRef(),i.cyPopperEdgeRef=a.a.createRef(),i.boldNodesWithSubgraphs=i.boldNodesWithSubgraphs.bind(Object(g.a)(i)),i.state={elements:[],initialized:!1,graphStack:[],times:{},currentCode:"",graph:null,prevClickedNode:null,prevDoubleClickedNode:null,edge:null,prevClickedEdge:null,connectedEdges:[],incomers:[],outgoers:[],codeWidth:"40%",graphWidth:Le,resizeTimer:null,highlightedCode:null,openFile:"",logger:null,removedNodes:null},i}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t,n,i,o=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.v4();case 2:return t=e.sent,e.next=5,fetch("python_graph.json");case 5:return n=e.sent,e.next=8,n.json();case 8:i=e.sent,this.setState({graphData:i,logger:new me(t,"alexsucks")},(function(){o.updateGraph(Fe),!!window.chrome||window.addEventListener("resize",o.resizeWindow);var e={description:"Initialized",data:{nodeSize:Object.keys(i.main.nodes).length,edgeSize:i.main.edges.length}};o.state.logger.writeLog(e)}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){!!window.chrome||window.removeEventListener("resize",this.resizeWindow),this.cy.removeListener("tap"),this.cy.removeListener("mouseover"),this.cy.removeListener("mouseout"),this.state.logger.writeLog({description:"ClosedInstance"})}},{key:"clearGraphData",value:function(){this.setState({currentCode:"",prevClickedNode:null,edge:null,prevClickedEdge:null,connectedEdges:[],incomers:[],outgoers:[],openFile:"",highlightCode:null,prevDoubleClickedNode:null})}},{key:"setUpListeners",value:function(){var e=this;this.cy.on("mouseover","node",(function(t){e.handleNodeHover(t)})),this.cy.on("mouseout","node",(function(t){e.handleNodeLessHover(t)})),this.cy.on("tap","node",(function(t){e.handleNodeClick(t)})),this.cy.on("tap","edge",(function(t){e.handleEdgeClick(t)})),this.cy.on("mouseover","edge",(function(t){e.handleEdgeHover(t)})),this.cy.on("mouseout","edge",(function(t){e.handleEdgeLessHover(t)}))}},{key:"modifyLayout",value:function(e){we.height=250,we.width=250,Se.width=5,we.fontSize=40,Ne.spacingFactor=.45,Ne.rankSep=2e3,Ne.nodeSep=500,Ne.edgeSep=500,this.setState({})}},{key:"updateGraph",value:function(e,t){var n=this,i=new w(e,this.state.graphData),o=this.formatGraph(i);this.setState({initialized:!1},(function(){n.pushGraph(i,o,t)})),this.modifyLayout(Object.keys(i.nodes).length)}},{key:"pushGraph",value:function(e,t,n){var i=this;this.state.graphStack.push(e.name),this.setState({elements:t,initialized:!0,graph:e},(function(){i.setUpListeners(),i.clearGraphData(),i.boldNodesWithSubgraphs(e),null!=n&&n()}))}},{key:"popGraph",value:function(){if(this.state.graphStack.length>1){this.state.graphStack.pop();var e=this.state.graphStack[this.state.graphStack.length-1],t=Ne;Ne={name:"random"},this.updateGraph(e),Ne=t,this.state.graphStack.pop(),this.clearGraphData()}}},{key:"formatGraph",value:function(e){var t=this,n=[];return Object.keys(e.nodes).forEach((function(i){n.push(t.formatNode(e.nodes,i))})),e.edges.forEach((function(e){n.push(t.formatEdge(e))})),n}},{key:"formatNode",value:function(e,t){return{data:{id:t,label:e[t].name,type:e[t].type}}}},{key:"formatEdge",value:function(e){return{data:{source:e.from,target:e.to,props:e.data.props}}}},{key:"displayCode",value:function(e){var t=this,n=this.state.graph.nodes[e].filePath;void 0!==n?fetch(n).then((function(e){return e.text()})).then((function(e){t.setState({currentCode:e})})):this.setState({currentCode:""})}},{key:"createContentFromComponent",value:function(e){var t=document.createElement("div");return s.a.render(e,t),document.body.appendChild(t),t}},{key:"updateFilePath",value:function(e){"python"==this.state.graph.language?this.setState({openFile:this.state.graph.nodes[e].originalFilePath}):this.setState({openFile:"/src/".concat(e,".js")})}},{key:"moveCameraToNode",value:function(e){var t=this.cy.nodes('[id = "'.concat(e,'"]'))[0],n=this.state.incomers,i=this.state.outgoers;n.merge(i),n.merge(t),this.cy.fit(n,10)}},{key:"filterNodes",value:function(e){var t=this.cy.nodes().not(e),n=[];t.forEach((function(e){n.push(e.connectedEdges())})),this.cy.remove(t),this.setState({removedNodes:t,removedEdges:n}),this.cy.elements().makeLayout(Ne).run(),this.cy.fit(50)}},{key:"restoreGraph",value:function(){if(null!=this.state.removedNodes&&null!=this.state.removedEdges){this.state.removedNodes.restore();var e,t=Object(l.a)(this.state.removedEdges);try{for(t.s();!(e=t.n()).done;){e.value.restore()}}catch(ze){t.e(ze)}finally{t.f()}}}},{key:"getNodesFromFile",value:function(e){for(var t=null,n=0,i=Object.keys(this.state.graph.nodes);n<i.length;n++){var o=i[n];if(this.state.graph.nodes[o].originalFilePath==e){1;var a=this.cy.nodes('[id = "'.concat(o,'"]'));null==t?t=a:t.merge(a)}}return t}},{key:"displayNodesFromFile",value:function(e){var t=this.getNodesFromFile(e);this.filterNodes(t)}},{key:"handleNodeClick",value:function(e){this.state.logger.writeLog({description:"NodeClick"});var t=e.target,n=t._private.data.id,i=new Date,o=!1;if(void 0!==this.state.times[n]){if(i-this.state.times[n]<500){var a=this.state.graph.nodes[n].child;if(void 0!==a)return this.handleNodeLessHover(e),void this.updateGraph(a);if("File"==this.state.graph.nodes[n].type){this.handleNodeLessHover(e);var r=Ne;return Ne={name:"random"},this.updateGraph("main"),this.displayNodesFromFile(n),Ne=r,void this.setState({})}this.restoreGraph();var s=t.incomers(),l=t.outgoers(),c=s.clone();c.merge(l),c.merge(t),this.filterNodes(c),o=!0}this.state.times[n]=i}else this.state.times[n]=i;this.displayCode(n),this.cy.edges().style("lineColor",N.edgeColor),this.cy.nodes('[id != "'.concat(n,'"]')).style("background-color",N.nodeColor);var d=t.incomers(),h=t.outgoers(),p=t.connectedEdges();d.style("background-color",N.nodeColorPrev),h.style("background-color",N.nodeColorNext),p.style("lineColor",N.highlightedEdgeColor),o&&(null!=this.state.prevDoubleClickedNode&&this.state.prevDoubleClickedNode!=t&&this.changeNodeColor(this.state.prevDoubleClickedNode._private.data.id,N.prevClickedNodeColor),this.setState({prevDoubleClickedNode:t})),this.setState({prevClickedEdge:null,edge:null,incomers:d,outgoers:h,connectedEdges:p,prevClickedNode:t,currentCode:""}),this.updateFilePath(n),this.highlightCode(this.state.graph.nodes[n].highlightedCodePath)}},{key:"changeNodeColor",value:function(e,t){this.cy.nodes('[id = "'.concat(e,'"]')).style("background-color",t)}},{key:"handleNodeHover",value:function(e){var t=e.target,n=t._private.data.id,o=this.state.graph.nodes[n].type,a=this.state.graph.nodes[n].comment,r=this.state.graph.nodes[n].originalFilePath;this.cy.nodes('[id = "'.concat(n,'"]'))[0]._private.style["background-color"].strValue!=Oe(N.prevClickedNodeColor)&&this.changeNodeColor(n,N.highlightedNodeColor),this.cyPopperRef.current=t.popper({content:this.createContentFromComponent(Object(i.jsx)(W,{name:t._private.data.label,comment:a,type:o,filePath:r})),popper:{placement:"below",removeOnDestroy:!0}}),x()("#root").css("cursor","pointer")}},{key:"handleNodeLessHover",value:function(e){var t=e.target,n=t._private.data.id;this.cy.nodes('[id = "'.concat(n,'"]'))[0]._private.style["background-color"].strValue!=Oe(N.prevClickedNodeColor)&&(this.state.incomers.includes(t)?this.changeNodeColor(n,N.nodeColorPrev):this.state.outgoers.includes(t)?this.changeNodeColor(n,N.nodeColorNext):t!=this.state.prevClickedNode&&this.changeNodeColor(n,N.nodeColor)),this.cyPopperRef&&this.cyPopperRef.current.destroy(),x()("#root").css("cursor","auto")}},{key:"handleEdgeClick",value:function(e){var t=this;this.state.logger.writeLog({description:"EdgeClick"});var n=e.target,o=n._private.data.source,a=n._private.data.target,r=a,s=new Date;if(void 0!==this.state.times[r]){if(s-this.state.times[r]<500&&void 0!=this.state.graphData.files.nodes[o]&&void 0!=this.state.graphData.files.nodes[o]){this.handleEdgeLessHover(e);var c=Ne;Ne={name:"random"},this.updateGraph("main");var d=this.getNodesFromFile(o);d.style("background-color",N.highlightedNodeColor);var h=this.getNodesFromFile(a);return d.merge(h),this.filterNodes(d),Ne=c,void this.setState({})}this.state.times[r]=s}else this.state.times[r]=s;this.cy.edges().forEach((function(e){e!=n&&e.style("line-color",N.edgeColor)})),this.state.graphStack.length<2&&this.updateFilePath(o),this.setState({currentCode:""},(function(){t.displayCode(o)}));var p,u=Object(l.a)(this.state.graph.edges);try{for(u.s();!(p=u.n()).done;){var g=p.value;if(g.from==o&&g.to==a){this.highlightCode(g.highlightedCodePath);break}}}catch(ze){u.e(ze)}finally{u.f()}if(this.setState({prevClickedEdge:n,prevClickedNode:null}),this.cyPopperRef)try{this.cyPopperRef.current.destroy()}catch(ze){console.log(ze)}this.cyPopperEdgeRef.current=n.popper({content:this.createContentFromComponent(Object(i.jsx)(R,{target:n._private.data.target,source:n._private.data.source,props:n._private.data.props,language:this.state.graph.language})),popper:{placement:"below",removeOnDestroy:!0}})}},{key:"handleEdgeHover",value:function(e){var t=e.target;t.style("lineColor",N.highlightedEdgeColor),x()("#root").css("cursor","pointer"),this.setState({edge:t})}},{key:"handleEdgeLessHover",value:function(){this.state.edge==this.state.prevClickedEdge||this.state.connectedEdges.includes(this.state.edge)||this.state.edge.style("lineColor",N.nodeColor),null!==this.cyPopperEdgeRef.current&&(this.cyPopperEdgeRef.current.destroy(),this.cyPopperEdgeRef.current=null),x()("#root").css("cursor","auto")}},{key:"highlightSearchedNode",value:function(e){var t=this.cy.nodes('[id = "'.concat(e,'"]'))[0];this.changeNodeColor(e,N.highlightedNodeColor);var n=t.incomers(),i=t.outgoers();n.style("background-color",N.nodeColorPrev),i.style("background-color",N.nodeColorNext),t.connectedEdges().style("lineColor",N.highlightedEdgeColor),this.displayCode(e),this.updateFilePath(e),this.setState({incomers:n,outgoers:i,prevClickedNode:t});var o=n.clone();o.merge(i),o.merge(t),this.filterNodes(o),this.highlightCode(this.state.graph.nodes[e].highlightedCodePath)}},{key:"handleSearchClick",value:function(e,t,n){if(this.state.logger.writeLog({description:"SearchClick"}),this.resetGraph(),void 0!=e){this.restoreGraph();var i=function(){this.highlightSearchedNode(e),Ne=o,this.setState({})}.bind(this);if("files"!=this.state.graph.name&&"file"==t){var o=Ne;Ne={name:"random"},this.updateGraph("files",i)}else if(n&&"function"==t){o=Ne;Ne={name:"random"},this.updateGraph("main",i)}else this.highlightSearchedNode(e)}else this.setState({openFile:""})}},{key:"addWrapper",value:function(e,t,n){var i=document.createElement("div");i.id="codeHighlight",i.style.borderLeft="5px solid #FFFFFF",i.style.paddingLeft="3px";for(var o=!1,a=t;a<n+1;a++){var r=e[a];a==t&&(r.textContent.includes("\n\n")&&(o=!0),r.textContent=r.textContent.replace(/(\r\n|\n|\r)/gm,"")),r.remove(),r.style.color="FFFFFF",i.appendChild(r)}0!=t?e[t-1].after(i):e.length>n+1&&e[n+1].before(i),i.before(document.createElement("br")),o&&0!=t&&(e[t-1].textContent=e[t-1].textContent+"\n"),e.length>n+1&&(e[n+1].textContent.includes("\n\n")&&i.after(document.createElement("br")),e[n+1].textContent=e[n+1].textContent.replace(/(\r\n|\n|\r)/gm,""))}},{key:"highlightCode",value:function(e){setTimeout(function(){var t=this;void 0!==e&&fetch(e).then((function(e){return e.text()})).then((function(e){return t.setState({highlightedCode:e.replace(/\s+/g,"")},(function(){if(void 0!=t.state.highlightedCode){for(var e,n,i=x()("code").find("span"),o=!1,a=t.state.highlightedCode.length,r=0;r<i.length&&!o;r++)for(var s="",l=r;l<i.length;l++){var c=i[l].textContent.replace(/\s+/g,"");if((s=s.concat(c)).length>a)break;if(s.length==a&&s==t.state.highlightedCode){e=r,n=l,t.addWrapper(i,e,n),o=!0;break}}var d=document.getElementById("codeHighlight");d&&d.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}))}))}.bind(this),250)}},{key:"resizeGraph",value:function(){var e=this,t=function(){e.cy.resize(),e.cy.fit(30)};this.state.graphWidth==Le?this.setState({codeWidth:"0%",graphWidth:"100%"},(function(){t()})):this.setState({codeWidth:"40%",graphWidth:Le},(function(){t()}))}},{key:"resetToDefault",value:function(){this.setState({graphStack:[],graph:null}),this.clearGraphData();var e=Ne;Ne={name:"random"},this.updateGraph(Fe),Ne=e}},{key:"resetGraph",value:function(){this.cy.nodes().style("background-color",N.nodeColor),this.cy.edges().style("line-color",N.edgeColor),this.clearGraphData()}},{key:"boldNodesWithSubgraphs",value:function(e){var t=this.cy;t.nodes().forEach((function(n){var i=n._private.data.id;void 0!=e.nodes[i].child&&t.nodes('[id = "'.concat(i,'"]')).style("font-weight","bold")}))}},{key:"resizeWindow",value:function(){clearTimeout(this.state.resizeTimer),this.state.resizeTimer=setTimeout(function(){var e=this,t=this.state.graph;this.setState({initialized:!1},(function(){e.setState({initialized:!0,currentCode:"",prevClickedNode:null,edge:null,prevClickedEdge:null,connectedEdges:[],incomers:[],outgoers:[]},(function(){e.setUpListeners(),e.boldNodesWithSubgraphs(t)}))}))}.bind(this),1e3)}},{key:"render",value:function(){var e=this;if(this.state.initialized){var t=Object(i.jsx)(P.a,{style:{color:"white",marginTop:"50%"},align:"center",children:"Press on a node to see related code"});return""!=this.state.currentCode&&(t=Object(i.jsx)(T,{children:Object(i.jsx)("pre",{className:"prettyprint linenums",style:{whiteSpace:"pre-wrap",marginTop:"0"},children:Object(i.jsx)("code",{className:"language-javascript linenums",children:Object(i.jsx)("div",{dangerouslySetInnerHTML:{__html:E.a.prettyPrintOne(this.state.currentCode.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),this.state.graph.language)}})})})})),Object(i.jsxs)(B.a,{style:{width:x()(window).width(),height:x()(window).height()},children:[Object(i.jsx)(B.a,{children:Object(i.jsx)(ve,{handleClick:this.handleSearchClick,nodes:this.cy?this.cy.nodes():[],graphData:this.state.graphData,formatGraph:this.formatGraph,graphName:this.state.graph.name,selectedNodeName:this.state.prevClickedNode?this.state.prevClickedNode._private.data.id:null,handleCode:this.resizeGraph,resetGraph:this.resetToDefault,popGraph:this.popGraph,title:this.state.graph.title})}),Object(i.jsxs)(B.a,{id:"field",style:{display:"flex",height:"calc(100% - 64px)"},children:[Object(i.jsx)(m.a,{elements:this.state.elements,style:{width:this.state.graphWidth},cy:function(t){e.cy=t},layout:Ne,stylesheet:[{selector:"node",style:we},{selector:'node[type="Component"]',style:{shape:"diamond"}},{selector:'node[type="Function"]',style:{shape:"ellipse"}},{selector:'node[type="File"]',style:{shape:"diamond"}},{selector:"edge",style:Se}]}),"40%"==this.state.codeWidth&&Object(i.jsxs)("div",{className:"codeWindow",id:"codeWindow",style:{width:this.state.codeWidth,overflow:"scroll",backgroundColor:"#1d1f21",paddingLeft:"10px",paddingRight:"10px",paddingTop:"10px"},children:[this.state.openFile&&Object(i.jsxs)("div",{children:[Object(i.jsxs)(P.a,{variant:"subtitle2",style:{color:"white"},children:["File path: ",this.state.openFile]}),Object(i.jsx)("hr",{})]}),t]})]})]})}return Object(i.jsx)("div",{style:{marginLeft:"47.5%",marginTop:"22.5%"},children:Object(i.jsx)(xe.a,{type:"spin",color:"##FF0000",height:"10%",width:"10%"})})}}]),n}(o.Component),Ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,533)).then((function(t){var n=t.getCLS,i=t.getFID,o=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),i(e),o(e),a(e),r(e)}))};s.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(Te,{})}),document.getElementById("root")),Ge()}},[[475,1,2]]]);
//# sourceMappingURL=main.957d5ab6.chunk.js.map