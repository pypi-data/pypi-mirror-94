require.undef("wordpackchart"),define("wordpackchart",["d3"],function(d3){return function(container,config,data){config.debugger;var _data,_config={},_chart={},_container=container,target=Array.isArray(data)?[]:{};_data=$.extend(!0,target,data),_chart.container=_container,_chart.config=_config,(_config=$.extend(!0,{margin:{top:20,right:90,bottom:30,left:120},flattened:!1,width:1200,height:800},config)).margin;var width=_config.width-_config.margin.left-_config.margin.right,height=_config.height-_config.margin.top-_config.margin.bottom,baHeader=$("<div>").addClass("botvis-ba-header").appendTo(_chart.container);$("<a>",{text:"IBM Conversation Analytics Toolkit | Wordpack Visualization"}).addClass("botvis-ba-label").appendTo(baHeader);var svg=d3.select(_container).append("svg").attr("class","botvis wordpackchart").attr("width",_config.width).attr("height",height+_config.margin.top+_config.margin.bottom);_chart.svg=svg;var g=svg.append("g").attr("transform","translate("+_config.margin.left+","+_config.margin.top+")"),packLayout=d3.pack().size([width,height]).padding(2),rootNode=d3.hierarchy(_data);rootNode.sum(function(d){return d.value}),packLayout(rootNode);var nodes_data=_config.flattened?rootNode.leaves():rootNode.descendants(),nodes=g.selectAll("g").data(nodes_data).enter().append("g").attr("transform",function(d){return"translate("+[d.x,d.y]+")"});nodes.append("circle").attr("class","group").attr("r",function(d){return d.r}),nodes.append("text").attr("class","word").text(function(d){return void 0===d.children?d.data.name:""}).style("font-size",function(d){return Math.min(2*d.r,(2*d.r-8)/this.getComputedTextLength()*11)+"px"}).attr("dy",".30em"),nodes.append("text").attr("class","wordcount").text(function(d){return void 0===d.children?d.value:""}).style("font-size",function(d){return Math.min(1.5*d.r,(2*d.r-8)/this.getComputedTextLength()*2.5)+"px"}).attr("dy","1.5em")}});