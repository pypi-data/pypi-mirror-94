require.undef("wa_node_details"),define("wa_node_details",["wa_model","d3"],function({EventPublisher:EventPublisher,Workspace:Workspace},d3){const FEEDBACK_TIMEOUT=4e3,COPY_SVG='<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z"></path><title>Copy</title></svg>';class NodeDetails extends EventPublisher{constructor(dom){super(),this._container=d3.select(dom).classed("node_details",!0),this._container.append("div").classed("infodiv-title",!0).text("Selection Details:")}clear(){this._container.selectAll("*").remove()}show(node){this.clear(),this._container.append("div").classed("infodiv-title",!0).text("Selection Details:"),this._addName(node),this._addNodeId(node),this._addType(node),this._addCondition(node),this._addResponse(node),this._addContext(node),this._addJumpTo(node)}_addName(node){const entry=this._container.append("div").classed("entry",!0);entry.append("div").classed("key",!0).text("Name:"),entry.append("div").classed("value",!0).text(node.title)}_addNodeId(node){const entry=this._container.append("div").classed("entry",!0);entry.append("div").classed("key",!0).text("Node Id:"),this._addCopiedValue(entry,node.id,"Copy this node Id")}_addCopiedValue(parent,value,title){let timeout_id=void 0;const valElem=parent.append("div").classed("value copy",!0).text(value);function cleanFeedback(){valElem.classed("feedback",!1),timeout_id=void 0}valElem.append("span").classed("copy__feedback",!0).text("Copied!"),parent.append("button").classed("copy_btn",!0).html(COPY_SVG).attr("title",title).on("click",()=>{d3.event.stopPropagation(),function(txt){const dummy=document.createElement("textarea");document.body.appendChild(dummy),dummy.value=txt,dummy.select(),document.execCommand("copy"),document.body.removeChild(dummy)}(value),timeout_id&&(clearTimeout(timeout_id),cleanFeedback()),valElem.classed("feedback",!0),timeout_id=setTimeout(cleanFeedback,FEEDBACK_TIMEOUT)})}_addType(node){const entry=this._container.append("div").classed("entry",!0);entry.append("div").classed("key",!0).text("Type:"),entry.append("div").classed("value",!0).text(node.type)}_addCondition(node){const entry=this._container.append("div").classed("entry",!0);entry.append("div").classed("key",!0).text("Condition:"),this._addCopiedValue(entry,node.condition,"Copy this node condition")}_addResponse(node){if(!node.output)return;const output=node.output.generic||node.output.text&&(node.output.text.values||[node.output.text]),entry=this._container.append("div").classed("entry",!0);entry.append("div").classed("key",!0).text("Response:"),this._addCopiedValue(entry,JSON.stringify(output,null,2),"Copy this node output")}_addContext(node){if(!node.context)return;const entry=this._container.append("div").classed("entry",!0);entry.append("div").classed("key",!0).text("Set Context:"),this._addCopiedValue(entry,JSON.stringify(node.context,null,2),"Copy this node context")}_addJumpTo(node){if(!node.nextStep)return;const entry=this._container.append("div").classed("entry",!0);if(entry.append("div").classed("key",!0).text("Next Step:"),node.nextStep.behavior===Workspace.JUMP_TO){const val=entry.append("div").classed("value",!0);val.append("span").text(node.nextStep.behavior),val.append("a").attr("href","javascript:").on("click",d=>{this._publish(NodeDetails.EVENT_JUMP_TO_NODE,node.nextStep.dialog_node)}).text(node.nextStep.dialog_node),val.append("span").text(node.nextStep.selector)}else entry.append("div").classed("value",!0).text(node.nextStep.behavior)}}return NodeDetails.EVENT_JUMP_TO_NODE="jump_to",NodeDetails});