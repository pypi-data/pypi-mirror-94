

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Email Notification Setup &mdash; Dallinger 7.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Running Experiments Programmatically" href="python_module.html" />
    <link rel="prev" title="Configuration" href="configuration.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Dallinger
          

          
          </a>

          
            
            
              <div class="version">
                7.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installing_dallinger_for_users.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="aws_etc_keys.html">Setting Up AWS, Mechanical Turk, and Heroku</a></li>
<li class="toctree-l1"><a class="reference internal" href="demoing_dallinger.html">Demoing Dallinger</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_line_utility.html">Command-Line Utility</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Email Notification Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#instructions">Instructions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-config-settings">The Config Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pitfalls-and-solutions">Pitfalls and Solutions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#two-factor-authentication">Two-Factor Authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="#firewall-antivirus">Firewall/antivirus</a></li>
<li class="toctree-l4"><a class="reference internal" href="#google-less-secure-apps">Google “Less secure apps”</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gmail-from-address-rewriting">Gmail “From” address rewriting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#debug-mode">Debug Mode</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="python_module.html">Running Experiments Programmatically</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoring_a_live_experiment.html">Monitoring a Live Experiment</a></li>
<li class="toctree-l1"><a class="reference internal" href="experiment_data.html">Experiment Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="postico_and_postgres.html">Viewing the PostgreSQL Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_bots.html">Running bots as participants</a></li>
<li class="toctree-l1"><a class="reference internal" href="registration_on_OSF.html">Registration on the OSF</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Beginner Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/thomasmorgan/dallinger-for-novices">Dallinger for Programming Novices</a></li>
</ul>
<p class="caption"><span class="caption-text">Dallinger Demos</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="demo_index.html">Dallinger Demos</a></li>
</ul>
<p class="caption"><span class="caption-text">Experiment Author Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="developing_dallinger_setup_guide.html">Developer Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_an_experiment.html">Creating an Experiment</a></li>
<li class="toctree-l1"><a class="reference internal" href="networks.html">Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker_setup.html">Dallinger with Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="the_experiment_class.html">The Experiment Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="classes.html">Database API</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_api.html">Web API</a></li>
<li class="toctree-l1"><a class="reference internal" href="communicating_with_the_server.html">Communicating With the Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="javascript_api.html">Javascript API</a></li>
<li class="toctree-l1"><a class="reference internal" href="rewarding_participants.html">Rewarding participants</a></li>
<li class="toctree-l1"><a class="reference internal" href="waiting_rooms.html">Waiting rooms</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing_bots.html">Writing bots</a></li>
<li class="toctree-l1"><a class="reference internal" href="extra_configuration.html">Extra Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="recruitment.html">Recruitment</a></li>
<li class="toctree-l1"><a class="reference internal" href="private_repo.html">Private repositories</a></li>
</ul>
<p class="caption"><span class="caption-text">Core Contribution Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="running_the_tests.html">Running the tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_documentation.html">Contributing to Dallinger Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing_to_dallinger.html">Releasing a new version of Dallinger</a></li>
</ul>
<p class="caption"><span class="caption-text">General Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="acknowledgments.html">Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="dallinger_the_scientist.html">Dallinger’s incubator</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Dallinger</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Email Notification Setup</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/Dallinger/Dallinger/blob/master/docs/source/email_setup.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="email-notification-setup">
<h1>Email Notification Setup<a class="headerlink" href="#email-notification-setup" title="Permalink to this headline">¶</a></h1>
<p>Dallinger can be configured to send email messages when errors occur during a
running experiment. If this configuration is skipped, messages which
would otherwise be emailed will be written to the experiment logs instead.</p>
<div class="section" id="instructions">
<h2>Instructions<a class="headerlink" href="#instructions" title="Permalink to this headline">¶</a></h2>
<p>Sending email from Dallinger requires 5 configuration settings, described in
turn below. Like all configuration settings, they can be set up in either
<cite>.dallingerconfig</cite> in your home directory, or in <cite>config.txt</cite> in the root
directory of your experiment.</p>
<div class="section" id="the-config-settings">
<h3>The Config Settings<a class="headerlink" href="#the-config-settings" title="Permalink to this headline">¶</a></h3>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">smtp_host</span></code></dt><dd><p>The hostname and port of the SMTP (outgoing email) server through
which all email will be sent. This defaults to <cite>smtp.gmail.com:587</cite>, the Google
SMTP server. If you want to send email <em>from</em> a Gmail address, or a custom
domain set up to use Gmail for email, this default setting is what you want.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">smtp_username</span></code></dt><dd><p>The username with which to log into the SMTP server, which
will very likely be an email address (if you are using a Gmail address to send
email, you will use that address for this value).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">smtp_password</span></code></dt><dd><p>The password associated with the <code class="docutils literal notranslate"><span class="pre">smtp_username</span></code>.</p>
<p><strong>NOTE</strong> If you are using two-factor authentication, see <a class="reference internal" href="#two-factor-auth"><span class="std std-ref">Two-Factor Authentication</span></a>,
below.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dallinger_email_address</span></code></dt><dd><p>The email address to be used as the “from” address
outgoing email notifications. For Gmail accounts, this address is likely to be
overwritten by the Google SMTP server. See <a class="reference internal" href="#from-address-rewrite"><span class="std std-ref">Gmail “From” address rewriting</span></a> below.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">contact_email_on_error</span></code></dt><dd><p>Also an email address, and used in two ways:</p>
<ol class="arabic simple">
<li><p>It serves as the recipient address for outgoing notifications</p></li>
<li><p>It is displayed to experiment participants on the error page, so that
they can make inquiries about compensation</p></li>
</ol>
</dd>
</dl>
</div>
<div class="section" id="pitfalls-and-solutions">
<h3>Pitfalls and Solutions<a class="headerlink" href="#pitfalls-and-solutions" title="Permalink to this headline">¶</a></h3>
<p>A few other things which may get in the way of sending email successfully, or
cause things to behave differently than expected:</p>
<div class="section" id="two-factor-authentication">
<span id="two-factor-auth"></span><h4>Two-Factor Authentication<a class="headerlink" href="#two-factor-authentication" title="Permalink to this headline">¶</a></h4>
<p>Having two-factor authentication enabled for the outgoing email account will
prevent Dallinger from sending email without some additional steps. Detailed
instructions are provided for Gmail, below. Other email services which support
two-factor authentication may provide equivalent solutions.</p>
<div class="section" id="working-with-google-gmail-two-factor-authentication">
<h5>Working with Google/Gmail Two-factor Authentication<a class="headerlink" href="#working-with-google-gmail-two-factor-authentication" title="Permalink to this headline">¶</a></h5>
<p>If you are using Gmail with two-factor authentication, we recommend that you set
up an application-specific password (what Google short-hands as “App password”)
specifically for Dallinger. You can set one up following these instructions
(adapted from <a class="reference external" href="https://www.lifewire.com/get-a-password-to-access-gmail-by-pop-imap-2-1171882">here</a>):</p>
<ol class="arabic simple">
<li><p>Log into your Gmail web interface as usual, using two-factor authentication if
necessary.</p></li>
<li><p>Click your name or photo near your Gmail inbox’s top right corner.</p></li>
<li><p>Follow the <em>Google Account</em> link in the drop-down/overlay that appears.</p></li>
<li><p>Click <em>Signing in to Google</em> in the <em>Sign-in &amp; security</em> section.</p></li>
<li><p>Under the <em>Password &amp; sign-in method</em> section, click <em>App passwords</em>.
(If prompted for your Gmail password, enter it and click <em>Next</em>.)</p></li>
<li><p>Select <em>Other (custom name)</em> in the <em>Select app</em> drop-down menu.
Enter <em>Dallinger outgoing mail</em> or another descriptive name so you’ll recognize
what it’s for when you view these settings in the future.</p></li>
<li><p>Click <em>Generate</em>.</p></li>
<li><p>Find and immediately copy the password under <em>Your app passwords</em>. Type or paste the
password into the <cite>.dallingerconfig</cite> file in your home directory.
You will not be able to view the password again, so if you miss it, you’ll
need to delete the one you just created and create a new one.</p></li>
<li><p>Click <em>Done</em>.</p></li>
</ol>
</div>
</div>
<div class="section" id="firewall-antivirus">
<h4>Firewall/antivirus<a class="headerlink" href="#firewall-antivirus" title="Permalink to this headline">¶</a></h4>
<p>When developing locally, antivirus or firewall software may prevent outgoing
email from being sent, and cause Dallinger to raise a <cite>socket.timeout</cite> error.
Temporarily disabling these tools is the easiest workaround.</p>
</div>
<div class="section" id="google-less-secure-apps">
<h4>Google “Less secure apps”<a class="headerlink" href="#google-less-secure-apps" title="Permalink to this headline">¶</a></h4>
<p>If you do <strong>not</strong> have two-factor authentication enabled, Gmail may require that
you enable “less secure apps” in order to send email from Dallinger. You will
likely know you are encountering this problem because you will receive warning
email messages from Google regarding “blocked sign-in attempts”. To enable this,
sign into Gmail, go to the <em>Less secure apps</em> section under <em>Google Account</em>,
and turn on <em>Allow less secure apps</em>.</p>
</div>
<div class="section" id="gmail-from-address-rewriting">
<span id="from-address-rewrite"></span><h4>Gmail “From” address rewriting<a class="headerlink" href="#gmail-from-address-rewriting" title="Permalink to this headline">¶</a></h4>
<p>Google automatically rewrites the <em>From</em> line of any email you send via its SMTP
server to the default <em>Send mail as</em> address in your Gmail or Google Apps email
account setting. This will result in the <cite>dallinger_email_address</cite> value being
ignored, and the <cite>smtp_username</cite> appearing in the “From” header instead. A
possible workaround: in your Google email under <em>Settings</em>, go to the <em>Accounts</em>
tab/section and make “default” an account other than your Gmail/Google Apps
account. This will cause Google’s SMTP server to re-write the <em>From</em> field with
this address instead.</p>
</div>
<div class="section" id="debug-mode">
<h4>Debug Mode<a class="headerlink" href="#debug-mode" title="Permalink to this headline">¶</a></h4>
<p>Email notifications are never sent when Dallinger is running in “debug” mode.
The text of messages which would have been emailed will appear in the logging
output instead.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="python_module.html" class="btn btn-neutral float-right" title="Running Experiments Programmatically" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="configuration.html" class="btn btn-neutral float-left" title="Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>