
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>sync_s3 &#8212; django-extensions 3.1.1 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="syncdata" href="syncdata.html" />
    <link rel="prev" title="RunServerPlus" href="runserver_plus.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="syncdata.html" title="syncdata"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="runserver_plus.html" title="RunServerPlus"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">django-extensions 3.1.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="command_extensions.html" accesskey="U">Command Extensions</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">sync_s3</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="sync-s3">
<h1>sync_s3<a class="headerlink" href="#sync-s3" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">synopsis</dt>
<dd class="field-odd"><p>sync your MEDIA_ROOT and STATIC_ROOT folders to S3</p>
</dd>
</dl>
<p>Django command that scans all files in your settings.MEDIA_ROOT and
settings.STATIC_ROOT folders, then uploads them to S3 with the same
directory structure.</p>
<p>This command can optionally do the following but it is off by default:</p>
<blockquote>
<div><ul class="simple">
<li><p>gzip compress any CSS and Javascript files it finds and adds the
appropriate ‘Content-Encoding’ header.</p></li>
<li><p>set a far future ‘Expires’ header for optimal caching.</p></li>
<li><p>upload only media or static files.</p></li>
<li><p>use any other provider compatible with Amazon S3.</p></li>
<li><p>set other than ‘public-read’ ACL.</p></li>
</ul>
</div></blockquote>
<div class="section" id="example-usage">
<h2>Example Usage<a class="headerlink" href="#example-usage" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Upload files to S3 into the bucket &#39;mybucket&#39;
$ ./manage.py sync_s3 mybucket
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Upload files to S3 into the bucket &#39;mybucket&#39; and enable gzipping CSS/JS files and setting of a far future expires header
$ ./manage.py sync_s3 mybucket --gzip --expires
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Upload only media files to S3 into the bucket &#39;mybucket&#39;
$ ./manage.py sync_s3 mybucket  --media-only  # or --static-only
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Upload only media files to a S3 compatible provider into the bucket &#39;mybucket&#39; and set private file ACLs
$ ./manage.py sync_s3 mybucket  --media-only  --s3host=cs.example.com --acl=private
</pre></div>
</div>
</div>
<div class="section" id="required-libraries-and-settings">
<h2>Required libraries and settings<a class="headerlink" href="#required-libraries-and-settings" title="Permalink to this headline">¶</a></h2>
<p>This management command requires the boto library and was tested with version
1.4c:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/boto/boto">https://github.com/boto/boto</a></p>
</div></blockquote>
<p>It also requires an account with Amazon Web Services (AWS) and the AWS S3 keys.
Bucket name is required and cannot be empty.
The keys and bucket name are added to your settings.py file, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># settings.py</span>
<span class="n">AWS_ACCESS_KEY_ID</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="n">AWS_SECRET_ACCESS_KEY</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="n">AWS_BUCKET_NAME</span> <span class="o">=</span> <span class="s1">&#39;bucket&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="optional-settings">
<h2>Optional settings<a class="headerlink" href="#optional-settings" title="Permalink to this headline">¶</a></h2>
<p>It is possible to customize sync_s3 directly from django settings file, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># settings.py</span>
<span class="n">AWS_S3_HOST</span> <span class="o">=</span> <span class="s1">&#39;cs.example.com&#39;</span>
<span class="n">AWS_DEFAULT_ACL</span> <span class="o">=</span> <span class="s1">&#39;private&#39;</span>
<span class="n">SYNC_S3_PREFIX</span> <span class="o">=</span> <span class="s1">&#39;some_prefix&#39;</span>
<span class="n">FILTER_LIST</span> <span class="o">=</span> <span class="s1">&#39;dir1, dir2&#39;</span>
<span class="n">AWS_CLOUDFRONT_DISTRIBUTION</span> <span class="o">=</span> <span class="s1">&#39;E27LVI50CSW06W&#39;</span>
<span class="n">SYNC_S3_RENAME_GZIP_EXT</span> <span class="o">=</span> <span class="s1">&#39;.gz&#39;</span>
</pre></div>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">sync_s3</a><ul>
<li><a class="reference internal" href="#example-usage">Example Usage</a></li>
<li><a class="reference internal" href="#required-libraries-and-settings">Required libraries and settings</a></li>
<li><a class="reference internal" href="#optional-settings">Optional settings</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="runserver_plus.html"
                        title="previous chapter">RunServerPlus</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="syncdata.html"
                        title="next chapter">syncdata</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/sync_s3.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="syncdata.html" title="syncdata"
             >next</a> |</li>
        <li class="right" >
          <a href="runserver_plus.html" title="RunServerPlus"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">django-extensions 3.1.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="command_extensions.html" >Command Extensions</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">sync_s3</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright Copyright (C) 2008-2015 Michael Trier, Bas van Oostveen and contributors.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.4.3.
    </div>
  </body>
</html>